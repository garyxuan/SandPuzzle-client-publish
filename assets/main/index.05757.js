System.register("chunks:///_virtual/Adapter.ts",["cc","./Screen.ts","./Log.ts","./GlobalEvent.ts"],(function(e){var i,t,n,r,h,c;return{setters:[function(e){i=e.cclegacy,t=e.view,n=e.ResolutionPolicy},function(e){r=e.Screen},function(e){h=e.debug},function(e){c=e.GlobalEvent}],execute:function(){i._RF.push({},"f401425ewdKXpbC2O6Q6CLa","Adapter",void 0);e("Adapter",function(){function e(){}var i=e.prototype;return i.init=function(){var e=this;h("Adapter Init");var i=this.getDesignSize();r.DesignWidth=i.width,r.DesignHeight=i.height,t.setDesignResolutionSize(i.width,i.height,n.FIXED_WIDTH),this.resize(),this.registerResizeCallback((function(){h("Adapter resize"),e.resize()}))},i.resize=function(){r.SafeAreaHeight=60;var e=this.getScreenSize(),i=r.DesignWidth>r.DesignHeight;i==e.width>e.height?(r.ScreenWidth=e.width,r.ScreenHeight=e.height):(r.ScreenWidth=e.height,r.ScreenHeight=e.width),i?(r.SafeWidth=r.ScreenWidth-2*r.SafeAreaHeight,r.SafeHeight=r.ScreenHeight):(r.SafeWidth=r.ScreenWidth,r.SafeHeight=r.ScreenHeight-2*r.SafeAreaHeight),this.printScreen(),c.emit("gx::adapter::resize")},i.printScreen=function(){h("Screen.ScreenSize:"+r.ScreenWidth+" * "+r.ScreenHeight),h("Screen.DesignSize ="+r.DesignWidth+" * "+r.DesignHeight),h("Screen.SafeSize ="+r.SafeWidth+" * "+r.SafeHeight)},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/AdManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./AdMob.ts","./Log.ts"],(function(t){var n,e,a,r,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){a=t.SingletonClass},function(t){r=t.AdMob},function(t){i=t.debug}],execute:function(){e._RF.push({},"99a98tQXv1D4LEe6u78tk0L","AdManager",void 0);t("AdManager",function(t){function e(){var n;return i("AdManager constructor"),(n=t.call(this)||this)._adSupport=null,n._adSupport=new r,n._adSupport.init(),n}n(e,t),e.Ins=function(){return this.getInstance()};var a=e.prototype;return a.setListener=function(t){var n;null==(n=this._adSupport)||n.setListener(t)},a.getAdSupport=function(){return this._adSupport},a.isRewardedAdReady=function(t,n){var e;null==(e=this._adSupport)||e.isRewardedAdReady(t,n)},a.loadRewardedAd=function(t){var n;null==(n=this._adSupport)||n.loadRewardedAd(t)},a.showRewardedAd=function(t){var n;null==(n=this._adSupport)||n.showRewardedAd(t)},a.isInterstitialAdReady=function(t,n){var e;null==(e=this._adSupport)||e.isInterstitialAdReady(t,n)},a.loadInterstitialAd=function(t){var n;null==(n=this._adSupport)||n.loadInterstitialAd(t)},a.showInterstitialAd=function(t){var n;null==(n=this._adSupport)||n.showInterstitialAd(t)},e}(a)),t("AD_CONFIG",{adUnitIds:{rewardedVideo:"ca-app-pub-8175681423105810/8983492317",interstitial:"ca-app-pub-8175681423105810/1133509182",banner:""}});e._RF.pop()}}}));

System.register("chunks:///_virtual/AdMob.ts",["cc","./Log.ts"],(function(e){var i,d,t,l;return{setters:[function(e){i=e.cclegacy,d=e.sys,t=e.native},function(e){l=e.debug}],execute:function(){i._RF.push({},"ca3e9+VJQNDlKjTR8MbNuE4","AdMob",void 0);e("AdMob",function(){function e(){this._listener=null,this._rewardedAdReadyCallback=null,this._interstitialAdReadyCallback=null}var i=e.prototype;return i.init=function(){var e=this;d.isNative&&(t.bridge.onNative=function(i,d){if(l("native.bridge.onNative arg0 agr1",i,d),"isRewardedAdReady"==i)l("isRewardedAdReady",d),null==e._rewardedAdReadyCallback||e._rewardedAdReadyCallback("true"==d.toString());else if("isInterstitialAdReady"==i)l("isInterstitialAdReady",d),null==e._interstitialAdReadyCallback||e._interstitialAdReadyCallback("true"==d.toString());else if("loadRewardedAdError"==i){var t;l("loadRewardedAdError",d),null==(t=e._listener)||null==t.onAdLoadFail||t.onAdLoadFail("",0,d)}else if("loadInterstitialAdError"==i){var n;l("loadInterstitialAdError",d),null==(n=e._listener)||null==n.onAdLoadFail||n.onAdLoadFail("",0,d)}else if("userDidEarnReward"==i){var a,r=d.split(":"),s=r[0],o=r[1],u=Number(o).toFixed(0);l("type",s),l("amount",u),null==(a=e._listener)||null==a.onAdRewarded||a.onAdRewarded("")}else if("adDidRecordClick"==i){var c;l("adDidRecordClick",d),null==(c=e._listener)||null==c.onAdClick||c.onAdClick("")}else if("adWillPresentFullScreenContent"==i){var A;l("adWillPresentFullScreenContent",d),null==(A=e._listener)||null==A.onAdShowSuccess||A.onAdShowSuccess("")}else if("adDidDismissFullScreenContent"==i){var R;l("adDidDismissFullScreenContent"),null==(R=e._listener)||null==R.onAdClose||R.onAdClose("")}else if("didFailToPresentFullScreenContentWithError"==i){var v;l("didFailToPresentFullScreenContentWithError",d),null==(v=e._listener)||null==v.onAdShowFail||v.onAdShowFail("",0,d)}})},i.setListener=function(e){this._listener=e},i.isRewardedAdReady=function(e,i){d.isNative?(this._rewardedAdReadyCallback=i,t.bridge.sendToNative("isRewardedAdReady",e)):null==i||i(!0)},i.loadRewardedAd=function(e){d.isNative&&t.bridge.sendToNative("loadRewardedAd",e)},i.showRewardedAd=function(e){var i;d.isNative?t.bridge.sendToNative("showRewardedAd",e):null==(i=this._listener)||null==i.onAdRewarded||i.onAdRewarded(e)},i.isInterstitialAdReady=function(e,i){d.isNative&&(this._interstitialAdReadyCallback=i,t.bridge.sendToNative("isInterstitialAdReady",e))},i.loadInterstitialAd=function(e){d.isNative&&t.bridge.sendToNative("loadInterstitialAd",e)},i.showInterstitialAd=function(e){d.isNative&&t.bridge.sendToNative("showInterstitialAd",e)},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/AdUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIModule.ts"],(function(t){var n,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.UIModule}],execute:function(){e._RF.push({},"8e264SYZ7BKuYNA2kUaYv6p","AdUI",void 0);t("AdUI",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.show=function(t){},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/AdView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdManager.ts","./Log.ts"],(function(t){var n,e,o,i,d,a,r,l,u,c,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){d=t.cclegacy,a=t._decorator,r=t.Button,l=t.Component},function(t){u=t.AdManager,c=t.AD_CONFIG},function(t){s=t.debug}],execute:function(){var A,w,f,p,I,h,B,g,R,b,y;d._RF.push({},"44ed5prrGtBzpdj14LAEIu7","AdView",void 0);var C=a.ccclass,L=a.property;t("AdView",(A=C("AdView"),w=L(r),f=L(r),p=L(r),I=L(r),A((g=n((B=function(t){function n(){for(var n,e=arguments.length,d=new Array(e),a=0;a<e;a++)d[a]=arguments[a];return n=t.call.apply(t,[this].concat(d))||this,o(n,"loadVideoAdButton",g,i(n)),o(n,"showRewardedAdButton",R,i(n)),o(n,"loadInterstitialAdButton",b,i(n)),o(n,"showInterstitialAdButton",y,i(n)),n}e(n,t);var d=n.prototype;return d.onLoad=function(){u.Ins().setListener({onAdLoadSuccess:function(t){s("onAdLoadSuccess",t)},onAdLoadFail:function(t,n,e){s("onAdLoadFail",t,n,e)},onAdShowSuccess:function(t){s("onAdShowSuccess",t)},onAdShowFail:function(t,n,e){s("onAdShowFail",t,n,e)},onAdClick:function(t){s("onAdClick",t)},onAdClose:function(t){s("onAdClose",t)},onAdRewarded:function(t){s("onAdRewarded",t)}})},d.onLoadRewardedAdButtonClick=function(){s("onLoadRewardedAdButtonClick"),u.getInstance().loadRewardedAd(c.adUnitIds.rewardedVideo)},d.onShowRewardedAdButtonClick=function(){s("onShowRewardedAdButtonClick"),u.getInstance().isRewardedAdReady("11",(function(t){t?(s("激励视频广告已准备好"),u.getInstance().showRewardedAd(c.adUnitIds.rewardedVideo)):s("激励视频广告未准备好")}))},d.onLoadInterstitialAdButtonClick=function(){s("onLoadInterstitialAdButtonClick"),u.getInstance().loadInterstitialAd(c.adUnitIds.interstitial)},d.onShowInterstitialAdButtonClick=function(){s("onShowInterstitialAdButtonClick"),u.getInstance().isInterstitialAdReady(c.adUnitIds.interstitial,(function(t){t?(s("插屏广告已准备好"),u.getInstance().showInterstitialAd(c.adUnitIds.interstitial)):s("插屏广告未准备好")}))},n}(l)).prototype,"loadVideoAdButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(B.prototype,"showRewardedAdButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(B.prototype,"loadInterstitialAdButton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(B.prototype,"showInterstitialAdButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=B))||h));d._RF.pop()}}}));

System.register("chunks:///_virtual/App.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Handler.ts"],(function(n){var e,t,i,c,u,s;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,i=n.game,c=n.Game},function(n){u=n.ccInit,s=n.appInit}],execute:function(){t._RF.push({},"20e1fkwhAZIeo9EjjrzOEiJ","App",void 0);var o=function(n){return n.EVENT_APPINIT_FINISHED="EVENT_APPINIT_FINISHED",n}(o||{}),r=n("App",function(){function n(){}return e(n,null,[{key:"ins",get:function(){return this._ins||(this._ins=new n),this._ins}}]),n}());r._ins=void 0,r.EventType=o;n("app",r.ins);u&&i.once(c.EVENT_ENGINE_INITED,(function(){})),s&&i.once(r.EventType.EVENT_APPINIT_FINISHED,(function(){})),t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(o){var u,e,s,i,n,t,c,r,d;return{setters:[function(o){u=o.inheritsLoose,e=o.createClass},function(o){s=o.cclegacy,i=o.AudioClip,n=o.assetManager,t=o.Node,c=o.director,r=o.AudioSource},function(o){d=o.SingletonClass}],execute:function(){s._RF.push({},"b76a940axpIgp5rVYt5L+pc","AudioMgr",void 0);o("AudioMgr",function(o){function s(){var u;(u=o.call(this)||this)._musicSource=void 0,u._soundSource=void 0,u._musicVolume=1,u._soundVolume=1;var e=new t;e.name="__audioMgr__",c.getScene().addChild(e),c.addPersistRootNode(e);var s=new t;e.addChild(s),u._musicSource=s.addComponent(r);var i=new t;return e.addChild(i),u._soundSource=i.addComponent(r),u}u(s,o),s.Ins=function(){return this.getInstance()};var d=s.prototype;return d.playOneShot=function(o,u,e){var s=this;(void 0===u&&(u=1),void 0===e&&(e="resources"),o instanceof i)?(this._soundSource.volume=1,this._soundSource.playOneShot(o,u*this._soundVolume)):n.getBundle(e).load(o,(function(o,e){o?console.log(o):(s._soundSource.volume=1,s._soundSource.playOneShot(e,u*s._soundVolume))}))},d.play=function(o,u,e){var s=this;(void 0===u&&(u=1),void 0===e&&(e="resources"),o instanceof i)?(this._musicSource.stop(),this._musicSource.clip=o,this._musicSource.play(),this._musicSource.volume=this._musicVolume*u):n.getBundle(e).load(o,(function(o,e){o?console.log(o):(s._musicSource.stop(),s._musicSource.clip=e,s._musicSource.play(),s._musicSource.volume=s._musicVolume*u)}))},d.stop=function(){this._musicSource.stop(),this._soundSource.stop()},d.pause=function(){this._musicSource.pause(),this._soundSource.pause()},d.resume=function(){this._musicSource.play(),this._soundSource.play()},e(s,[{key:"audioSource",get:function(){return this._musicSource}},{key:"musicVolume",get:function(){return this._musicVolume},set:function(o){this._musicVolume=o,this._musicSource.volume=this._musicVolume}},{key:"soundSource",get:function(){return this._soundSource}},{key:"soundVolume",get:function(){return this._soundVolume},set:function(o){this._soundVolume=o,this._soundSource.volume=this.soundVolume}}]),s}(d));s._RF.pop()}}}));

System.register("chunks:///_virtual/BinaryHeap.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"9e2de6K7BBLPIYf5+PmZ0jX","BinaryHeap",void 0);t("HeapNode",(function(){this.index=void 0})),t("BinaryHeap",function(){function t(t){this._nodes=void 0,this._size=void 0,this._capacity=void 0,this._size=0,this._capacity=t<=0?4:t,this._nodes=new Array(this._capacity)}var n=t.prototype;return n.clear=function(){this._size=0},n.get=function(t){return this._nodes[t]},n.top=function(){return this._nodes[0]},n.contains=function(t){return t.index>=0&&t.index<this._size},n.push=function(t){var i=++this._size;i>this._capacity&&(this._capacity=this._nodes.length*=2),this._sortUp(t,i-1)},n.pop=function(){if(0==this._size)return null;var t=this._nodes,i=t[0];i.index=-1,t[0]=null;var n=--this._size;if(n>0){var e=t[n];t[n]=null,this._sortDown(e,0)}return i},n.remove=function(t){if(this.contains(t)){var i=--this._size,n=this._nodes,e=n[t.index]=n[i];e.index=t.index,n[i]=null,this.update(e),t.index=-1}},n.update=function(t){if(!this.contains(t))return!1;var i=t.index,n=this._nodes;return i>0&&n[i].lessThan(n[this._parent(i)])?this._sortUp(n[i],i):this._sortDown(n[i],i),!0},n._parent=function(t){return t-1>>1},n._sortUp=function(t,i){for(var n=this._parent(i),e=this._nodes;i>0&&t.lessThan(e[n]);)e[n].index=i,e[i]=e[n],i=n,n=this._parent(n);t.index=i,e[i]=t},n._sortDown=function(t,i){for(var n=1+(i<<1),e=this._nodes,s=this._size;n<s;){var r=t;if(e[n].lessThan(r)&&(r=e[n]),n+1<s&&e[n+1].lessThan(r)&&(r=e[++n]),t==r)break;r.index=i,e[i]=r,i=n,n=1+(n<<1)}t.index=i,e[i]=t},i(t,[{key:"count",get:function(){return this._size}},{key:"empty",get:function(){return 0==this._size}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CocosAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Adapter.ts","./Log.ts"],(function(e){var t,i,n,o,c,r,s;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,o=e.screen,c=e.view},function(e){r=e.Adapter},function(e){s=e.debug}],execute:function(){var a;i._RF.push({},"42c5fShd7lBxb7A0fYJjZzX","CocosAdapter",void 0);var u=n.ccclass;n.property,e("CocosAdapter",u("CocosAdapter")(a=function(e){function i(){return e.apply(this,arguments)||this}t(i,e);var n=i.prototype;return n.getScreenSize=function(){var e=o.windowSize;return{width:Math.ceil(e.width/c.getScaleX()),height:Math.ceil(e.height/c.getScaleY())}},n.getDesignSize=function(){var e=c.getDesignResolutionSize();return{width:e.width,height:e.height}},n.registerResizeCallback=function(e){o&&o.on?(o.on("window-resize",(function(){s("window-resize"),e.apply(void 0,arguments)}),this),o.on("orientation-change",(function(){s("orientation-change"),e.apply(void 0,arguments)}),this),o.on("fullscreen-change",(function(){s("fullscreen-change"),e.apply(void 0,arguments)}),this)):c.setResizeCallback(e)},i}(r))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/CocosEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./header4.ts","./Platform.ts","./CocosAdapter.ts","./Log.ts","./Time.ts","./GlobalTimer.ts","./ModuleBase.ts"],(function(t){var i,e,o,r,n,s,a,l,c,f,u,d,m,p,h,O,b,y,S,g,M,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,a=t._decorator,l=t.profiler,c=t.game,f=t.director,u=t.sys,d=t.macro,m=t.Component},function(t){p=t.enableDebugMode},function(t){h=t.Platform,O=t.PlatformType},function(t){b=t.CocosAdapter},function(t){y=t.log,S=t.debug},function(t){g=t.Time},function(t){M=t.GlobalTimer},function(t){v=t.ModuleBase}],execute:function(){var P,A,C;s._RF.push({},"afb215FJpVMLqHw8UPKqT8z","CocosEntry",void 0);var N=a.property;t("CocosEntry",(P=N({displayName:"帧率"}),C=i((A=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,o(i,"fps",C,r(i)),i}e(i,t);var s=i.prototype;return s.getConfig=function(){return{}},s.start=function(){var t;y("CocosEntry int start");var i=this.getConfig();p(null!=(t=i.debug)&&t),i.hideStats&&l.hideStats(),c.frameRate=this.fps,f.addPersistRootNode(this.node),this.node.setSiblingIndex(this.node.children.length-1),this.initPlatform(),this.initTime(),this.initAdapter(),this.initModule(),y("CocosEntry init finish"),this.onInit()},s.initPlatform=function(){switch(h.isNative=u.isNative,h.isMobile=u.isMobile,h.isNativeMobile=u.isNative&&u.isMobile,u.os){case u.OS.ANDROID:h.isAndroid=!0,S("system is Android");break;case u.OS.IOS:h.isIOS=!0,S("system is IOS");break;case u.OS.OSX:h.isMacOS=!0,S("system is MacOS");break;case u.OS.OPENHARMONY:h.isHarmonyOS=!0,S("system is HarmonyOS")}switch(u.platform){case u.Platform.IOS:h.platform=O.IOS;break;case u.Platform.MACOS:h.platform=O.MacOS;break;case u.Platform.ANDROID:h.platform=O.Android;break;case u.Platform.OPENHARMONY:h.platform=O.HarmonyOS;break;default:h.isBrowser=!0,h.platform=O.Browser}S("platform: "+O[h.platform])},s.initAdapter=function(){(new b).init()},s.initModule=function(){S("init module");for(var t,i=n(this.getComponentsInChildren(v));!(t=i()).done;){var e=t.value;S("init module: "+e.moduleName),e.init()}},s.initTime=function(){g.init(),M.initTimer(),this.schedule(this.tick.bind(this),0,d.REPEAT_FOREVER)},s.tick=function(t){M.update(t)},i}(m)).prototype,"fps",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),A));s._RF.pop()}}}));

System.register("chunks:///_virtual/ColorHelper.ts",["cc"],(function(r){var e,a;return{setters:[function(r){e=r.cclegacy,a=r.Color}],execute:function(){e._RF.push({},"990d2iQ0JNAyLQWXj3GjO8P","ColorHelper",void 0);r("default",function(){function r(){}return r.addColor=function(r,e,a,t,o){for(var s=this.hsb2rgb(e,a,t),n=0;n<o;n++)r.push(s)},r.hsb2rgb=function(r,e,t){var o,s,n;if(r/=360,0===e)o=s=n=t;else{var h=Math.floor(6*r),c=6*r-h,i=t*(1-e),u=t*(1-c*e),l=t*(1-(1-c)*e);switch(h%6){case 0:o=t,s=l,n=i;break;case 1:o=u,s=t,n=i;break;case 2:o=i,s=t,n=l;break;case 3:o=i,s=u,n=t;break;case 4:o=l,s=i,n=t;break;case 5:o=t,s=i,n=u}}return new a(Math.round(255*o),Math.round(255*s),Math.round(255*n),255)},r.rgb2hsb=function(r,e,a){r/=255,e/=255,a/=255;var t=Math.max(r,e,a),o=t,s=t-Math.min(r,e,a),n=0,h=0;if(0===t)return{h:0,s:0,v:0};if(h=s/t,0===s)n=0;else{switch(t){case r:n=(e-a)/s+(e<a?6:0);break;case e:n=(a-r)/s+2;break;case a:n=(r-e)/s+4}n/=6}return{h:Math.round(360*n),s:h,v:o}},r.buildColorArray=function(r,e){e.length=0;for(var a=r.length,t=0;t<a;t++){var o=r[t],s=this.rgb2hsb(o.r,o.g,o.b),n=e[t]=[];this.addColor(n,s.h,s.s,s.v,60),this.addColor(n,s.h,s.s,.95*s.v,20),this.addColor(n,s.h,s.s,.85*s.v,10),this.addColor(n,s.h,s.s,.8*s.v,10)}},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigLoader.ts",["cc"],(function(n){var o,t;return{setters:[function(n){o=n.cclegacy,t=n.JsonAsset}],execute:function(){o._RF.push({},"3c47b2JypZIyo53BO7IoHwo","ConfigLoader",void 0),n("ConfigLoader",function(){function n(){}return n.loadConfig=function(n,o){var i;return i=o instanceof t?o.json:o,this._configs.set(n,i),i},n.getConfig=function(n,o){return this._configs.get(n)||o},n.hasConfig=function(n){return this._configs.has(n)},n.clearConfigs=function(){this._configs.clear()},n.getConfigNames=function(){return Array.from(this._configs.keys())},n}())._configs=new Map,o._RF.pop()}}}));

System.register("chunks:///_virtual/Core.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a0015ZA5XZJV7yCEao6wNGi","Core",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Device.ts",["cc","./Platform.ts"],(function(t){var i,e,o;return{setters:[function(t){i=t.cclegacy,e=t.native},function(t){o=t.Platform}],execute:function(){i._RF.push({},"31460Tttj9JaYt0D9Qgx8aF","Device",void 0);t("Device",function(){function t(){}return t.VibrateShort=function(){o.isNative&&o.isIOS&&e.reflection.callStaticMethod("MyNative","VibrateShort:","")},t.CopyTextToClipboard=function(t){o.isNative?o.isIOS&&e.reflection.callStaticMethod("MyNative","CopyTextToClipboard:",t):navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(t)},t.GetAppVersion=function(){return o.isNative?o.isIOS?e.reflection.callStaticMethod("MyNative","GetAppVersion:",""):void 0:"1.0"},t.GetUUID=function(){return o.isNative?o.isIOS?e.reflection.callStaticMethod("MyNative","GetUUID:",""):void 0:""},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/GameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalTimer.ts","./Log.ts","./PixelSprite.ts","./ColorHelper.ts","./ShapeHelper.ts","./ScoreManager.ts","./ConfigLoader.ts","./UserData.ts","./UIResurrection.ts","./ReqUpdateHighestScore.ts","./PixelSpriteNum.ts","./UIPause.ts","./ReqAddDiamond.ts","./UIWaiting.ts","./UITips.ts","./UserPreferences.ts","./Device.ts","./AudioMgr.ts","./GameSceneBase.ts","./PixelSpriteWord.ts","./UIAd.ts","./GlobalEvent.ts","./PixelSpriteProgress.ts","./UILevelUp.ts","./ReqLevelUp.ts","./SafeJSON.ts","./UIAlert.ts","./UIMgr.ts"],(function(e){var t,i,o,n,r,a,s,l,c,h,d,f,u,p,g,m,_,v,S,b,C,w,I,M,T,k,y,U,L,G,P,x,F,z,R,E,B,O,A,N,D,H,q,W,V,j;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,l=e.Node,c=e.CCInteger,h=e.director,d=e.sys,f=e.Color,u=e.find,p=e.Vec3,g=e.Tween,m=e.tween},function(e){_=e.GlobalTimer},function(e){v=e.debug,S=e.error},function(e){b=e.PixelSprite},function(e){C=e.default},function(e){w=e.Shape,I=e.ShapeHelper},function(e){M=e.ScoreManager},function(e){T=e.ConfigLoader},function(e){k=e.UserData},function(e){y=e.UIResurrection},function(e){U=e.ReqUpdateHighestScore},function(e){L=e.PixelSpriteNum},function(e){G=e.UIPause},function(e){P=e.ReqAddDiamond},function(e){x=e.UIWaiting},function(e){F=e.UITips},function(e){z=e.UserPreferences},function(e){R=e.Device},function(e){E=e.AudioMgr},function(e){B=e.GameSceneBase},function(e){O=e.PixelSpriteWord},function(e){A=e.UIAd},function(e){N=e.GlobalEvent},function(e){D=e.PixelSpriteProgress},function(e){H=e.UILevelUp},function(e){q=e.ReqLevelUp},function(e){W=e.SafeJSON},function(e){V=e.UIAlert},function(e){j=e.UIMgr}],execute:function(){var J,K,X,Y,Q,Z,$,ee,te,ie,oe,ne,re,ae,se,le,ce,he,de,fe,ue,pe,ge,me,_e,ve,Se,be;a._RF.push({},"cfe2cEog4hPuo6DYs2GRTCi","GameScene",void 0);var Ce=s.ccclass,we=s.property;e("GameScene",(J=Ce("GameScene"),K=we({type:b,displayName:"沙盘纹理"}),X=we({type:l,displayName:"最高点控制线"}),Y=we({type:c,displayName:"方块大小"}),Q=we({type:L,displayName:"钻石数量"}),Z=we({type:L,displayName:"最高分"}),$=we({type:L,displayName:"当前分数"}),ee=we({type:D,displayName:"分数进度"}),te=we({type:O,displayName:"关卡开始分数"}),ie=we({type:O,displayName:"关卡结束分数"}),oe=we({type:b,displayName:"当前形状1"}),ne=we({type:b,displayName:"当前形状2"}),re=we({type:b,displayName:"当前形状3"}),J(((be=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).moduleName="GameScene",o(t,"sandMap",le,n(t)),o(t,"topLine",ce,n(t)),o(t,"blockSize",he,n(t)),o(t,"diamondsLabel",de,n(t)),o(t,"highestScoreLabel",fe,n(t)),o(t,"currentScoreLabel",ue,n(t)),o(t,"currentScoreProgress",pe,n(t)),o(t,"levelStartScoreLabel",ge,n(t)),o(t,"levelEndScoreLabel",me,n(t)),o(t,"shape1",_e,n(t)),o(t,"shape2",ve,n(t)),o(t,"shape3",Se,n(t)),t._randColor=[],t._unlockColors=[],t._levelConfig=null,t._sandFlowingTimer=!1,t._activeSandCoords=new Set,t._shapeInfo=[],t._sandInfoMap=new Map,t._shapeId=0,t._flashingBlocks=[],t._flashTimer=0,t._isFlashing=!1,t._stableTimer=0,t._stableDelay=.05,t._lastPlaySandSoundTime=0,t._needsTextureUpdate=!1,t._textureUpdateTimer=0,t._textureUpdateInterval=1/60,t._frameCount=0,t._lastFPSUpdate=0,t._gridCols=0,t._gridRows=0,t._isGameOver=!1,t._checkGameOverTimer=0,t._topLineRow=0,t._mainTimer=0,t._isLevelUp=!1,t}i(t,e);var a=t.prototype;return a.getShapePixelSprite=function(e){switch(e){case 0:return this.shape1;case 1:return this.shape2;case 2:return this.shape3}},a.start=function(){t.Ins=this,this.initNode(),this.initEvent(),this.onInit()},a.initNode=function(){for(var e=this,t=0,i=-99999999,o=!1,n=function(){t=0,i=-99999999,o=!1},r=function(r){e.child("shape"+(r+1)).on(l.EventType.TOUCH_START,(function(n){if(!e._shapeInfo[r].used&&!(e._sandFlowingTimer||e._isFlashing||e._isGameOver)){z.vibrate&&R.VibrateShort(),o=!0,t=n.getUILocation().x;for(var a=e._shapeInfo[r].info.colors,s=e.sandMap._texture.width/e.blockSize/2-Math.floor(a[0].length/2),l=0;l<a.length;l++)for(var c=0;c<a[l].length;c++){e.sandMap.setGridBlockColor(s+c,l,a[l][c],e.blockSize,!1);var h=e.coordToString(l,s+c);e._sandInfoMap.set(h,{color:a[l][c],info:e._shapeInfo[r].info})}i=s,e._needsTextureUpdate=!0}})),e.child("shape"+(r+1)).on(l.EventType.TOUCH_MOVE,(function(n){if(o&&!e._shapeInfo[r].used&&!(e._sandFlowingTimer||e._isFlashing||e._isGameOver)){var a=n.getUILocation().x,s=e._shapeInfo[r].info.colors,l=e.sandMap._texture.width/e.blockSize/2,c=l-Math.floor(s[0].length/2),h=Math.floor(2*(a-t)/e.blockSize);c+h+s[0].length>2*l?(S("out of right"),h=2*l-c-s[0].length):c+h<0&&(S("out of left"),h=-c),-99999999==i&&(i=c);var d=c+h,f=d-i;if(0!=f){if(f>0)for(var u=0;u<s.length;u++)for(var p=0;p<f;p++)e.sandMap.clearGridBlockColor(i+p,u,e.blockSize,!1);else if(f<0)for(var g=0;g<s.length;g++)for(var m=0;m<Math.abs(f);m++)e.sandMap.clearGridBlockColor(i+s[0].length-1-m,g,e.blockSize,!1);for(var _=0;_<s.length;_++)for(var v=0;v<s[_].length;v++){e.sandMap.setGridBlockColor(d+v,_,s[_][v],e.blockSize,!1);var b=e.coordToString(_,d+v);e._sandInfoMap.set(b,{color:s[_][v],info:e._shapeInfo[r].info})}i=d,e._needsTextureUpdate=!0}}})),e.child("shape"+(r+1)).on(l.EventType.TOUCH_END,(function(t){v("touch end"),o&&!e._shapeInfo[r].used&&(e._sandFlowingTimer||e._isFlashing||e._isGameOver||(v("lastBlockLeftX",i),v("this.sandMap.size.width",e.sandMap.size.width),e._sandFlowingTimer=!0,e.getShapePixelSprite(r).clear(!0),e._shapeInfo[r].used=!0,M.addPlaceCount(),M.addPlaceScore(e._shapeInfo[r].info.shapeType,e._unlockColors[e._shapeInfo[r].info.colorIndex]),e._shapeInfo.every((function(e){return 1==e.used}))&&e.initShape(),n()))})),e.child("shape"+(r+1)).on(l.EventType.TOUCH_CANCEL,(function(t){v("touch cancel"),o&&!e._shapeInfo[r].used&&(e._sandFlowingTimer||e._isFlashing||e._isGameOver||(e._sandFlowingTimer=!0,e.getShapePixelSprite(r).clear(!0),e._shapeInfo[r].used=!0,M.addPlaceCount(),M.addPlaceScore(e._shapeInfo[r].info.shapeType,e._unlockColors[e._shapeInfo[r].info.colorIndex]),e._shapeInfo.every((function(e){return 1==e.used}))&&e.initShape(),n()))}))},a=0;a<3;a++)r(a)},a.initEvent=function(){var e=this;N.on("UserData:Changed",(function(){v("UserData:Changed"),e.initUserInfo()})),N.on("UserData:Level:Changed",(function(){v("LevelConfig:Changed"),e.onLevelChanged()})),N.on("UIResurrection:Success",(function(){v("UIResurrection:Success"),e.restartGame()})),N.on("UIResurrection:Failed",(function(){v("UIResurrection:Failed"),e.clearGameLocalCache(),(new q).start(1).then((function(){})).catch((function(e){h.loadScene("HomeScene"),j.getInstance().closeAllUI()}))})),N.on("UIPause:ResetGame",(function(){v("UIPause:ResetGame"),e.resetGame(),e.restartGame()}))},a.onInit=function(){var e=this;v("GameScene onInit"),this.initConfig(),this.initUserInfo(),this.initProps(),this.initScoreSystem(),this.initSandMap(),this.initShape(),this._mainTimer=_.startTimer((function(t){e._isGameOver?v("gameOver return"):(e.flowSand(t),e.matching(),e.updateFlashEffect(1/60),e._textureUpdateTimer+=t,e._needsTextureUpdate&&e._textureUpdateTimer>=e._textureUpdateInterval&&(e.sandMap.updateAllData(),e._needsTextureUpdate=!1,e._textureUpdateTimer=0),e.updatePerformance(t),e._sandFlowingTimer&&(e._checkGameOverTimer+=t),e._checkGameOverTimer>0&&!e._sandFlowingTimer&&!e._isFlashing&&(e._checkGameOverTimer=0,e.checkGameOver()))}),1/60,-1)},a.initSandMap=function(){var e=this;if(this.sandMap){C.buildColorArray(this._unlockColors,this._randColor),this.sandMap.clear(!0),this.blockSize=this._levelConfig.block_size;var t=this.sandMap._texture.width,i=this.sandMap._texture.height;if(this._gridCols=Math.floor(t/this.blockSize),this._gridRows=Math.floor(i/this.blockSize),this.topLine){var o=this.topLine.position,n=this.sandMap.size.height/2-o.y;this._topLineRow=Math.floor(n/this.blockSize),this.topLine.y=this.sandMap.size.height/2-this._topLineRow*this.blockSize,v("topLine row:",this._topLineRow)}var r=d.localStorage.getItem("sandMapColor"),a=d.localStorage.getItem("sandMapInfo");if(r)for(var s=W.parse(r),l=0;l<s.length;l++)for(var c=0;c<s[l].length;c++){var h=s[l][c].split(",");this.sandMap.setGridBlockColor(c,l,new f(Number(h[0]),Number(h[1]),Number(h[2]),Number(h[3])),this.blockSize,!1)}if(a){var u=W.parse(a);v("parsed",u),this._sandInfoMap=new Map(u.map((function(t){var i=t[0],o=t[1],n=o[0],r=o[1],a=o[2],s=e.parseCoord(i),l=s[0],c=s[1];return[i,{color:e.sandMap.getGridBlockColor(c,l,e.blockSize)||new f(0,0,0,0),info:{colorIndex:n,shapeType:r,shapeId:a}}]}))),this._activeSandCoords=new Set(this._sandInfoMap.keys())}this.sandMap.updateAllData(),_.startTimer((function(){e.sandMap.setAutoUpdate(!1)}),1/60,0)}},a.testFillSanMap=function(){for(var e=this.sandMap._texture.width,t=this.sandMap._texture.height,i=[],o=0;o<t;o++){i[o]=[];for(var n=0;n<e;n++){var r=Math.floor(Math.random()*this._unlockColors.length);i[o][n]=this._unlockColors[r]}}this.sandMap.drawPixelGrid(this.blockSize,new f(0,0,0,0),i,!0)},a.initShape=function(){if(this.shape1&&this.shape2&&this.shape3)if(0!=this._unlockColors.length)for(var e=-1,t=0;t<3;t++){var i=Math.floor(Math.random()*this._randColor.length);Math.random()>.05&&-1!=e&&e==i&&(i=(i+1)%this._randColor.length),e=i;var o=Math.floor(Math.random()*(Object.keys(w).length/2-1)),n=I.buildShape(o,this._randColor[i]);v("blockColors",n),this.getShapePixelSprite(t).drawPixelGrid(8,new f(0,0,0,0),n,!0),this._shapeInfo[t]={used:!1,info:{colors:this.dealShapeColor(t,n),shapeType:o,shapeId:this._shapeId++,colorIndex:i}}}else S("initShape _unlockColors not init");else S("initShape error, shape not init")},a.dealShapeColor=function(e,t){for(var i=t,o=i[0].length,n=i.length,r=[],a=0,s=0;s<o;s++){for(var l=!1,c=0;c<n;c++)if(0!=i[s][c].r||0!=i[s][c].g||0!=i[s][c].b){l=!0;break}l&&(r[a]=[].concat(i[s]),a++)}if(r.length>0){for(var h=[],d=r[0].length,f=[],u=0;u<d;u++){for(var p=!1,g=0;g<r.length;g++)if(0!=r[g][u].r||0!=r[g][u].g||0!=r[g][u].b){p=!0;break}p&&f.push(u)}for(var m=0;m<r.length;m++){h[m]=[];for(var _=0;_<f.length;_++)h[m][_]=r[m][f[_]]}return h}return[]},a.flowSand=function(e){if(this.sandMap&&this.sandMap._texture&&this._sandFlowingTimer&&!this._isFlashing){for(var t=!1,i=!1,o=0;o<2;o++){for(var n=[],r=0;r<this._gridRows;r++)n[r]=new Array(this._gridCols).fill(!1);for(var a=!1,s=!1,l=this._gridRows-2;l>=0;l--)for(var c=l%2==0,h=c?0:this._gridCols-1,d=c?this._gridCols:-1,f=c?1:-1,u=h;u!==d;u+=f)if(!n[l][u]){var p=this.sandMap.getGridBlockColor(u,l,this.blockSize);if(p&&(0!==p.r||0!==p.g||0!==p.b)){var g=this.getFallDistance(l,u,this._gridRows,this._gridCols);if(g>0)g=Math.min(g,Math.ceil(this._gridRows/8)),this.movePixel(l,u,l+g,u,p,n),a=!0;else{var m=u-1,_=u+1;if(!(Math.random()>80))for(var v=[{row:l+1,col:m},{row:l+1,col:_},{row:l+2,col:m},{row:l+2,col:_}],S=0,b=Math.random()<.5?[v[0],v[1],v[2],v[3]]:[v[1],v[0],v[3],v[2]];S<b.length;S++){var C=b[S];if(this.canMoveTo(C.row,C.col,this._gridRows,this._gridCols)){this.movePixel(l,u,C.row,C.col,p,n),a=!0,s=!0;break}}}}}a&&(t=!0),s&&(i=!0)}t?(this._stableTimer=0,0==this._lastPlaySandSoundTime&&i&&(this._lastPlaySandSoundTime=Date.now(),E.Ins().playOneShot("audio/sand_move"))):(this._stableTimer+=e,this._stableTimer>=this._stableDelay&&(this._sandFlowingTimer=!1,this._stableTimer=0,this._lastPlaySandSoundTime=0))}},a.matching=function(){if(this.sandMap&&this.sandMap._texture&&!this._sandFlowingTimer&&!this._isFlashing){var e=Array.from(this._activeSandCoords);if(0!==e.length){for(var t=[],i=0;i<this._gridRows;i++)t[i]=new Array(this._gridCols).fill(!1);for(var o=0,n=e;o<n.length;o++){var r=n[o],a=this.parseCoord(r),s=a[0],l=a[1];if(!t[s][l]){var c=this.bfsConnectedBlock(s,l,this._gridRows,this._gridCols,t);if(c.length>0){v("connectedBlock.length > 0");var h=Math.min.apply(Math,c.map((function(e){return e.col}))),d=Math.max.apply(Math,c.map((function(e){return e.col})));0===h&&d===this._gridCols-1&&this.startFlashEffect(c)}}}this._activeSandCoords.clear(),this._isFlashing}}},a.bfsConnectedBlock=function(e,t,i,o,n){var r=[],a=[],s=this.coordToString(e,t),l=this._sandInfoMap.get(s);if(!l)return r;var c=l.info.colorIndex;for(a.push({row:e,col:t}),n[e][t]=!0;a.length>0;){var h=a.shift();r.push(h);for(var d=0,f=[{row:-1,col:0},{row:1,col:0},{row:0,col:-1},{row:0,col:1}];d<f.length;d++){var u=f[d],p=h.row+u.row,g=h.col+u.col;if(!(p<0||p>=i||g<0||g>=o)&&!n[p][g]){var m=this.coordToString(p,g),_=this._sandInfoMap.get(m);_&&_.info.colorIndex===c&&(n[p][g]=!0,a.push({row:p,col:g}))}}}return r},a.startFlashEffect=function(e){var t=this;this._isFlashing||(z.vibrate&&(R.VibrateShort(),E.Ins().playOneShot("audio/remove")),this._flashingBlocks=e.map((function(e){var i=t.coordToString(e.row,e.col),o=t._sandInfoMap.get(i);return{row:e.row,col:e.col,originalColor:o?o.color:new f(0,0,0,0)}})),this._isFlashing=!0,this._flashTimer=0)},a.updateFlashEffect=function(e){if(this._isFlashing){if(this._flashTimer+=e,this._flashTimer>=.3)return this.eliminateConnectedBlock(this._flashingBlocks),this._isFlashing=!1,this._flashingBlocks=[],this._flashTimer=0,void(this._sandFlowingTimer=!0);for(var t,i=Math.floor(this._flashTimer/.05)%2==0,o=r(this._flashingBlocks);!(t=o()).done;){var n=t.value;i?this.sandMap.setGridBlockColor(n.col,n.row,new f(255,255,255,255),this.blockSize,!1):this.sandMap.setGridBlockColor(n.col,n.row,n.originalColor,this.blockSize,!1)}this._needsTextureUpdate=!0}},a.eliminateConnectedBlock=function(e){for(var t,i=[],o=[],n=r(e);!(t=n()).done;){var a=t.value;this.sandMap.clearGridBlockColor(a.col,a.row,this.blockSize,!1);var s=this.coordToString(a.row,a.col),l=this._sandInfoMap.get(s);l&&-1===i.indexOf(l.info.shapeId)&&(i.push(l.info.shapeId),o.push(l.info.shapeType)),this._sandInfoMap.delete(s)}M.addEliminateScore(o,e[0].originalColor),this._needsTextureUpdate=!0},a.parseCoord=function(e){var t=e.split(",").map(Number);return[t[0],t[1]]},a.coordToString=function(e,t){return e+","+t},a.canMoveTo=function(e,t,i,o){if(e<0||e>=i||t<0||t>=o)return!1;var n=this.sandMap.getGridBlockColor(t,e,this.blockSize);return!n||0===n.r&&0===n.g&&0===n.b},a.getFallDistance=function(e,t,i,o){for(var n=0,r=e+1;r<i&&this.canMoveTo(r,t,i,o);r++)n++;return n},a.movePixel=function(e,t,i,o,n,r){var a=this.coordToString(e,t),s=this._sandInfoMap.get(a);if(this.sandMap.clearGridBlockColor(t,e,this.blockSize,!1),this._sandInfoMap.delete(a),this.sandMap.setGridBlockColor(o,i,n,this.blockSize,!1),s){var l=this.coordToString(i,o);this._sandInfoMap.set(l,s)}r[i][o]=!0,this._activeSandCoords.add(this.coordToString(i,o)),this._needsTextureUpdate=!0},a.getActivePixels=function(){for(var e=[],t=0;t<this._gridRows;t++)for(var i=0;i<this._gridCols;i++){var o=this.sandMap.getGridBlockColor(i,t,this.blockSize);!o||0===o.r&&0===o.g&&0===o.b||e.push({row:t,col:i})}return e},a.checkGameOver=function(){if(!this._isGameOver&&!this._sandFlowingTimer&&!this._isFlashing){v("checkGameOver");for(var e=!1,t=[],i=0;i<this._gridRows;i++){t[i]=[];for(var o=0;o<this._gridCols;o++){var n=this.sandMap.getGridBlockColor(o,i,this.blockSize);t[i][o]=n.r+","+n.g+","+n.b+","+n.a,!e&&i<this._topLineRow&&n&&(0!==n.r||0!==n.g||0!==n.b)&&(v("游戏结束！沙子堆积超过topLine row:",i,this._topLineRow),e=!0)}}if(e)d.localStorage.removeItem("sandMapColor"),d.localStorage.removeItem("sandMapInfo"),this.gameOver();else{d.localStorage.setItem("sandMapColor",W.stringify(t));var r=Array.from(this._sandInfoMap.entries()).map((function(e){var t=e[0],i=e[1];return[t,[i.info.colorIndex,i.info.shapeType,i.info.shapeId]]}));d.localStorage.setItem("sandMapInfo",W.stringify(r)),d.localStorage.setItem("currentScore",this.currentScoreLabel.number.toString())}}},a.gameOver=function(){var e=this;this._isGameOver||(this._isGameOver=!0,_.pauseTimer(this._mainTimer),y.show(),M.getScore()>k.highestScore&&(this.highestScoreLabel.number=M.getScore(),(new U).start(M.getScore()).catch((function(t){e.highestScoreLabel.number=k.highestScore,V.show(t),S("ReqUpdateHighestScore fail")}))),M.resetCombo())},a.clearGameLocalCache=function(){d.localStorage.removeItem("currentScore"),d.localStorage.removeItem("sandMapColor"),d.localStorage.removeItem("sandMapInfo")},a.resetGame=function(){this.clearGameLocalCache(),M.resetScore(),this.currentScoreLabel.number=0,this.currentScoreProgress.progress=0},a.restartGame=function(){v("重新开始游戏"),this._isGameOver=!1,this._sandFlowingTimer=!1,this._isFlashing=!1,this._stableTimer=0,this._flashTimer=0,this._flashingBlocks=[],this._shapeInfo=[],this._activeSandCoords.clear(),this._sandInfoMap.clear(),this._shapeId=0,this.sandMap.clear(!0),this.initShape(),_.resumeTimer(this._mainTimer)},a.updatePerformance=function(e){if(this._frameCount++,this._lastFPSUpdate+=e,this._lastFPSUpdate>=1){var t=this._frameCount/this._lastFPSUpdate;v("FPS: "+t.toFixed(1)),this._frameCount=0,this._lastFPSUpdate=0}},a.onLevelChanged=function(){this.initUserInfo(),this.initConfig(),this.initScoreSystem()},a.initConfig=function(){var e=this,t=T.getConfig("level");t.slice(0,k.level).forEach((function(t){var i,o=null==(i=t.unlock_color)?void 0:i.split(";");null==o||o.forEach((function(t){e._unlockColors.push((new f).fromHEX(t))}))})),this._levelConfig=t.find((function(e){return e.level===k.level}))},a.initUserInfo=function(){this.highestScoreLabel.number=k.highestScore,this.diamondsLabel.number=k.diamonds},a.initProps=function(){var e=T.getConfig("award");u("ad/diamonds",this.node).getComponent(L).number=e.ad;var t=T.getConfig("item");u("bomb/diamonds",this.node).getComponent(L).number=t.find((function(e){return 1===e.id})).consume,u("refresh/diamonds",this.node).getComponent(L).number=t.find((function(e){return 3===e.id})).consume},a.initScoreSystem=function(){var e=d.localStorage.getItem("currentScore");this.currentScoreLabel.number=e?parseInt(e):0,this.currentScoreProgress.progress=(this.currentScoreLabel.number-this._levelConfig.score_start)/(this._levelConfig.score_end-this._levelConfig.score_start),this.levelStartScoreLabel.string=this._levelConfig.score_start/1e3+"K",this.levelEndScoreLabel.string=this._levelConfig.score_end/1e3+"K",M.initScoreConfig(),M.removeScoreListener(this.onScoreUpdated.bind(this)),M.addScoreListener(this.onScoreUpdated.bind(this))},a.onScoreUpdated=function(e){v("onScoreUpdated"),"combo"==e.scoreType?this.generateComboEffect(M.getComboCount(),e.color,e.pos):(this.generateAddScoreEffect(e.points,e.color,e.pos),this.checkLevelUp()),this.currentScoreLabel.number=M.getScore(),this.currentScoreProgress.progress=(this.currentScoreLabel.number-this._levelConfig.score_start)/(this._levelConfig.score_end-this._levelConfig.score_start)},a.checkUploadHighestScore=function(){M.getScore()>k.highestScore&&(this.highestScoreLabel.number=M.getScore(),(new U).start(M.getScore()).catch((function(e){})))},a.checkLevelUp=function(){var e=this;if(M.getScore()>=this._levelConfig.score_end){if(this._isLevelUp)return void S("checkLevelUp: is level up");x.show("Requesting level up..."),this._isLevelUp=!0,this.checkUploadHighestScore(),(new q).start().then((function(){x.hide(),E.Ins().playOneShot("audio/levelup"),H.show(),e.onLevelChanged(),e._isLevelUp=!1})).catch((function(t){x.hide(),V.show(t).onClick((function(e){e&&h.loadScene("HomeScene")})),e._isLevelUp=!1,S("ReqLevelUp fail")}))}},a.generateAddScoreEffect=function(e,t,i){void 0===i&&(i=new p(0,0,0));var o=this.child("AddScoreEffect");g.stopAllByTarget(o),o.active=!0,o.setPosition(0,300),t&&(o.getComponent(O).wordColor=t),o.getComponent(O).word="+"+e,m(o).by(.5,{position:new p(0,100,0)}).call((function(){o.active=!1})).start()},a.generateComboEffect=function(e,t,i){void 0===i&&(i=new p(0,0,0));var o=this.child("ComboEffect");g.stopAllByTarget(o),o.active=!0,o.setPosition(0,0),t&&(o.getComponent(O).wordColor=t),o.getComponent(O).word="Comb x"+e,m(o).by(.5,{position:new p(0,100,0)}).call((function(){o.active=!1})).start()},a.onClickRefreshShape=function(){var e=this;this.onClickEvent(!1);var t=u("refresh/diamonds",this.node).getComponent(L).number;k.diamonds<t?F.show("Diamonds not enough"):(new P).start(-t).then((function(){e.initShape()})).catch((function(e){V.show(e)}))},a.onClickPause=function(){this.onClickEvent(),G.show()},a.onClickWatchAd=function(){this.onClickEvent(),A.show()},a.onClickShop=function(){this.onClickEvent()},a.onClickBomb=function(){this.onClickEvent(!1),F.show("Not yet unlocked")},a.onDestroy=function(){v("GameScene:onDestroy"),_.stopTimer(this._mainTimer),M.clear(),this.removeAllEvent(),t.Ins=null},a.removeAllEvent=function(){N.off("UserData:Changed"),N.off("UIResurrection:Success"),N.off("UserData:Level:Changed"),N.off("UIResurrection:Failed"),N.off("UIPause:ResetGame")},t}(B)).Ins=null,le=t((se=be).prototype,"sandMap",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(se.prototype,"topLine",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(se.prototype,"blockSize",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),de=t(se.prototype,"diamondsLabel",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(se.prototype,"highestScoreLabel",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(se.prototype,"currentScoreLabel",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(se.prototype,"currentScoreProgress",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(se.prototype,"levelStartScoreLabel",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(se.prototype,"levelEndScoreLabel",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(se.prototype,"shape1",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(se.prototype,"shape2",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(se.prototype,"shape3",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=se))||ae));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameSceneBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIModule.ts","./UserPreferences.ts","./Device.ts","./AudioMgr.ts"],(function(e){var n,t,o,i,r,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){o=e.UIModule},function(e){i=e.UserPreferences},function(e){r=e.Device},function(e){c=e.AudioMgr}],execute:function(){t._RF.push({},"a18fapoRfBMaY4Z7Rm3rBQz","GameSceneBase",void 0);e("GameSceneBase",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.onClickEvent=function(e){void 0===e&&(e=!0),i.vibrate&&r.VibrateShort(),e&&c.Ins().playOneShot("audio/btn")},t}(o));t._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Log.ts"],(function(e){var t,n,a,i,o;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){a=e.debug,i=e.error,o=e.warn}],execute:function(){n._RF.push({},"70b03CfR+RMxoVcgcPsVL2Q","GlobalEvent",void 0);var r=e("GlobalEvent",function(){function e(){}return e.setDebugMode=function(e){this.debugMode=e},e.on=function(e,t,n){if(!e||!t)return a("GlobalEvent on name or callback is null"),0;this.eventMap[e]||(this.eventMap[e]=[]);var i=++this.eventId,o=this.eventMap[e].length;return this.eventMap[e].push({id:i,name:e,callback:t,target:n,once:!1}),this.eventIdMap[i]={name:e,index:o},this.debugMode&&a("GlobalEvent on name=> "+e+" eventId=> "+i),i},e.once=function(e,t,n){if(!e||!t)return a("GlobalEvent on name or callback is null"),0;this.eventMap[e]||(this.eventMap[e]=[]);var i=this.eventId++,o=this.eventMap[e].length;return this.eventMap[e].push({id:i,name:e,callback:t,target:n,once:!0}),this.eventIdMap[i]={name:e,index:o},this.debugMode&&a("GlobalEvent once name=> "+e+" eventId=> "+i),i},e.emit=function(e){var n=this;if(e&&this.eventMap[e]&&0!=this.eventMap[e].length){for(var o=[],r=arguments.length,v=new Array(r>1?r-1:0),s=1;s<r;s++)v[s-1]=arguments[s];for(var l,h=t(this.eventMap[e]);!(l=h()).done;){var u=l.value;try{var c;(c=u.callback).call.apply(c,[u.target].concat(v)),u.once&&o.push(u.id)}catch(e){i("GlobalEvent emit error=> "+e)}}o.forEach((function(e){return n.offId(e)})),this.debugMode&&a("GlobalEvent emit name=> "+e+" args=> "+v)}else this.debugMode&&a("GlobalEvent emit name is null or eventMap["+e+"] is null")},e.off=function(e){var t=this;e?(this.eventMap[e]&&this.eventMap[e].length>0&&this.eventMap[e].forEach((function(e){delete t.eventIdMap[e.id]})),this.eventMap[e]=[],this.debugMode&&a("GlobalEvent off name=> "+e)):o("GlobalEvent off name is null")},e.offId=function(e){var t=this.eventIdMap[e];if(t){var n=t.name,a=t.index;this.eventMap[n].splice(a,1),delete this.eventIdMap[e];for(var i=a;i<this.eventMap[n].length;i++)this.eventIdMap[this.eventMap[n][i].id].index=i;this.debugMode&&o("GlobalEvent offId eventId=> "+e+" name=> "+n)}},e.offTarget=function(e){var t=this;if(e){var n=0;Object.keys(this.eventMap).forEach((function(a){for(var i=t.eventMap[a],o=i.length-1;o>=0;o--)i[o].target==e&&(delete t.eventIdMap[i[o].id],i.splice(o,1),n++);if(n>0)for(var r=0;r<i.length;r++)t.eventIdMap[i[r].id].index=r})),this.debugMode&&n>0&&o("GlobalEvent offTarget target=> "+e+" removedCount=> "+n)}},e.clear=function(){this.eventMap={},this.eventIdMap={},this.eventId=0,this.debugMode&&a("GlobalEvent clear")},e.hasListeners=function(e){return this.getListenersCount(e)>0},e.getListenersCount=function(e){return this.eventMap[e]?this.eventMap[e].length:0},e.getEventNames=function(){return Object.keys(this.eventMap)},e.getTargetEventCount=function(e){var t=this;if(!e)return 0;var n=0;return Object.keys(this.eventMap).forEach((function(a){n+=t.eventMap[a].filter((function(t){return t.target==e})).length})),n},e}());r.eventMap={},r.eventIdMap={},r.eventId=0,r.debugMode=!1,n._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalTimer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Timer.ts"],(function(t){var i,e,r;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy},function(t){r=t.Timer}],execute:function(){e._RF.push({},"3c29axwH1tFYYek/gM+eA84","GlobalTimer",void 0),t("GlobalTimer",function(){function t(){}return t.initTimer=function(){this._timer=new r(16)},t.startTimer=function(t,i,e){return void 0===e&&(e=0),this._timer.start(t,i,e)},t.stopTimer=function(t){this._timer.stop(t)},t.pauseTimer=function(t){this._timer.pause(t)},t.resumeTimer=function(t){this._timer.resume(t)},t.clearTimer=function(){this._timer.clear()},t.update=function(t){this._timer.update(t)},i(t,null,[{key:"timer",get:function(){return null==this._timer&&this.initTimer(),this._timer}}]),t}())._timer=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/GM.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIModule.ts","./UserData.ts","./ReqUpdateHighestScore.ts","./UIAlert.ts","./ReqLevelUp.ts","./ReqAddDiamond.ts","./Log.ts","./Device.ts","./UserPreferences.ts"],(function(e){var t,n,i,r,o,a,l,c,s,u,d,h,f,g,p,b,v,m,y,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Node,c=e.EditBox,s=e.Label,u=e.UITransform,d=e.v3},function(e){h=e.UIModule},function(e){f=e.UserData},function(e){g=e.ReqUpdateHighestScore},function(e){p=e.UIAlert},function(e){b=e.ReqLevelUp},function(e){v=e.ReqAddDiamond},function(e){m=e.debug},function(e){y=e.Device},function(e){S=e.UserPreferences}],execute:function(){var L,U,w,E,I,D,z,B,C,R,M,q,x,A,T,k,H,P,_;o._RF.push({},"95ba5xh4XJEPoFfqSUceCYa","GM",void 0);var G=a.ccclass,O=a.property;e("GM",(L=G("GM"),U=O(l),w=O(l),E=O(c),I=O(c),D=O(c),z=O(s),B=O(s),C=O(s),L((q=t((M=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"layer",q,r(t)),i(t,"gmBtn",x,r(t)),i(t,"diamondEditBox",A,r(t)),i(t,"levelEdit",T,r(t)),i(t,"highestScoreEdit",k,r(t)),i(t,"diamondsLabel",H,r(t)),i(t,"levelLabel",P,r(t)),i(t,"highestScoreLabel",_,r(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){var e=this;this.gmBtn.on(l.EventType.TOUCH_MOVE,(function(t){var n=t.getUILocation(),i=e.node.getComponent(u).convertToNodeSpaceAR(d(n.x,n.y,0));e.gmBtn.setPosition(i)})),this.gmBtn.on(l.EventType.TOUCH_END,(function(e){m("touch end"),e.propagationImmediateStopped=!0}))},o.onClickOpenLayer=function(){this.layer.active=!0,this.updateInfo(),S.vibrate&&y.VibrateShort()},o.onClickCloseLayer=function(){this.layer.active=!1},o.updateInfo=function(){this.diamondsLabel.string=f.diamonds.toString(),this.levelLabel.string=f.level.toString(),this.highestScoreLabel.string=f.highestScore.toString()},o.onClickAddDiamond=function(){var e=this;(new v).start(parseInt(this.diamondEditBox.string)).then((function(){e.diamondsLabel.string=f.diamonds.toString()})).catch((function(e){p.show(e)}))},o.onClickSetLevel=function(){var e=this;(new b).start(parseInt(this.levelEdit.string)).then((function(){e.levelLabel.string=f.level.toString()})).catch((function(e){p.show(e)}))},o.onClickSetHighestScore=function(){var e=this;(new g).start(parseInt(this.highestScoreEdit.string)).then((function(){e.highestScoreLabel.string=f.highestScore.toString()})).catch((function(e){p.show(e)}))},t}(h)).prototype,"layer",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(M.prototype,"gmBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(M.prototype,"diamondEditBox",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(M.prototype,"levelEdit",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(M.prototype,"highestScoreEdit",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(M.prototype,"diamondsLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(M.prototype,"levelLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(M.prototype,"highestScoreLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=M))||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/gx_http.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){var o;t("_gx_http",void 0),i._RF.push({},"acd58zWDIxMDqej9JIcsT9U","gx_http",void 0),(o||(o=t("_gx_http",{}))).config=function(t){this.timeout=5e3,this.responseType=void 0,this.body=void 0,this.header=void 0,this.onOpen=void 0,this.onError=void 0,this.onTimeout=void 0,Object.assign(this,t)},i._RF.pop()}}}));

System.register("chunks:///_virtual/Handler.ts",["cc"],(function(n){var c;return{setters:[function(n){c=n.cclegacy}],execute:function(){n({appInit:function(n){},appReady:function(n){},ccInit:function(n){},ccReady:function(n){}}),c._RF.push({},"4f914cabTVJSJ8+LQIQhHaC","Handler",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/header.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"1f8c367lLdBJaqyxrwXnQPj","header",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/header2.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"34edarRbCVPdLdrnuobRK/W","header",void 0);var r=t("ProtocolType",function(t){return t[t.String=0]="String",t[t.Protobuf=1]="Protobuf",t}({}));t("DefaultStringProtocol",function(){function t(){}var n=t.prototype;return n.pack=function(t,n,r,e){return r},n.unpack=function(t,n){return n},n.unpackBase=function(t){return t},n.setHeartBeat=function(t,n,r){},n.getHeartBeatCmd=function(){return 1},n.getHeartBeatCmdName=function(){return"Ping"},n.getHeartBeatData=function(){return JSON.stringify({data:"ping"})},n.getProtocolType=function(){return r.String},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/header3.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"54af2NtEhtPZqCNItDN7uLt","header",void 0);e("THttpResult",function(e){return e.Succeed="succeed",e.Fail="fail",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/header4.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){e("enableDebugMode",(function(n){n?(e("GX_DEBUG",!0),console.warn("enableDebugMode:true")):e("GX_DEBUG",!1)})),n._RF.push({},"c7dd7HxqL1IVbxOWQijM5oW","header",void 0);e("GX_DEBUG",!1);n._RF.pop()}}}));

System.register("chunks:///_virtual/HomeScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserData.ts","./UISetting.ts","./ConfigLoader.ts","./PixelSpriteNum.ts","./GlobalEvent.ts","./GameSceneBase.ts","./UIRank.ts","./PixelSpriteWord.ts"],(function(e){var t,n,i,r,o,l,a,c,u,s,f,b,p,h,g,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Button,c=e.director},function(e){u=e.UserData},function(e){s=e.UISetting},function(e){f=e.ConfigLoader},function(e){b=e.PixelSpriteNum},function(e){p=e.GlobalEvent},function(e){h=e.GameSceneBase},function(e){g=e.UIRank},function(e){S=e.PixelSpriteWord}],execute:function(){var m,v,d,y,w,C,D,N,U,k,x,H,L,P,z;o._RF.push({},"83f28NHB0FLa4Hu+u+ZjfNX","HomeScene",void 0);var I=l.ccclass,B=l.property;e("HomeScene",(m=I("HomeScene"),v=B(a),d=B(a),y=B(b),w=B(b),C=B(S),D=B(S),m((k=t((U=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(t,"btnPlay",k,r(t)),i(t,"btnSetting",x,r(t)),i(t,"labelHighestScore",H,r(t)),i(t,"labelDiamonds",L,r(t)),i(t,"labelNextLevelScore",P,r(t)),i(t,"labelNextLevel",z,r(t)),t}n(t,e);var o=t.prototype;return o.onClickPlay=function(){this.onClickEvent(!1),c.loadScene("GameScene")},o.onClickSetting=function(){this.onClickEvent(),s.show()},o.onClickRank=function(){this.onClickEvent(),g.show()},o.start=function(){var e=this;this.initUI(),p.on("UserData:Changed",(function(){e.initUI()}))},o.initUI=function(){this.labelHighestScore.showNumber(u.highestScore),this.labelDiamonds.showNumber(u.diamonds);var e=f.getConfig("level").find((function(e){return e.level===u.level+1}));this.labelNextLevelScore.word=e?e.score_start/1e3+"K":"MAX"},o.onDestroy=function(){p.off("UserData:Changed")},t}(h)).prototype,"btnPlay",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(U.prototype,"btnSetting",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(U.prototype,"labelHighestScore",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(U.prototype,"labelDiamonds",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(U.prototype,"labelNextLevelScore",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(U.prototype,"labelNextLevel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=U))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/HttpManager.ts",["cc","./header3.ts","./HttpRequest.ts"],(function(n){var t,e,o;return{setters:[function(n){t=n.cclegacy},function(n){e=n.THttpResult},function(n){o=n.HttpRequest}],execute:function(){t._RF.push({},"2da67L/nI1O2Z6JxlxPu405","HttpManager",void 0);n("HttpManager",function(){function n(){}return n.post=function(n,t,e,o,u,s){return void 0===e&&(e="json"),void 0===s&&(s=10),this._send("POST",n,t,e,o,u,s)},n.get=function(n,t,e,o,u,s){return void 0===e&&(e="json"),void 0===s&&(s=10),this._send("GET",n,t,e,o,u,s)},n.put=function(n,t,e,o,u,s){return void 0===e&&(e="json"),void 0===s&&(s=10),this._send("PUT",n,t,e,o,u,s)},n.head=function(n,t,e,o,u,s){return void 0===e&&(e="json"),void 0===s&&(s=10),this._send("HEAD",n,t,e,o,u,s)},n._send=function(n,t,u,s,i,r,c){void 0===s&&(s="json");var d=new o;return d.setCallback((function(n,t){switch(n){case e.Succeed:null==i||null==i.onCompete||i.onCompete(t);break;case e.Fail:null==i||null==i.onError||i.onError(t)}})),d.method=n,d.timeout=c,d.responseType=s,null==i||null==i.onOpen||i.onOpen(),d.send(t,u,r),d},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/HttpRequest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./header3.ts","./Log.ts"],(function(t){var e,s,r,n,o,i;return{setters:[function(t){e=t.createClass},function(t){s=t.cclegacy,r=t.sys},function(t){n=t.THttpResult},function(t){o=t.debug,i=t.warn}],execute:function(){s._RF.push({},"cf153C8ELFM1YxgR1FqyGIK","HttpRequest",void 0);t("HttpRequest",function(){function t(){this.method=void 0,this.timeout=void 0,this.responseType=void 0,this.message=void 0,this.data=void 0,this._xhr=null,this._callback=null,this._xhr=new XMLHttpRequest}var s=t.prototype;return s.setCallback=function(t){this._callback=t},s.send=function(t,e,s){var n=this._xhr;if(n.timeout=1e3*this.timeout,n.responseType=this.responseType,n.onabort=this._onAbort.bind(this),n.onerror=this._onError.bind(this),n.onload=this._onLoad.bind(this),n.ontimeout=this._onTimeout.bind(this),n.onreadystatechange=function(){o("onreadystatechange",n.readyState,n.status,n.statusText,n.responseURL)},n.open(this.method,encodeURI(t)),s)for(var i=0;i<s.length;i+=2)n.setRequestHeader(s[i],s[i+1]),o("setRequestHeader: "+s[i]+" "+s[i+1]);r.isNative&&n.setRequestHeader("Accept-Encoding","gzip,deflate"),n.send(e)},s.abort=function(t){t&&this._clear(),this._xhr.abort()},s._onAbort=function(){o("onAbort",this._xhr),this.message="request aborted by user",this.handlerError()},s._onError=function(){o("onError",this._xhr),this.message="request error",this.handlerError()},s._onLoad=function(){o("onLoad",this._xhr);var t=this._xhr;void 0!==t.status&&t.status;4==t.readyState&&t.status>=200&&t.status<400?this.onCompete():(this.message="status:"+t.status+" statusText:"+t.statusText+" responseURL:"+t.responseURL,this.handlerError())},s._onTimeout=function(){o("onTimeout",this._xhr),this.message="request timeout",this.handlerError()},s.handlerError=function(){var t;null==(t=this._callback)||t.call(this,n.Fail,this),this._clear()},s.onCompete=function(){try{var t;"json"==this.responseType||"arraybuffer"==this.responseType?this.data=this._xhr.response:this.data=this._xhr.responseText,o("this.data",this.data),null==(t=this._callback)||t.call(this,n.Succeed,this),this._clear()}catch(t){i("http响应数据解析错误，HttpResponseType("+this.responseType+")\n    url: "+this._xhr.responseURL+"\n    error: "+t),this.handlerError()}},s._clear=function(){this._xhr.onabort=null,this._xhr.onerror=null,this._xhr.onload=null,this._xhr.ontimeout=null,this._callback=null},e(t,[{key:"status",get:function(){var t;return null==(t=this._xhr)?void 0:t.status}},{key:"headers",get:function(){var t;return null==(t=this._xhr)?void 0:t.getAllResponseHeaders()}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/HttpTask.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){t("HttpTaskProperty",(function(t,i,n){return function(e){e._taskConfig={name:t,url:i,method:n}}})),i._RF.push({},"765dcYH8K5AXofqHJVKORps","HttpTask",void 0);t("HttpTask",(function(){this.url=void 0,this.name=void 0,this.reqData=void 0,this.method=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/IModule.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"cedfc06LatLE6Fc9XpG3TXy","IModule",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/LinkedList.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy}],execute:function(){function n(t,e){return t===e}i._RF.push({},"cd6d9qCI8NHfI34eKdJZCuG","LinkedList",void 0);var s=t("LinkedNode",(function(t){this.element=void 0,this.next=void 0,this.element=t,this.next=void 0})),r=t("DoublyNode",function(t){function i(e){var i;return(i=t.call(this,e)||this).prev=void 0,i.next=void 0,i.prev=void 0,i}return e(i,t),i}(s)),h=t("LinkedList",function(){function t(t){this._equalsFn=void 0,this._count=void 0,this._head=void 0,this._equalsFn=t||n,this._count=0,this._head=void 0}var e=t.prototype;return e.push=function(t){var e,i=new s(t);if(void 0===this._head)this._head=i;else{for(e=this._head;void 0!==e.next;)e=e.next;e.next=i}this._count++},e.insert=function(t,e){if(e>=0&&e<=this._count){var i=new s(t);if(0===e){var n=this._head;i.next=n,this._head=i}else{var r=this.getElementAt(e-1),h=r.next;i.next=h,r.next=i}return this._count++,!0}return!1},e.getElementAt=function(t){if(t>=0&&t<=this._count){for(var e=this._head,i=0;i<t&&void 0!==e;i++)e=e.next;return e}},e.remove=function(t){return this.removeAt(this.indexOf(t))},e.removeAt=function(t){if(t>=0&&t<this._count){var e=this._head;if(0===t)this._head=e.next;else{var i=this.getElementAt(t-1);e=i.next,i.next=e.next}return this._count--,e.next=void 0,e.element}},e.indexOf=function(t){for(var e=this._head,i=0;i<this._count&&void 0!==e;i++){if(this._equalsFn(t,e.element))return i;e=e.next}return-1},e.clear=function(){this._head=void 0,this._count=0},e.getHead=function(){return this._head},e.isEmpty=function(){return 0===this.size()},e.size=function(){return this._count},e.toString=function(){if(void 0===this._head)return"";for(var t=""+this._head.element,e=this._head.next,i=0;i<this.size()&&void 0!==e;i++)t=t+","+e.element,e=e.next;return t},t}());t("DoublyLinkedList",function(t){function i(e){var i;return(i=t.call(this,e)||this)._head=void 0,i._tail=void 0,i._tail=void 0,i}e(i,t);var n=i.prototype;return n.push=function(t){this.insert(t,this._count)},n.insert=function(t,e){if(e>=0&&e<=this._count){var i=new r(t),n=this._head;if(0===e)void 0===this._head?(this._head=i,this._tail=i):(i.next=n,n.prev=i,this._head=i);else if(e===this._count)(n=this._tail).next=i,i.prev=n,this._tail=i;else{var s=this.getElementAt(e-1);n=s.next,i.next=n,s.next=i,n.prev=i,i.prev=s}return this._count++,!0}return!1},n.removeAt=function(t){if(t>=0&&t<this._count){var e=this._head;if(0===t)this._head=e.next,1===this._count?this._tail=void 0:this._head.prev=void 0;else if(t===this._count-1)e=this._tail,this._tail=e.prev,this._tail.next=void 0;else{var i=(e=this.getElementAt(t)).prev;i.next=e.next,e.next.prev=i}return this._count--,e.next=void 0,e.prev=void 0,e.element}return null},n.getElementAt=function(t){if(t>=0&&t<=this._count){if(t>.5*this._count){for(var e=this._tail,i=this._count-1;i>t&&void 0!==e;i--)e=e.prev;return e}for(var n=this._head,s=0;s<t&&void 0!==n;s++)n=n.next;return n}},n.getHead=function(){return this._head},n.getTail=function(){return this._tail},n.clear=function(){this._head=void 0,this._tail=void 0,this._count=0},i}(h));i._RF.pop()}}}));

System.register("chunks:///_virtual/Log.ts",["cc","./header4.ts"],(function(o){var r,c,n;return{setters:[function(o){r=o.cclegacy,c=o.sys},function(o){n=o.GX_DEBUG}],execute:function(){o({debug:function(){for(var o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];var l,a;c.isBrowser&&!c.isMobile?n&&(l=console).log.apply(l,["%c[GX] => ","color: #ff0000"].concat(r)):n&&(a=console).log.apply(a,["[GX] => "].concat(r))},error:function(){for(var o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];var l,a;c.isBrowser&&!c.isMobile?n&&(l=console).error.apply(l,["%c[GX] => ","color: #ff0000"].concat(r)):n&&(a=console).error.apply(a,["[GX] => "].concat(r))},info:function(){for(var o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];var l,a;c.isBrowser&&!c.isMobile?n&&(l=console).log.apply(l,["%c[GX] => ","color:rgb(16, 238, 82)"].concat(r)):n&&(a=console).log.apply(a,["[GX] => "].concat(r))},log:function(){for(var o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];var l,a;c.isBrowser&&!c.isMobile?n&&(l=console).log.apply(l,["%c[GX] => ","color: #ff0000"].concat(r)):n&&(a=console).log.apply(a,["[GX] => "].concat(r))},warn:function(){for(var o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];var l,a;c.isBrowser&&!c.isMobile?n&&(l=console).warn.apply(l,["%c[GX] => ","color: #ff0000"].concat(r)):n&&(a=console).warn.apply(a,["[GX] => "].concat(r))}}),r._RF.push({},"7f8c9ZxPiNKYJFDWduSJlHq","Log",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./App.ts","./Handler.ts","./Setting.ts","./Core.ts","./AdManager.ts","./header.ts","./AdMob.ts","./UnityAds.ts","./CocosAdapter.ts","./CocosEntry.ts","./Adapter.ts","./Device.ts","./GlobalEvent.ts","./GlobalTimer.ts","./IModule.ts","./Platform.ts","./Screen.ts","./header4.ts","./AudioMgr.ts","./ModuleBase.ts","./HttpManager.ts","./HttpRequest.ts","./HttpTask.ts","./gx_http.ts","./header3.ts","./ProtobufferHandler.ts","./SocketManager.ts","./SocketNode.ts","./WebSock.ts","./header2.ts","./BinaryHeap.ts","./LinkedList.ts","./Stack.ts","./Log.ts","./MD5.ts","./MathTool.ts","./PlaySpineInEditor.ts","./ResLoader.ts","./SafeJSON.ts","./Singleton.ts","./Time.ts","./Timer.ts","./Utils.ts","./AdUI.ts","./UIModule.ts","./GameScene.ts","./GameSceneBase.ts","./HomeScene.ts","./AdView.ts","./NetTaskBase.ts","./ReqAddDiamond.ts","./ReqLevelUp.ts","./ReqRanList.ts","./ReqRank.ts","./ReqUpdateHighestScore.ts","./ReqUserInfo.ts","./ReqWatchAd.ts","./GM.ts","./UIAlert.ts","./UIController.ts","./UIFlyDiamonds.ts","./UILayers.ts","./UIMgr.ts","./UINetLoading.ts","./UIPopAni.ts","./UITips.ts","./UIWaiting.ts","./UIAd.ts","./UIAdUnavaliable.ts","./UIGameOver.ts","./UIInfo.ts","./UILevelUp.ts","./UIPause.ts","./UIRank.ts","./UIResurrection.ts","./UISetting.ts","./UIShop.ts","./ColorHelper.ts","./ConfigLoader.ts","./PaletteComponent.ts","./PixelSprite.ts","./PixelSpriteExample.ts","./PixelSpriteNum.ts","./PixelSpriteProgress.ts","./PixelSpriteWord.ts","./ScoreManager.ts","./Server.ts","./ShapeHelper.ts","./UserData.ts","./UserPreferences.ts","./Start.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MathTool.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"1a26eRepdlHsJEf387+kx07","MathTool",void 0);n("MathTool",function(){function n(){}return n.rand=function(n,t){return Math.floor(Math.random()*(t-n+1)+n)},n.randRange=function(n,t){return Math.random()*(t-n)+n},n.radian=function(n){return n*Math.PI/180},n.degree=function(n){return 180*n/Math.PI},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/MD5.ts",["cc"],(function(r){var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){r("md5",(function(r){if(null==r)throw new Error("Illegal argument "+r);return t.bytesToHex(t.wordsToBytes(e(r)))})),n._RF.push({},"d938fXtzLNBJbZPTV/L1d4D","MD5",void 0);var t=function(){function r(){}return r.rotl=function(r,n){return r<<n|r>>>32-n},r.rotr=function(r,n){return r<<32-n|r>>>n},r.endianNumber=function(n){return 16711935&r.rotl(n,8)|4278255360&r.rotl(n,24)},r.endianArray=function(n){for(var t=0,e=n.length;t<e;t++)n[t]=r.endianNumber(n[t]);return n},r.randomBytes=function(r){for(var n=[];r>0;r--)n.push(Math.floor(256*Math.random()));return n},r.bytesToWords=function(r){for(var n=[],t=0,e=0,o=r.length;t<o;t++,e+=8)n[e>>>5]|=r[t]<<24-e%32;return n},r.wordsToBytes=function(r){for(var n=[],t=0,e=32*r.length;t<e;t+=8)n.push(r[t>>>5]>>>24-t%32&255);return n},r.bytesToHex=function(r){for(var n=[],t=0,e=r.length;t<e;t++)n.push((r[t]>>>4).toString(16)),n.push((15&r[t]).toString(16));return n.join("")},r.hexToBytes=function(r){for(var n=[],t=0,e=r.length;t<e;t+=2)n.push(parseInt(r.substr(t,2),16));return n},r}();var e=function r(n){for(var e=function(r){for(var n=[],t=0,e=(r=unescape(encodeURIComponent(r))).length;t<e;t++)n.push(255&r.charCodeAt(t));return n}(n),o=t.bytesToWords(e),u=8*e.length,f=o.length,i=1732584193,a=-271733879,c=-1732584194,s=271733878,h=0;h<f;h++)o[h]=16711935&(o[h]<<8|o[h]>>>24)|4278255360&(o[h]<<24|o[h]>>>8);o[u>>>5]|=128<<u%32,o[14+(u+64>>>9<<4)]=u;var l=r._ff,v=r._gg,g=r._hh,d=r._ii;f=o.length;for(var p=0;p<f;p+=16){var y=i,_=a,b=c,m=s;i=l(i,a,c,s,o[p+0],7,-680876936),s=l(s,i,a,c,o[p+1],12,-389564586),c=l(c,s,i,a,o[p+2],17,606105819),a=l(a,c,s,i,o[p+3],22,-1044525330),i=l(i,a,c,s,o[p+4],7,-176418897),s=l(s,i,a,c,o[p+5],12,1200080426),c=l(c,s,i,a,o[p+6],17,-1473231341),a=l(a,c,s,i,o[p+7],22,-45705983),i=l(i,a,c,s,o[p+8],7,1770035416),s=l(s,i,a,c,o[p+9],12,-1958414417),c=l(c,s,i,a,o[p+10],17,-42063),a=l(a,c,s,i,o[p+11],22,-1990404162),i=l(i,a,c,s,o[p+12],7,1804603682),s=l(s,i,a,c,o[p+13],12,-40341101),c=l(c,s,i,a,o[p+14],17,-1502002290),i=v(i,a=l(a,c,s,i,o[p+15],22,1236535329),c,s,o[p+1],5,-165796510),s=v(s,i,a,c,o[p+6],9,-1069501632),c=v(c,s,i,a,o[p+11],14,643717713),a=v(a,c,s,i,o[p+0],20,-373897302),i=v(i,a,c,s,o[p+5],5,-701558691),s=v(s,i,a,c,o[p+10],9,38016083),c=v(c,s,i,a,o[p+15],14,-660478335),a=v(a,c,s,i,o[p+4],20,-405537848),i=v(i,a,c,s,o[p+9],5,568446438),s=v(s,i,a,c,o[p+14],9,-1019803690),c=v(c,s,i,a,o[p+3],14,-187363961),a=v(a,c,s,i,o[p+8],20,1163531501),i=v(i,a,c,s,o[p+13],5,-1444681467),s=v(s,i,a,c,o[p+2],9,-51403784),c=v(c,s,i,a,o[p+7],14,1735328473),i=g(i,a=v(a,c,s,i,o[p+12],20,-1926607734),c,s,o[p+5],4,-378558),s=g(s,i,a,c,o[p+8],11,-2022574463),c=g(c,s,i,a,o[p+11],16,1839030562),a=g(a,c,s,i,o[p+14],23,-35309556),i=g(i,a,c,s,o[p+1],4,-1530992060),s=g(s,i,a,c,o[p+4],11,1272893353),c=g(c,s,i,a,o[p+7],16,-155497632),a=g(a,c,s,i,o[p+10],23,-1094730640),i=g(i,a,c,s,o[p+13],4,681279174),s=g(s,i,a,c,o[p+0],11,-358537222),c=g(c,s,i,a,o[p+3],16,-722521979),a=g(a,c,s,i,o[p+6],23,76029189),i=g(i,a,c,s,o[p+9],4,-640364487),s=g(s,i,a,c,o[p+12],11,-421815835),c=g(c,s,i,a,o[p+15],16,530742520),i=d(i,a=g(a,c,s,i,o[p+2],23,-995338651),c,s,o[p+0],6,-198630844),s=d(s,i,a,c,o[p+7],10,1126891415),c=d(c,s,i,a,o[p+14],15,-1416354905),a=d(a,c,s,i,o[p+5],21,-57434055),i=d(i,a,c,s,o[p+12],6,1700485571),s=d(s,i,a,c,o[p+3],10,-1894986606),c=d(c,s,i,a,o[p+10],15,-1051523),a=d(a,c,s,i,o[p+1],21,-2054922799),i=d(i,a,c,s,o[p+8],6,1873313359),s=d(s,i,a,c,o[p+15],10,-30611744),c=d(c,s,i,a,o[p+6],15,-1560198380),a=d(a,c,s,i,o[p+13],21,1309151649),i=d(i,a,c,s,o[p+4],6,-145523070),s=d(s,i,a,c,o[p+11],10,-1120210379),c=d(c,s,i,a,o[p+2],15,718787259),a=d(a,c,s,i,o[p+9],21,-343485551),i=i+y>>>0,a=a+_>>>0,c=c+b>>>0,s=s+m>>>0}return t.endianArray([i,a,c,s])};e._ff=function(r,n,t,e,o,u,f){var i=r+(n&t|~n&e)+(o>>>0)+f;return(i<<u|i>>>32-u)+n},e._gg=function(r,n,t,e,o,u,f){var i=r+(n&e|t&~e)+(o>>>0)+f;return(i<<u|i>>>32-u)+n},e._hh=function(r,n,t,e,o,u,f){var i=r+(n^t^e)+(o>>>0)+f;return(i<<u|i>>>32-u)+n},e._ii=function(r,n,t,e,o,u,f){var i=r+(t^(n|~e))+(o>>>0)+f;return(i<<u|i>>>32-u)+n},n._RF.pop()}}}));

System.register("chunks:///_virtual/ModuleBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n.Component}],execute:function(){t._RF.push({},"faa2bLpDIpI/YSZktX9Nd/8","ModuleBase",void 0);n("ModuleBase",function(n){function t(){for(var e,t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return(e=n.call.apply(n,[this].concat(o))||this).moduleName="",e}e(t,n);var o=t.prototype;return o.init=function(){},o.onInit=function(){},t}(o));t._RF.pop()}}}));

System.register("chunks:///_virtual/NetTaskBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HttpManager.ts","./HttpTask.ts","./Log.ts","./SafeJSON.ts"],(function(t){var n,e,a,o,s,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){a=t.HttpManager},function(t){o=t.HttpTask},function(t){s=t.debug},function(t){r=t.SafeJSON}],execute:function(){e._RF.push({},"c87f3cdzAZFqou7GLosAEO2","NetTaskBase",void 0);t("NetTaskBase",function(t){function e(){var n;(n=t.call(this)||this)._onSucceed=void 0,n._onFail=void 0,n.reqData=r.stringify({});var e=n.constructor._taskConfig;return e&&(n.name=e.name,n.url=e.url,n.method=e.method),n}n(e,t);var o=e.prototype;return o.start=function(){for(var t=this,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return s(this.name+" start: ",e),new Promise((function(n,e){t._onSucceed=function(t){n(t)},t._onFail=function(t){e(t)};var o={GET:a.get.bind(a),POST:a.post.bind(a),PUT:a.put.bind(a),HEAD:a.head.bind(a)}[t.method];if(!o)throw new Error("callbackHttpMethod is not set");o(t.url,t.reqData,"json",t,["Content-Type","application/json"])}))},o.onCompete=function(t){try{var n;s(this.name+" onCompete data:",t.data),null==(n=this._onSucceed)||n.call(this,t.data)}catch(t){s("NetTaskBase onCompete error,name:"+this.name,t)}},o.onError=function(t){var n,e;s("NetTaskBase onError\n   name:"+this.name+"\n   url:"+this.url+"\n   message:"+t.message+"\n   statusCode:"+t.status),null==(n=this._onFail)||n.call(this,null!=(e=t.message)?e:"")},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/PaletteComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(t){var e,o,r,i,n,a,c,p,s,u,l,h,y,f,d,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,c=t._decorator,p=t.UIRenderer,s=t.Sprite,u=t.Label,l=t.director,h=t.Director,y=t.clamp,f=t.Component,d=t.Color},function(t){_=t.DEV}],execute:function(){var b,R,g,m,L,T,w,B,k,C,D,v,O,P,z,j;a._RF.push({},"8fb6agZfb5A85SLhpXKMDB2","PaletteComponent",void 0);var N=c.ccclass,E=c.property,A=c.executeInEditMode,H=c.requireComponent,S=c.menu;t("PaletteComponent",(b=H(p),R=S("PaletteComponent"),g=E({displayName:_}),m=E({displayName:_}),L=E({displayName:_}),T=E({displayName:_}),w=E({range:[0,1],step:.01,slide:!0,displayName:"🌈 色相"}),B=E({range:[0,1],step:.01,slide:!0,displayName:"🌞 暗度"}),N(k=A(k=b(k=R((D=e((C=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"_colorLB",D,i(e)),r(e,"_colorRB",v,i(e)),r(e,"_colorLT",O,i(e)),r(e,"_colorRT",P,i(e)),r(e,"_hueRatio",z,i(e)),r(e,"_darkness",j,i(e)),e.ur=null,e.hue=[1,1,1],e}o(e,t);var a=e.prototype;return a.onLoad=function(){if(this.ur=this.node.getComponent(p),!(this.ur instanceof s||this.ur instanceof u))return console.warn("Palette只对Sprite和Label有效！"),void this.destroy();this.ur._useVertexOpacity=!0},a.onEnable=function(){this.updateHueRatio(),l.once(h.EVENT_AFTER_DRAW,this.updateColor,this)},a.onDisable=function(){if(this.ur._renderData){var t=this.ur._renderData.chunk.vb,e=this.ur.color;t[5]=t[14]=t[23]=t[32]=e.r/255,t[6]=t[15]=t[24]=t[33]=e.g/255,t[7]=t[16]=t[25]=t[34]=e.b/255,t[8]=t[17]=t[26]=t[35]=e.a/255}},a.updateColor=function(){var t=this.ur._renderData.chunk.vb,e=this._colorLB,o=this._colorRB,r=this._colorLT,i=this._colorRT,n=this._darkness/255,a=this.hue,c=a[0]*n,p=a[1]*n,s=a[2]*n;t[5]=e.r*c,t[6]=e.g*p,t[7]=e.b*s,t[8]=e.a/255,t[14]=o.r*c,t[15]=o.g*p,t[16]=o.b*s,t[17]=o.a/255,t[23]=r.r*c,t[24]=r.g*p,t[25]=r.b*s,t[26]=r.a/255,t[32]=i.r*c,t[33]=i.g*p,t[34]=i.b*s,t[35]=i.a/255},a.updateHueRatio=function(){var t=1/7,e=this._hueRatio;this.hue=e<t?[1,e/t,0]:e<2*t?[2-e/t,1,0]:e<3*t?[0,1,e/t-2]:e<4*t?[0,4-e/t,1]:e<5*t?[e/t-4,0,1]:e<6*t?[1,0,6-e/t]:[1,e/t-6,e/t-6]},n(e,[{key:"colorLB",get:function(){return this._colorLB},set:function(t){this._colorLB=t,this.updateColor()}},{key:"colorRB",get:function(){return this._colorRB},set:function(t){this._colorRB=t,this.updateColor()}},{key:"colorLT",get:function(){return this._colorLT},set:function(t){this._colorLT=t,this.updateColor()}},{key:"colorRT",get:function(){return this._colorRT},set:function(t){this._colorRT=t,this.updateColor()}},{key:"hueRatio",get:function(){return this._hueRatio},set:function(t){this._hueRatio=y(t,0,1),this.updateHueRatio(),this.updateColor()}},{key:"darkness",get:function(){return this._darkness},set:function(t){this._darkness=y(t,0,1),this.updateColor()}}]),e}(f)).prototype,"_colorLB",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(255,255,255,255)}}),e(C.prototype,"colorLB",[g],Object.getOwnPropertyDescriptor(C.prototype,"colorLB"),C.prototype),v=e(C.prototype,"_colorRB",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(255,255,255,255)}}),e(C.prototype,"colorRB",[m],Object.getOwnPropertyDescriptor(C.prototype,"colorRB"),C.prototype),O=e(C.prototype,"_colorLT",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(255,255,255,255)}}),e(C.prototype,"colorLT",[L],Object.getOwnPropertyDescriptor(C.prototype,"colorLT"),C.prototype),P=e(C.prototype,"_colorRT",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(255,255,255,255)}}),e(C.prototype,"colorRT",[T],Object.getOwnPropertyDescriptor(C.prototype,"colorRT"),C.prototype),z=e(C.prototype,"_hueRatio",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(C.prototype,"hueRatio",[w],Object.getOwnPropertyDescriptor(C.prototype,"hueRatio"),C.prototype),j=e(C.prototype,"_darkness",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(C.prototype,"darkness",[B],Object.getOwnPropertyDescriptor(C.prototype,"darkness"),C.prototype),k=C))||k)||k)||k)||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/PixelSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Log.ts"],(function(t){var i,e,a,r,h,s,l,o,n,u,_,x,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){h=t.cclegacy,s=t._decorator,l=t.Sprite,o=t.Size,n=t.Texture2D,u=t.SpriteFrame,_=t.Color,x=t.Component},function(t){p=t.debug}],execute:function(){var f,d,D,v,c,g;h._RF.push({},"85676M0sgZGYbJs2DVK9bvw","PixelSprite",void 0);var w=s.ccclass,y=s.property,m=s.requireComponent;t("PixelSprite",(f=w("PixelSprite"),d=m(l),D=y(o),f(v=d((g=i((c=function(t){function i(){for(var i,e=arguments.length,h=new Array(e),s=0;s<e;s++)h[s]=arguments[s];return i=t.call.apply(t,[this].concat(h))||this,a(i,"size",g,r(i)),i._texture=null,i._sprite=null,i._pixelData=null,i._autoUpdate=!0,i._isDirty=!1,i}e(i,t);var h=i.prototype;return h.setAutoUpdate=function(t){this._autoUpdate=t},h.onLoad=function(){this.reSize()},h.reSize=function(){this._texture=new n,this._texture.reset({width:this.size.width,height:this.size.height,format:n.PixelFormat.RGBA8888});var t=new u;t.texture=this._texture,t.packable=!1,this.node.getComponent(l)||this.node.addComponent(l),this.node.getComponent(l).spriteFrame=t,this._sprite=this.node.getComponent(l),this._pixelData=new Uint8Array(this._texture.width*this._texture.height*4),this.readTexturePixels()},h.updateData=function(t,i,e,a,r){if(void 0===a&&(a=!1),void 0===r&&(r=!1),this._texture&&this._pixelData){var h=t.length,s=t[0].length;if(i+s>this._texture.width||e+h>this._texture.height)p("updateData: 坐标超出纹理范围");else{for(var l=0;l<h;l++)for(var o=0;o<s;o++){var n=o+i,u=4*((l+e)*this._texture.width+n),_=t[l][o];_&&(r||void 0!==_.r&&void 0!==_.g&&void 0!==_.b&&void 0!==_.a)&&(this._pixelData[u]=_.r,this._pixelData[u+1]=_.g,this._pixelData[u+2]=_.b,this._pixelData[u+3]=_.a)}this._isDirty=!0,a&&(this._isDirty=!1,this._texture.uploadData(this._pixelData))}}},h.updateAllData=function(){this._pixelData&&this._texture&&(this._isDirty=!1,this._texture.uploadData(this._pixelData))},h.lateUpdate=function(t){this._autoUpdate&&this._isDirty&&(this.updateAllData(),this._isDirty=!1)},h.readTexturePixels=function(){if(this._texture&&this._pixelData)try{"undefined"!=typeof window&&window.document?this.readTexturePixelsWeb():this.readTexturePixelsNative()}catch(t){p("读取纹理像素数据失败:",t),this._pixelData.fill(255)}},h.readTexturePixelsWeb=function(){if("undefined"!=typeof document){var t=document.createElement("canvas"),i=t.getContext("2d");if(i){if(t.width=this._texture.width,t.height=this._texture.height,this._texture.image){var e=this._texture.image;if(e&&e._nativeData){var a=e._nativeData;if(a&&"object"==typeof a&&"IMG"===a.tagName){i.drawImage(a,0,0);for(var r=i.getImageData(0,0,this._texture.width,this._texture.height).data,h=0;h<r.length;h++)this._pixelData[h]=r[h];return void p("成功从ImageAsset._nativeData读取像素数据")}}if(e&&e.data){var s=e.data;if(s instanceof Uint8Array||s instanceof ArrayBuffer){for(var l=s instanceof ArrayBuffer?new Uint8Array(s):s,o=0;o<Math.min(this._pixelData.length,l.length);o++)this._pixelData[o]=l[o];return void p("成功从ImageAsset.data读取像素数据")}}}this._pixelData.fill(255)}else this._pixelData.fill(255)}else this._pixelData.fill(255)},h.readTexturePixelsNative=function(){p("原生平台暂不支持像素读取，初始化为白色"),this._pixelData.fill(255)},h.getPixelData=function(){return this._pixelData},h.setPixel=function(t,i,e,a){if(void 0===a&&(a=!1),this._texture&&this._pixelData&&!(t<0||t>=this._texture.width||i<0||i>=this._texture.height)){var r=4*(i*this._texture.width+t);this._pixelData[r]=e.r,this._pixelData[r+1]=e.g,this._pixelData[r+2]=e.b,this._pixelData[r+3]=e.a,this._isDirty=!0,a&&(this._isDirty=!1,this._texture.uploadData(this._pixelData))}},h.getPixel=function(t,i){if(!this._texture||!this._pixelData)return null;if(t<0||t>=this._texture.width||i<0||i>=this._texture.height)return null;var e=4*(i*this._texture.width+t);return new _(this._pixelData[e],this._pixelData[e+1],this._pixelData[e+2],this._pixelData[e+3])},h.clear=function(t){void 0===t&&(t=!1),this._pixelData&&(this._pixelData.fill(0),this._isDirty=!0,t&&(this._isDirty=!1,this._texture.uploadData(this._pixelData)))},h.drawPixelGrid=function(t,i,e,a){if(void 0===t&&(t=1),void 0===i&&(i=new _(0,0,0,255)),void 0===e&&(e=null),void 0===a&&(a=!0),this._texture&&this._pixelData){this._pixelData.fill(0);for(var r=this._texture.width,h=this._texture.height,s=Math.floor(r/t),l=Math.floor(h/t),o=0;o<l;o++)for(var n=0;n<s;n++){var u=n*t,x=o*t,p=void 0;p=e&&e[o]&&e[o][n]?e[o][n]:new _(255*Math.random(),255*Math.random(),255*Math.random(),255);for(var f=x+1;f<x+t-1;f++)for(var d=u+1;d<u+t-1;d++)if(d<r&&f<h){var D=4*(f*r+d);this._pixelData[D]=p.r,this._pixelData[D+1]=p.g,this._pixelData[D+2]=p.b,this._pixelData[D+3]=p.a}}this.drawGridLines(t,i),this._isDirty=!0,a&&(this._isDirty=!1,this._texture.uploadData(this._pixelData))}},h.setGridBlockColor=function(t,i,e,a,r){if(void 0===a&&(a=1),void 0===r&&(r=!0),this._texture&&this._pixelData){var h=this._texture.width,s=this._texture.height,l=Math.floor(h/a),o=Math.floor(s/a);if(t<0||t>=l||i<0||i>=o)p("网格坐标超出范围");else{for(var n=t*a,u=i*a,_=u+1;_<u+a-1;_++)for(var x=n+1;x<n+a-1;x++)if(x<h&&_<s){var f=4*(_*h+x);this._pixelData[f]=e.r,this._pixelData[f+1]=e.g,this._pixelData[f+2]=e.b,this._pixelData[f+3]=e.a}this._isDirty=!0,r&&(this._isDirty=!1,this._texture.uploadData(this._pixelData))}}},h.clearGridBlockColor=function(t,i,e,a){if(void 0===e&&(e=1),void 0===a&&(a=!0),this._texture&&this._pixelData){var r=this._texture.width,h=this._texture.height,s=Math.floor(r/e),l=Math.floor(h/e);if(!(t<0||t>=s||i<0||i>=l)){for(var o=t*e,n=i*e,u=n+1;u<n+e-1;u++)for(var _=o+1;_<o+e-1;_++)if(_<r&&u<h){var x=4*(u*r+_);this._pixelData[x]=0,this._pixelData[x+1]=0,this._pixelData[x+2]=0,this._pixelData[x+3]=0}this._isDirty=!0,a&&(this._isDirty=!1,this._texture.uploadData(this._pixelData))}}},h.getGridBlockColor=function(t,i,e){if(void 0===e&&(e=1),!this._texture||!this._pixelData)return null;var a=this._texture.width,r=this._texture.height,h=Math.floor(a/e),s=Math.floor(r/e);if(t<0||t>=h||i<0||i>=s)return null;var l=t*e+Math.floor(e/2),o=i*e+Math.floor(e/2);if(l<a&&o<r){var n=4*(o*a+l);return new _(this._pixelData[n],this._pixelData[n+1],this._pixelData[n+2],this._pixelData[n+3])}return null},h.drawGridLines=function(t,i,e,a,r){var h=e||this._pixelData,s=a||this._texture.width,l=r||this._texture.height;if(h){for(var o=0;o<s;o+=t)for(var n=0;n<l;n++){var u=4*(n*s+o);h[u]=i.r,h[u+1]=i.g,h[u+2]=i.b,h[u+3]=i.a}for(var _=0;_<l;_+=t)for(var x=0;x<s;x++){var p=4*(_*s+x);h[p]=i.r,h[p+1]=i.g,h[p+2]=i.b,h[p+3]=i.a}}},i}(x)).prototype,"size",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new o(0,0)}}),v=c))||v)||v));h._RF.pop()}}}));

System.register("chunks:///_virtual/PixelSpriteExample.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PixelSprite.ts","./ColorHelper.ts"],(function(t){var e,r,i,o,l,a,n,p,h,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,n=t.Color,p=t.Component},function(t){h=t.PixelSprite},function(t){s=t.default}],execute:function(){var c,u,x,f,d,S,v;l._RF.push({},"0f308uDCYFH2Jo0ORTmZUIN","PixelSpriteExample",void 0);var m=a.ccclass,M=a.property;t("PixelSpriteExample",(c=m("PixelSpriteExample"),u=M(h),x=M(n),c((S=e((d=function(t){function e(){for(var e,r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];return e=t.call.apply(t,[this].concat(l))||this,i(e,"pixelSprite",S,o(e)),i(e,"colorArray",v,o(e)),e}r(e,t);var l=e.prototype;return l.start=function(){var t=this;this.scheduleOnce((function(){t.demoPixelGrid()}),1)},l.demoPixelGrid=function(){if(this.pixelSprite){var t=this.pixelSprite._texture.width,e=this.pixelSprite._texture.height;console.log("实际纹理尺寸:",t,"x",e);for(var r=[],i=0;i<e;i++){r[i]=[];for(var o=0;o<t;o++){var l=Math.floor(Math.random()*this.colorArray.length);r[i][o]=this.colorArray[l]}}console.log("开始绘制网格，原始尺寸:",t,"x",e),console.log("网格颜色数组大小:",r.length,"x",r[0].length),this.pixelSprite.drawPixelGrid(10,new n(128,128,255,255),r,!0)}},l.demoGridInteraction=function(){if(this.pixelSprite)for(var t=0;t<5;t++){var e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random()),i=new n(255*Math.random(),255*Math.random(),255*Math.random(),255);this.pixelSprite.setGridBlockColor(e,r,i,10,!0)}},l.demoRandomColors=function(){if(this.pixelSprite){var t=[],e=this.pixelSprite._texture.width,r=this.pixelSprite._texture.height,i=[];s.buildColorArray(this.colorArray,i);for(var o=Math.floor(Math.random()*this.colorArray.length),l=0;l<r;l++){t[l]=[];for(var a=0;a<e;a++)t[l][a]=i[o][Math.floor(Math.random()*i[o].length)]}this.pixelSprite.updateData(t,0,0,!0,!0)}},l.demoPixelOperations=function(){if(this.pixelSprite){this.pixelSprite.setPixel(5,5,new n(255,0,0,255),!0);var t=this.pixelSprite.getPixel(5,5);console.log("获取到的像素颜色:",t)}},l.demoGradient=function(){if(this.pixelSprite){var t=[],e=this.pixelSprite._texture.width,r=this.pixelSprite._texture.height;s.buildColorArray(this.colorArray,[]);for(var i=0;i<r;i++){t[i]=[];for(var o=0;o<e;o++){var l=Math.floor(o/e*255),a=Math.floor(i/r*255);t[i][o]=new n(l,0,a,255)}}this.pixelSprite.updateData(t,0,0,!0,!0)}},l.demoAnimation=function(){var t=this;if(this.pixelSprite){var e=0;this.schedule((function(){for(var r=[],i=t.pixelSprite._texture.width,o=t.pixelSprite._texture.height,l=0;l<o;l++){r[l]=[];for(var a=0;a<i;a++){var p=.5*Math.sin(.3*(l+a+e))+.5,h=Math.floor(255*p),s=Math.floor(255*(1-p)),c=Math.floor(127*Math.sin(.1*e)+128);r[l][a]=new n(h,s,c,255)}}t.pixelSprite.updateData(r,0,0,!0,!0),e++}),.1)}},e}(p)).prototype,"pixelSprite",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(d.prototype,"colorArray",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=d))||f));l._RF.pop()}}}));

System.register("chunks:///_virtual/PixelSpriteNum.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PixelSprite.ts","./env"],(function(t){var e,i,r,o,n,s,a,u,p,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){s=t.cclegacy,a=t._decorator,u=t.Size,p=t.Color},function(t){c=t.PixelSprite},function(t){l=t.DEV}],execute:function(){var h,m,g,b,f,y,d,S,_,z,w,v,k,C;s._RF.push({},"7ff057Mn8BAYo+NN/T2/ErY","PixelSpriteNum",void 0);var N=a.ccclass,P=a.property,D=a.executeInEditMode;t("PixelSpriteNum",(h=N("PixelSpriteNum"),m=D(),g=P({displayName:l}),b=P({displayName:l}),f=P({displayName:l}),y=P({displayName:l}),d=P({displayName:l}),h(S=m((z=e((_=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,r(e,"_blockSize",z,o(e)),r(e,"_number",w,o(e)),r(e,"_digitSpacing",v,o(e)),r(e,"_useCommaFormat",k,o(e)),r(e,"_digitColor",C,o(e)),e.digitTemplates=[[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],[[0,0,1,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,1,1,0]],[[0,1,1,1,0],[1,0,0,0,1],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,1]],[[0,1,1,1,0],[1,0,0,0,1],[0,0,0,0,1],[0,0,1,1,0],[0,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],[[0,0,0,1,0],[0,0,1,1,0],[0,1,0,1,0],[1,0,0,1,0],[1,1,1,1,1],[0,0,0,1,0],[0,0,0,1,0]],[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,0],[0,0,0,0,1],[0,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],[[0,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],[[1,1,1,1,1],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[0,1,0,0,0],[0,1,0,0,0]],[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,1],[0,0,0,0,1],[0,0,0,0,1],[0,1,1,1,0]]],e.commaTemplate=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,1,0],[0,1,0],[1,0,0]],e}i(e,t);var s=e.prototype;return s.onEnable=function(){this.size=new u(25*this.blockSize,7),this.showNumber(this._number)},s.onLoad=function(){t.prototype.onLoad.call(this),this.size=new u(5*this.blockSize,7),this.showNumber(this._number)},s.showNumber=function(t,e){void 0===e&&(e=1);var i=[];this.useCommaFormat?i=this.getFormattedChars(t):i=this.getDigits(t,e);for(var r=0,o=0;o<i.length;o++)"string"==typeof i[o]&&","===i[o]?r+=3:r+=5,o<i.length-1&&(r+=this.digitSpacing);for(var n=[],s=0;s<7;s++){n[s]=[];for(var a=0;a<r;a++)n[s][a]=new p(0,0,0,0)}for(var c=0,l=0;l<i.length;l++){var h=i[l],m=void 0,g=void 0;"string"==typeof h&&","===h?(m=this.commaTemplate,g=3):(m=this.digitTemplates[h],g=5);for(var b=0;b<7;b++)for(var f=0;f<g;f++)1===m[b][f]&&(n[b][c+f]=this.digitColor);c+=g,l<i.length-1&&(c+=this.digitSpacing)}r*this.blockSize==this.size.width&&7*this.blockSize==this.size.height||(this.size=new u(r*this.blockSize,7*this.blockSize),this.reSize()),this.drawPixelGrid(this.blockSize,new p(0,0,0,0),n,!0)},s.getDigits=function(t,e){var i=[],r=Math.abs(t);if(0===r)i.push(0);else for(;r>0;)i.unshift(r%10),r=Math.floor(r/10);for(;i.length<e;)i.unshift(0);return i},s.getFormattedChars=function(t){for(var e=this.getDigits(t,0),i=[],r=0;r<e.length;r++){i.push(e[r]);var o=e.length-1-r;o>0&&o%3==0&&i.push(",")}return i},n(e,[{key:"blockSize",get:function(){return this._blockSize},set:function(t){this._blockSize=t,this.showNumber(this._number)}},{key:"number",get:function(){return this._number},set:function(t){this._number=t,this.showNumber(this._number)}},{key:"digitSpacing",get:function(){return this._digitSpacing},set:function(t){this._digitSpacing=t,this.showNumber(this._number)}},{key:"useCommaFormat",get:function(){return this._useCommaFormat},set:function(t){this._useCommaFormat=t,this.showNumber(this._number)}},{key:"digitColor",get:function(){return this._digitColor},set:function(t){this._digitColor=t,this.showNumber(this._number)}}]),e}(c)).prototype,"_blockSize",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(_.prototype,"blockSize",[g],Object.getOwnPropertyDescriptor(_.prototype,"blockSize"),_.prototype),w=e(_.prototype,"_number",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(_.prototype,"number",[b],Object.getOwnPropertyDescriptor(_.prototype,"number"),_.prototype),v=e(_.prototype,"_digitSpacing",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(_.prototype,"digitSpacing",[f],Object.getOwnPropertyDescriptor(_.prototype,"digitSpacing"),_.prototype),k=e(_.prototype,"_useCommaFormat",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(_.prototype,"useCommaFormat",[y],Object.getOwnPropertyDescriptor(_.prototype,"useCommaFormat"),_.prototype),C=e(_.prototype,"_digitColor",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(255,255,255,255)}}),e(_.prototype,"digitColor",[d],Object.getOwnPropertyDescriptor(_.prototype,"digitColor"),_.prototype),S=_))||S)||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/PixelSpriteProgress.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./PixelSprite.ts"],(function(r){var e,t,o,i,n,s,l,a,p,c,h;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,o=r.initializerDefineProperty,i=r.assertThisInitialized,n=r.createClass},function(r){s=r.cclegacy,l=r._decorator,a=r.Size,p=r.Color},function(r){c=r.DEV},function(r){h=r.PixelSprite}],execute:function(){var u,b,f,d,y,g,_,w,k,z,C,m,P,v,B,S,O,M,x,D;s._RF.push({},"e456ciAxy5PbZnOjNUd7M1B","PixelSpriteProgress",void 0);var j=l.ccclass,N=l.property,A=l.executeInEditMode;r("PixelSpriteProgress",(u=j("PixelSpriteProgress"),b=A(),f=N({displayName:c}),d=N({displayName:c}),y=N({displayName:c}),g=N({displayName:c}),_=N({displayName:c}),w=N({displayName:c}),k=N({displayName:c}),z=N({displayName:c}),u(C=b((P=e((m=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n))||this,o(e,"_blockSize",P,i(e)),o(e,"_widthBlocks",v,i(e)),o(e,"_heightBlocks",B,i(e)),o(e,"_border",S,i(e)),o(e,"_borderColor",O,i(e)),o(e,"_bgColor",M,i(e)),o(e,"_fillColor",x,i(e)),o(e,"_progress",D,i(e)),e}t(e,r);var s=e.prototype;return s.onLoad=function(){r.prototype.onLoad.call(this),this.resizeCanvas(),this.redraw()},s.onEnable=function(){this.redraw()},s.resizeCanvas=function(){var r=this._widthBlocks*this._blockSize,e=this._heightBlocks*this._blockSize;r===this.size.width&&e===this.size.height||(this.size=new a(r,e),this.reSize())},s.resizeAndRedraw=function(){this.resizeCanvas(),this.redraw()},s.redraw=function(){if(this.node&&this._blockSize){for(var r=this._widthBlocks,e=this._heightBlocks,t=Math.min(this._border,Math.floor(Math.min(r,e)/2)),o=[],i=0;i<e;i++){o[i]=[];for(var n=0;n<r;n++)o[i][n]=new p(0,0,0,0)}for(var s=0;s<e;s++)for(var l=0;l<r;l++){t>0&&(s<t||s>=e-t||l<t||l>=r-t)&&(o[s][l]=this._borderColor)}for(var a=t,c=r-t,h=t,u=e-t,b=h;b<u;b++)for(var f=a;f<c;f++)o[b][f]=this._bgColor;for(var d=c-a,y=Math.round(d*this._progress),g=h;g<u;g++)for(var _=a;_<a+y;_++)o[g][_]=this._fillColor;this.drawPixelGrid(this._blockSize,new p(0,0,0,0),o,!0)}},n(e,[{key:"blockSize",get:function(){return this._blockSize},set:function(r){this._blockSize=r,this.redraw()}},{key:"widthBlocks",get:function(){return this._widthBlocks},set:function(r){this._widthBlocks=Math.max(3,Math.floor(r)),this.resizeAndRedraw()}},{key:"heightBlocks",get:function(){return this._heightBlocks},set:function(r){this._heightBlocks=Math.max(3,Math.floor(r)),this.resizeAndRedraw()}},{key:"border",get:function(){return this._border},set:function(r){this._border=Math.max(0,Math.floor(r)),this.redraw()}},{key:"borderColor",get:function(){return this._borderColor},set:function(r){this._borderColor=r,this.redraw()}},{key:"backgroundColorCell",get:function(){return this._bgColor},set:function(r){this._bgColor=r,this.redraw()}},{key:"fillColor",get:function(){return this._fillColor},set:function(r){this._fillColor=r,this.redraw()}},{key:"progress",get:function(){return this._progress},set:function(r){this._progress=Math.max(0,Math.min(1,r)),this.redraw()}}]),e}(h)).prototype,"_blockSize",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),e(m.prototype,"blockSize",[f],Object.getOwnPropertyDescriptor(m.prototype,"blockSize"),m.prototype),v=e(m.prototype,"_widthBlocks",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),e(m.prototype,"widthBlocks",[d],Object.getOwnPropertyDescriptor(m.prototype,"widthBlocks"),m.prototype),B=e(m.prototype,"_heightBlocks",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(m.prototype,"heightBlocks",[y],Object.getOwnPropertyDescriptor(m.prototype,"heightBlocks"),m.prototype),S=e(m.prototype,"_border",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(m.prototype,"border",[g],Object.getOwnPropertyDescriptor(m.prototype,"border"),m.prototype),O=e(m.prototype,"_borderColor",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(30,27,76,255)}}),e(m.prototype,"borderColor",[_],Object.getOwnPropertyDescriptor(m.prototype,"borderColor"),m.prototype),M=e(m.prototype,"_bgColor",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(25,31,82,255)}}),e(m.prototype,"backgroundColorCell",[w],Object.getOwnPropertyDescriptor(m.prototype,"backgroundColorCell"),m.prototype),x=e(m.prototype,"_fillColor",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(255,199,64,255)}}),e(m.prototype,"fillColor",[k],Object.getOwnPropertyDescriptor(m.prototype,"fillColor"),m.prototype),D=e(m.prototype,"_progress",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.6}}),e(m.prototype,"progress",[z],Object.getOwnPropertyDescriptor(m.prototype,"progress"),m.prototype),C=m))||C)||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/PixelSpriteWord.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./PixelSprite.ts","./Log.ts"],(function(t){var e,i,o,r,n,s,l,p,c,a,h,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createClass},function(t){s=t.cclegacy,l=t._decorator,p=t.Size,c=t.Color},function(t){a=t.DEV},function(t){h=t.PixelSprite},function(t){u=t.debug}],execute:function(){var d,w,f,y,g,b,S,z,_,k,x,v;s._RF.push({},"54e48nClpxFSIzT1XXAzuV+","PixelSpriteWord",void 0);var m=l.ccclass,T=l.property,C=l.executeInEditMode;t("PixelSpriteWord",(d=m("PixelSpriteWord"),w=C(),f=T({displayName:a}),y=T({displayName:a}),g=T({displayName:a}),b=T({displayName:a}),d(S=w((_=e((z=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,o(e,"_blockSize",_,r(e)),o(e,"_letterSpacing",k,r(e)),o(e,"_wordColor",x,r(e)),o(e,"_word",v,r(e)),e.letterTemplates={A:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1]],B:[[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,0]],C:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,1],[0,1,1,1,0]],D:[[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,0]],E:[[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]],F:[[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0]],G:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,0],[1,0,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],H:[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1]],I:[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1]],J:[[0,0,0,0,1],[0,0,0,0,1],[0,0,0,0,1],[0,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],K:[[1,0,0,0,1],[1,0,0,1,0],[1,0,1,0,0],[1,1,0,0,0],[1,0,1,0,0],[1,0,0,1,0],[1,0,0,0,1]],L:[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]],M:[[1,0,0,0,1],[1,1,0,1,1],[1,0,1,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1]],N:[[1,0,0,0,1],[1,1,0,0,1],[1,0,1,0,1],[1,0,0,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1]],O:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],P:[[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0]],Q:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,1,0,1],[1,0,0,1,1],[0,1,1,1,1]],R:[[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,0],[1,0,1,0,0],[1,0,0,1,0],[1,0,0,0,1]],S:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,0],[0,1,1,1,0],[0,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],T:[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],U:[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],V:[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,0,1,0],[0,1,0,1,0],[0,0,1,0,0]],W:[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,1,0,1,1],[1,0,0,0,1]],X:[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1]],Y:[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],Z:[[1,1,1,1,1],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0],[1,1,1,1,1]],"&":[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,1,0],[0,1,1,0,0],[1,0,1,0,1],[1,0,0,0,1],[0,1,0,1,0]],0:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],1:[[0,0,1,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,1,1,0]],2:[[0,1,1,1,0],[1,0,0,0,1],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,1]],3:[[0,1,1,1,0],[1,0,0,0,1],[0,0,0,0,1],[0,0,1,1,0],[0,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],4:[[0,0,0,1,0],[0,0,1,1,0],[0,1,0,1,0],[1,0,0,1,0],[1,1,1,1,1],[0,0,0,1,0],[0,0,0,1,0]],5:[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,0],[0,0,0,0,1],[0,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],6:[[0,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],7:[[1,1,1,1,1],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[0,1,0,0,0],[0,1,0,0,0]],8:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],9:[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,1],[0,0,0,0,1],[0,0,0,0,1],[0,1,1,1,0]],"+":[[0,0,0,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,0,0,0]],"-":[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],"?":[[0,1,1,1,0],[1,0,0,0,1],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0]],"!":[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,1,0,0]],":":[[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0]],";":[[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,1,0,0,0]],"(":[[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0]],")":[[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1],[0,0,0,0,1],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0]],"[":[[1,1,1,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,0,0]],"]":[[0,0,1,1,1],[0,0,0,0,1],[0,0,0,0,1],[0,0,0,0,1],[0,0,0,0,1],[0,0,0,0,1],[0,0,1,1,1]],"{":[[0,0,1,1,0],[0,1,0,0,0],[0,1,0,0,0],[1,0,0,0,0],[0,1,0,0,0],[0,1,0,0,0],[0,0,1,1,0]],"}":[[0,1,1,0,0],[0,0,0,1,0],[0,0,0,1,0],[0,0,0,0,1],[0,0,0,1,0],[0,0,0,1,0],[0,1,1,0,0]],"=":[[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0],[1,1,1,1,1],[0,0,0,0,0],[0,0,0,0,0]],"<":[[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0]],">":[[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0]],"/":[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],"\\":[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1],[0,0,0,0,0],[0,0,0,0,0]],"|":[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],"@":[[0,1,1,1,0],[1,0,0,0,1],[1,0,1,1,1],[1,0,1,0,1],[1,0,1,1,1],[1,0,0,0,0],[0,1,1,1,0]],"#":[[0,1,0,1,0],[0,1,0,1,0],[1,1,1,1,1],[0,1,0,1,0],[1,1,1,1,1],[0,1,0,1,0],[0,1,0,1,0]],$:[[0,0,1,0,0],[0,1,1,1,1],[1,0,1,0,0],[0,1,1,1,0],[0,0,1,0,1],[1,1,1,1,0],[0,0,1,0,0]],"%":[[1,1,0,0,1],[1,1,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,1,1],[0,1,0,1,1],[1,0,0,1,1]],"^":[[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],"*":[[0,0,1,0,0],[1,0,1,0,1],[0,1,1,1,0],[1,1,1,1,1],[0,1,1,1,0],[1,0,1,0,1],[0,0,1,0,0]],_:[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1]],a:[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,0],[0,0,0,0,1],[0,1,1,1,1],[1,0,0,0,1],[0,1,1,1,1]],b:[[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,0]],c:[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,1],[0,1,1,1,0]],d:[[0,0,0,0,1],[0,0,0,0,1],[0,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,1]],e:[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,0],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,0],[0,1,1,1,0]],f:[[0,0,1,1,0],[0,1,0,0,0],[0,1,0,0,0],[1,1,1,0,0],[0,1,0,0,0],[0,1,0,0,0],[0,1,0,0,0]],g:[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,1],[1,0,0,0,1],[0,1,1,1,1],[0,0,0,0,1],[0,1,1,1,0]],h:[[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1]],i:[[0,0,1,0,0],[0,0,0,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,1,1,0]],j:[[0,0,0,1,0],[0,0,0,0,0],[0,0,1,1,0],[0,0,0,1,0],[0,0,0,1,0],[0,0,0,1,0],[0,1,1,0,0]],k:[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,1,0],[1,0,1,0,0],[1,1,0,0,0],[1,0,1,0,0],[1,0,0,1,0]],l:[[0,1,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,1,1,1,0]],m:[[0,0,0,0,0],[0,0,0,0,0],[1,1,0,1,0],[1,0,1,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1]],n:[[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1]],o:[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],p:[[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0]],q:[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,1],[1,0,0,0,1],[0,1,1,1,1],[0,0,0,0,1],[0,0,0,0,1]],r:[[0,0,0,0,0],[0,0,0,0,0],[1,0,1,1,0],[1,1,0,0,1],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0]],s:[[0,0,0,0,0],[0,0,0,0,0],[0,1,1,1,1],[1,0,0,0,0],[0,1,1,1,0],[0,0,0,0,1],[1,1,1,1,0]],t:[[0,0,1,0,0],[0,0,1,0,0],[0,1,1,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,1],[0,0,0,1,0]],u:[[0,0,0,0,0],[0,0,0,0,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,1,1],[0,1,1,0,1]],v:[[0,0,0,0,0],[0,0,0,0,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0]],w:[[0,0,0,0,0],[0,0,0,0,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,1,0,1],[1,0,1,0,1],[0,1,0,1,0]],x:[[0,0,0,0,0],[0,0,0,0,0],[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1]],y:[[0,0,0,0,0],[0,0,0,0,0],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,1],[0,0,0,0,1],[0,1,1,1,0]],z:[[0,0,0,0,0],[0,0,0,0,0],[1,1,1,1,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,1]]},e.spaceTemplate=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],e.dotTemplate=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,1,0]],e}i(e,t);var s=e.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this),this.size=new p(25*this.blockSize,7*this.blockSize),this.word&&this.word.length>0&&this.showText(this.word)},s.onEnable=function(){this.word&&this.word.length>0&&this.showText(this.word)},s.showText=function(t){for(var e=this.getDisplayChars(t),i=0,o=0;o<e.length;o++)" "===e[o]||"."===e[o]?i+=3:i+=5,o<e.length-1&&(i+=this.letterSpacing);for(var r=[],n=0;n<7;n++){r[n]=[];for(var s=0;s<i;s++)r[n][s]=new c(0,0,0,0)}for(var l=0,a=0;a<e.length;a++){var h=e[a],d=void 0,w=void 0;if(" "===h)d=this.spaceTemplate,w=3;else if("."===h)d=this.dotTemplate,w=3;else{if(!(d=this.letterTemplates[h])){u("Warning: Letter '"+h+"' not found in templates, skipping");continue}w=5}for(var f=0;f<7;f++)for(var y=0;y<w;y++)1===d[f][y]&&(r[f][l+y]=this.wordColor);l+=w,a<e.length-1&&(l+=this.letterSpacing)}i*this.blockSize==this.size.width&&7*this.blockSize==this.size.height||(this.size=new p(i*this.blockSize,7*this.blockSize),this.reSize()),this.drawPixelGrid(this.blockSize,new c(0,0,0,0),r,!0)},s.getDisplayChars=function(t){return t.split("")},n(e,[{key:"blockSize",get:function(){return this._blockSize},set:function(t){this._blockSize=t,this.showText(this._word)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing=t,this.showText(this._word)}},{key:"wordColor",get:function(){return this._wordColor},set:function(t){this._wordColor=t,this.showText(this._word)}},{key:"word",get:function(){return this._word},set:function(t){this._word=t,this.showText(this._word)}},{key:"string",set:function(t){this._word=t,this.showText(t)}}]),e}(h)).prototype,"_blockSize",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(z.prototype,"blockSize",[f],Object.getOwnPropertyDescriptor(z.prototype,"blockSize"),z.prototype),k=e(z.prototype,"_letterSpacing",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(z.prototype,"letterSpacing",[y],Object.getOwnPropertyDescriptor(z.prototype,"letterSpacing"),z.prototype),x=e(z.prototype,"_wordColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(255,255,255,255)}}),e(z.prototype,"wordColor",[g],Object.getOwnPropertyDescriptor(z.prototype,"wordColor"),z.prototype),v=e(z.prototype,"_word",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(z.prototype,"word",[b],Object.getOwnPropertyDescriptor(z.prototype,"word"),z.prototype),S=z))||S)||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/Platform.ts",["cc"],(function(n){var o;return{setters:[function(n){o=n.cclegacy}],execute:function(){o._RF.push({},"88841EQSoNJqpUfeBerW4yF","Platform",void 0);var r=n("PlatformType",function(n){return n[n.Unknown=0]="Unknown",n[n.Android=1]="Android",n[n.IOS=2]="IOS",n[n.MacOS=3]="MacOS",n[n.HarmonyOS=4]="HarmonyOS",n[n.Browser=5]="Browser",n}({})),i=n("Platform",(function(){}));i.isBrowser=!1,i.isNative=!1,i.isMobile=!1,i.isNativeMobile=!1,i.isAndroid=!1,i.isIOS=!1,i.isMacOS=!1,i.isHarmonyOS=!1,i.platform=r.Unknown,i.deviceId=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/PlaySpineInEditor.ts",["cc"],(function(){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"2c320QfHX1GhLI2nrJog2/e","PlaySpineInEditor",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ProtobufferHandler.ts",["cc","./Log.ts","./header2.ts","./index.mjs_cjs=&original=.js","./index.js"],(function(e){var r,t,a,n,o,u;return{setters:[function(e){r=e.cclegacy},function(e){t=e.error,a=e.debug,n=e.warn},function(e){o=e.ProtocolType},null,function(e){u=e.default}],execute:function(){r._RF.push({},"524baSmzXpA45uhTcuPXrhi","ProtobufferHandler",void 0);e("ProtobufferHandler",function(){function e(){this._builder=null,this._heartBeatCmd=0,this._heartBeatCmdName="",this._heartBeatData=null}var r=e.prototype;return r.addProto=function(e){try{var r=u.parse(e).root;return this._builder=r,!0}catch(e){return t("ProtobufferHandler:addProto error!",e),!1}},r.pack=function(e,r,n,o){try{var u=this._builder.lookupType(r);if(!u)return a("ProtobufferHandler:pack cannot find cmdName = "+r),null;var c=u.encode(n).finish();return this._builder.lookupType("BaseCmd").encode({cmd:e,data:c,reqId:o}).finish()}catch(a){return t("ProtobufferHandler:pack error! cmd = "+e+" cmdName = "+r,a),null}},r.unpack=function(e,r){try{var t=this._builder.lookupType(e);return t?t.decode(r):(n("ProtobufferHandler:unpack cannot find cmdName = "+e),null)}catch(r){return n("ProtobufferHandler:unpack error! cmdName = "+e,r),null}},r.unpackBase=function(e){try{var r=this._builder.lookupType("BaseCmd");return r?r.decode(new Uint8Array(e)):(t("ProtobufferHandler:unpackBase cannot find BaseCmd"),null)}catch(e){return t("ProtobufferHandler:unpackBase error!",e),null}},r.setHeartBeat=function(e,r,t){this._heartBeatCmd=e,this._heartBeatCmdName=r,this._heartBeatData=t},r.getHeartBeatCmd=function(){return this._heartBeatCmd},r.getHeartBeatCmdName=function(){return this._heartBeatCmdName},r.getHeartBeatData=function(){return this._heartBeatData},r.getProtocolType=function(){return o.Protobuf},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ReqAddDiamond.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetTaskBase.ts","./Server.ts","./UserData.ts","./SafeJSON.ts","./HttpTask.ts"],(function(t){var e,n,s,a,i,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.NetTaskBase},function(t){a=t.Server},function(t){i=t.UserData},function(t){r=t.SafeJSON},function(t){o=t.HttpTaskProperty}],execute:function(){var c;n._RF.push({},"bf25cpcdxFBbbpelMdpicmd","ReqAddDiamond",void 0);t("ReqAddDiamond",o("ReqAddDiamond",""+a.baseUrl+a.addDiamond,"PUT")(c=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(e){var n=this;return this.url=this.url.replace("{uid}",i.uid),this.reqData=r.stringify({amount:e}),new Promise((function(e,s){t.prototype.start.call(n).then((function(t){t&&t.success?(i.diamonds=t.data.currentDiamonds,i.save(),e(t)):s(t.message)})).catch((function(t){s(t)}))}))},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/ReqLevelUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetTaskBase.ts","./Server.ts","./UserData.ts","./HttpTask.ts","./SafeJSON.ts"],(function(e){var t,n,s,r,i,a,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){s=e.NetTaskBase},function(e){r=e.Server},function(e){i=e.UserData},function(e){a=e.HttpTaskProperty},function(e){u=e.SafeJSON}],execute:function(){var c;n._RF.push({},"a0e481PMKxLeotAb5Mnuxia","ReqLevelUp",void 0);e("ReqLevelUp",a("ReqLevelUp",""+r.baseUrl+r.levelUp,"PUT")(c=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(t){var n=this;return this.url=this.url.replace("{uid}",i.uid),this.reqData=t?u.stringify({level:t}):u.stringify({level:i.level+1}),new Promise((function(t,s){e.prototype.start.call(n).then((function(e){e&&e.success?(i.level=e.data.currentLevel,i.save(),t(e)):s(e.message)})).catch((function(e){s(e)}))}))},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/ReqRank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetTaskBase.ts","./Server.ts","./HttpTask.ts"],(function(t){var e,n,r,s,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.NetTaskBase},function(t){s=t.Server},function(t){i=t.HttpTaskProperty}],execute:function(){var a;n._RF.push({},"7441bIJ1cFAy5ToCXZay+cT","ReqRank",void 0);t("ReqRankList",i("ReqRankList",""+s.baseUrl+s.getRankList,"GET")(a=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){return this.url=this.url.replace("{limit}","100").replace("{page}","1"),t.prototype.start.call(this)},n}(r))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/ReqRanList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetTaskBase.ts","./Server.ts","./UserData.ts","./HttpTask.ts"],(function(t){var e,n,r,s,a,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.NetTaskBase},function(t){s=t.Server},function(t){a=t.UserData},function(t){i=t.HttpTaskProperty}],execute:function(){var u;n._RF.push({},"25275B6nhlCR71g5AQc3YtN","ReqRanList",void 0);t("ReqRank",i("ReqRank",""+s.baseUrl+s.getRank,"GET")(u=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){return this.url=this.url.replace("{uid}",a.uid),t.prototype.start.call(this)},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ReqUpdateHighestScore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetTaskBase.ts","./Server.ts","./UserData.ts","./SafeJSON.ts","./HttpTask.ts"],(function(t){var e,s,r,i,n,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy},function(t){r=t.NetTaskBase},function(t){i=t.Server},function(t){n=t.UserData},function(t){a=t.SafeJSON},function(t){c=t.HttpTaskProperty}],execute:function(){var o;s._RF.push({},"dcfa9isbRlHhqhf/MhAvOyK","ReqUpdateHighestScore",void 0);t("ReqUpdateHighestScore",c("ReqUpdateHighestScore",""+i.baseUrl+i.updateHighestScore,"PUT")(o=function(t){function s(){return t.apply(this,arguments)||this}return e(s,t),s.prototype.start=function(e){var s=this;return this.url=this.url.replace("{uid}",n.uid),this.reqData=a.stringify({highest_score:e}),new Promise((function(e,r){t.prototype.start.call(s).then((function(t){t&&t.success?(n.highestScore=t.data.highestScore,n.save(),e(t)):r(t.message)})).catch((function(t){r(t)}))}))},s}(r))||o);s._RF.pop()}}}));

System.register("chunks:///_virtual/ReqUserInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetTaskBase.ts","./Server.ts","./HttpTask.ts","./UserData.ts"],(function(t){var e,s,n,r,a,o;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy},function(t){n=t.NetTaskBase},function(t){r=t.Server},function(t){a=t.HttpTaskProperty},function(t){o=t.UserData}],execute:function(){var i;s._RF.push({},"f785fbMFb9NB4AACnL1LyNr","ReqUserInfo",void 0);t("ReqUserInfo",a("ReqUserInfo",""+r.baseUrl+r.getUserInfo,"GET")(i=function(t){function s(){return t.apply(this,arguments)||this}return e(s,t),s.prototype.start=function(e){var s=this;return this.url=this.url.replace("{uid}",e),new Promise((function(e,n){t.prototype.start.call(s).then((function(t){t&&t.success?(Object.assign(o,{uid:t.data.playerId,level:t.data.currentLevel,highestScore:t.data.highestScore,diamonds:t.data.diamonds}),o.save(),e(t)):n(t.message)})).catch((function(t){n(t)}))}))},s}(n))||i);s._RF.pop()}}}));

System.register("chunks:///_virtual/ReqWatchAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetTaskBase.ts","./Server.ts","./ConfigLoader.ts","./UserData.ts","./HttpTask.ts","./SafeJSON.ts"],(function(t){var e,r,n,a,s,i,o,u;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){n=t.NetTaskBase},function(t){a=t.Server},function(t){s=t.ConfigLoader},function(t){i=t.UserData},function(t){o=t.HttpTaskProperty},function(t){u=t.SafeJSON}],execute:function(){var c;r._RF.push({},"fdd8aVDq3lEb7rfjzTexrl2","ReqWatchAd",void 0);t("ReqWatchAd",o("ReqWatchAd",""+a.baseUrl+a.watchAd,"POST")(c=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.start=function(){var e;return this.url=this.url.replace("{uid}",i.uid),this.reqData=u.stringify({diamonds:(null==(e=s.getConfig("award"))?void 0:e.ad)||0}),t.prototype.start.call(this)},r}(n))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/ResLoader.ts",["cc"],(function(n){var e,o;return{setters:[function(n){e=n.cclegacy,o=n.assetManager}],execute:function(){e._RF.push({},"5fa3alajrpNP44T7DJP4STU","ResLoader",void 0);n("default",function(){function n(){}return n.loadBundle=function(n){return new Promise((function(e,r){o.loadBundle(n,(function(n,o){n?r(n):e(o)}))}))},n.loadBundleRes=function(n,e,r){return void 0===r&&(r=o.getBundle("resources")),new Promise((function(o,u){r||u(new Error("bundle not found or not loaded")),r.load(n,e,(function(n,e){n?u(n):o(e)}))}))},n.loadRes=function(n,e,r){void 0===r&&(r="resources");var u=o.getBundle(r);return u?this.loadBundleRes(n,e,u):new Promise((function(n,e){e(new Error("bundle not found or not loaded"))}))},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/SafeJSON.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"1bc56TlEc9DT6971WAZKlWu","SafeJSON",void 0);n("SafeJSON",function(){function n(){}return n.parse=function(n,t){try{return JSON.parse(n,t)}catch(n){return console.log(n),null}},n.stringify=function(n,t,r){try{return JSON.stringify(n,t,r)}catch(n){return console.log(n),""}},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreManager.ts",["cc","./Log.ts","./ConfigLoader.ts"],(function(t){var i,e,o;return{setters:[function(t){i=t.cclegacy},function(t){e=t.debug},function(t){o=t.ConfigLoader}],execute:function(){i._RF.push({},"78a92ZTip9O0pv4s68DzndJ","ScoreManager",void 0);var s=t("scoreManager",function(){function t(t){void 0===t&&(t=100),this._score=0,this._placeCount=0,this._placeScoreConfig=[],this._eliminateScoreConfig=[],this._scoreHistory=[],this._listeners=[],this._maxHistorySize=100,this._comboCount=0,this._comboCountWindow=3,this._lastEliminateScoreTime=0,this._placeCountSinceLastEliminate=0,this._maxHistorySize=t}var i=t.prototype;return i.initScoreConfig=function(){var t=this;o.getConfig("shape").forEach((function(i){t._placeScoreConfig.push({shape:i.type,points:i.place_score}),t._eliminateScoreConfig.push({shape:i.type,points:i.eliminate_score})}))},i.addPlaceScore=function(t,i,o){var s,n=null==(s=this._placeScoreConfig.find((function(i){return i.shape===t})))?void 0:s.points;if(n){this._score+=n;var c={timestamp:Date.now(),scoreType:"place_shape",shapeType:[t],points:n,totalScore:this._score,color:i,pos:o};e("放置，分数 +"+n+"，总分: "+this._score),this._addToHistory(c),this._notifyListeners(c)}else e("未知的分数类型: shape_placed_"+t)},i.addEliminateScore=function(t,i){var o=this,s=0;t.forEach((function(t){var i,n=null==(i=o._eliminateScoreConfig.find((function(i){return i.shape===t})))?void 0:i.points;n?s+=n:e("未知的分数类型: shape_eliminated_"+t)}));var n=Date.now(),c=s;if(this._shouldApplyCombo(n)){this._comboCount++;var r=this._comboCount,a={timestamp:n,scoreType:"combo",shapeType:t,points:(s=c*r)-c,totalScore:this._score+s};this._score+=a.points,e("连击奖励 +"+a.points+" (x"+r+")"),this._addToHistory(a),this._notifyListeners(a)}else this._comboCount=1;this._placeCountSinceLastEliminate=0,this._lastEliminateScoreTime=n,this._score+=c;var h={timestamp:n,scoreType:"eliminate_shape",shapeType:t,points:s,totalScore:this._score,color:i};e("消除，分数 +"+s+"，总分: "+this._score),this._addToHistory(h),this._notifyListeners(h)},i.addPlaceCount=function(){this._placeCount++,this._placeCountSinceLastEliminate++,e("放置次数 +1，当前放置次数",this._placeCount,"距离上次消除后放置次数",this._placeCountSinceLastEliminate),this._placeCountSinceLastEliminate>this._comboCountWindow&&this.resetCombo()},i.getScore=function(){return this._score},i.resetScore=function(){this._score=0,this._scoreHistory=[],this._comboCount=0,this._placeCount=0,this._lastEliminateScoreTime=0,e("分数已重置")},i.getComboCount=function(){return this._comboCount},i.resetCombo=function(){this._comboCount=0,this._lastEliminateScoreTime=0,this._placeCountSinceLastEliminate=0,e("连击已重置")},i.addScoreListener=function(t){this._listeners.push(t)},i.removeScoreListener=function(t){var i=this._listeners.indexOf(t);i>-1&&this._listeners.splice(i,1)},i.getScoreHistory=function(t){return t?this._scoreHistory.filter((function(i){return i.scoreType===t})):[].concat(this._scoreHistory)},i.getRecentScores=function(t){return void 0===t&&(t=10),this._scoreHistory.slice(-t)},i._addToHistory=function(t){this._scoreHistory.push(t),this._scoreHistory.length>this._maxHistorySize&&this._scoreHistory.shift()},i._shouldApplyCombo=function(t){return 0!==this._lastEliminateScoreTime&&this._placeCountSinceLastEliminate<=this._comboCountWindow},i._notifyListeners=function(t){this._listeners.forEach((function(i){try{i(t)}catch(t){console.error("分数监听器错误:",t)}}))},i.clear=function(){this._listeners=[],this._scoreHistory=[],this._comboCount=0,this._placeCount=0,this._placeCountSinceLastEliminate=0,this._score=0,this._placeScoreConfig=[],this._eliminateScoreConfig=[]},t}());t("ScoreManager",new s);i._RF.pop()}}}));

System.register("chunks:///_virtual/Screen.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"480c1w9D8FOebWQoyoO9QHs","Screen",void 0);var t=e("Screen",(function(){}));t.ScreenWidth=void 0,t.ScreenHeight=void 0,t.DesignWidth=void 0,t.DesignHeight=void 0,t.SafeAreaHeight=void 0,t.SafeWidth=void 0,t.SafeHeight=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/Server.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"24fabGVrwJNLLW9IKzXytHe","Server",void 0);e("Server",{baseUrl:"https://sandpuzzle.server.api.garyxuan.cn",getUserInfo:"/api/user/{uid}",watchAd:"/api/user/{uid}/watch-ad",levelUp:"/api/user/{uid}/level",addDiamond:"/api/user/{uid}/diamonds",updateHighestScore:"/api/user/{uid}/highest-score",getRank:"/api/user/{uid}/rank",getRankList:"/api/user/leaderboard?limit={limit}&page={page}"});r._RF.pop()}}}));

System.register("chunks:///_virtual/Setting.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8eb3cUsnq5BXa/99v+Ws/xH","Setting",void 0);t("Setting",{AutoFit:!1,SecretKey:""});e._RF.pop()}}}));

System.register("chunks:///_virtual/ShapeHelper.ts",["cc"],(function(r){var a,o,e;return{setters:[function(r){a=r.cclegacy,o=r.Color,e=r.debug}],execute:function(){a._RF.push({},"ffccf0IfVBNJZjeOQJFx8Ls","ShapeHelper",void 0);var t=r("Shape",function(r){return r[r.T=0]="T",r[r.T_B=1]="T_B",r[r.L_L=2]="L_L",r[r.L_R=3]="L_R",r[r.RECTANGLE=4]="RECTANGLE",r[r.SQUARE=5]="SQUARE",r[r.Z=6]="Z",r[r.Z_REVERSE=7]="Z_REVERSE",r}({}));r("ShapeHelper",function(){function r(){}return r.buildShape=function(r,a){for(var e=[],n=0;n<24;n++){e[n]=[];for(var i=0;i<24;i++)e[n][i]=new o(0,0,0,0)}switch(r){case t.T:this.buildTShape(e,a);break;case t.T_B:this.buildTBottomShape(e,a);break;case t.L_L:this.buildLLeftShape(e,a);break;case t.L_R:this.buildLRightShape(e,a);break;case t.RECTANGLE:this.buildRectangleShape(e,a);break;case t.SQUARE:this.buildSquareShape(e,a);break;case t.Z:this.buildZShape(e,a);break;case t.Z_REVERSE:this.buildZReverseShape(e,a)}return e},r.buildTShape=function(r,a){for(var o=12;o<=17;o++)for(var e=3;e<=20;e++){var t=this.getRandomColor(a);r[o][e]=t}for(var n=6;n<=11;n++)for(var i=9;i<=14;i++){var f=this.getRandomColor(a);r[n][i]=f}},r.buildTBottomShape=function(r,a){for(var o=6;o<=11;o++)for(var e=3;e<=20;e++){var t=this.getRandomColor(a);r[o][e]=t}for(var n=12;n<=17;n++)for(var i=9;i<=14;i++){var f=this.getRandomColor(a);r[n][i]=f}},r.buildLLeftShape=function(r,a){for(var o=12;o<=17;o++)for(var e=3;e<=20;e++){var t=this.getRandomColor(a);r[o][e]=t}for(var n=6;n<=11;n++)for(var i=3;i<=8;i++){var f=this.getRandomColor(a);r[n][i]=f}},r.buildLRightShape=function(r,a){for(var o=12;o<=17;o++)for(var e=3;e<=20;e++){var t=this.getRandomColor(a);r[o][e]=t}for(var n=6;n<=11;n++)for(var i=15;i<=20;i++){var f=this.getRandomColor(a);r[n][i]=f}},r.buildRectangleShape=function(r,a){for(var o=9;o<=15;o++)for(var e=1;e<=22;e++){var t=this.getRandomColor(a);r[o][e]=t}},r.buildSquareShape=function(r,a){for(var o=3;o<=20;o++)for(var e=3;e<=20;e++){var t=this.getRandomColor(a);r[o][e]=t}},r.buildZShape=function(r,a){for(var o=5;o<=11;o++)for(var e=1;e<=14;e++){var t=this.getRandomColor(a);r[o][e]=t}for(var n=12;n<=18;n++)for(var i=8;i<=21;i++){var f=this.getRandomColor(a);r[n][i]=f}},r.buildZReverseShape=function(r,a){for(var o=this.getRandomColor(a),e=5;e<=11;e++)for(var t=8;t<=21;t++)r[e][t]=o;for(var n=12;n<=18;n++)for(var i=1;i<=14;i++)r[n][i]=o},r.getRandomColor=function(r){if(0===r.length)return new o(255,255,255,255);var a=Math.floor(Math.random()*r.length);return e("randomIndex",a),r[a]},r}());a._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e;return{setters:[function(n){t=n.construct},function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"9c8ac/rkupChrmfXjjAvLh+","Singleton",void 0);n("SingletonClass",function(){function n(){}return n.getInstance=function(){if(!this.instance){for(var n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];this.instance=t(this,e)}return this.instance},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/SocketManager.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"80301oN3XpBv7TienxV5BuG","SocketManager",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/SocketNode.ts",["cc","./Log.ts"],(function(e){var t,s,i,n;return{setters:[function(e){t=e.cclegacy},function(e){s=e.debug,i=e.error,n=e.warn}],execute:function(){t._RF.push({},"4430cTlvKNEyKjTaJ6V4P1Y","SocketNode",void 0);var o=function(e){return e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Working=2]="Working",e}(o||{}),r=function(e){return e[e.Connecting=0]="Connecting",e[e.ReConnecting=1]="ReConnecting",e[e.Requesting=2]="Requesting",e}(r||{});e("SocketNode",function(){function e(){this._socket=null,this._state=o.Closed,this._isSocketInit=!1,this._isSocketOpen=!1,this._url=void 0,this._connectOptions=null,this._connectCallback=null,this._binaryType=void 0,this._autoReconnect=0,this._isAutoReconnect=!1,this._protocolHandler=null,this._networkTips=null,this._reqId=0,this._keepAliveTimer=null,this._receiveMsgTimer=null,this._reconnectTimer=null,this._heartTime=3e3,this._receiveTime=6e6,this._reconnectTimeout=3e3,this._requests=new Array,this._requestListeners=new Map,this._cmdMap=new Map}var t=e.prototype;return t.init=function(e,t,i){void 0===i&&(i=null),s("SocketNode:init socket!"),this._socket=e,this._protocolHandler=t,this._networkTips=i},t.connect=function(e,t,s){return!(!this._socket||this._state!=o.Closed)&&(this._isSocketInit||this.initSocket(),this._state=o.Connecting,this._socket.connect(e,t.binaryType,t.timeout,t.protocols)?(null==this._connectOptions&&"number"==typeof t.autoReconnect&&(this._autoReconnect=t.autoReconnect),this._connectOptions=t,this._url=e,this._connectCallback=null!=s?s:this._connectCallback,this.updateNetTips(r.Connecting,!0),!0):(this.updateNetTips(r.Connecting,!1),!1))},t.initSocket=function(){this._socket&&(this._socket.onopen=this.onConnected.bind(this),this._socket.onmessage=this.onMessage.bind(this),this._socket.onerror=this.onError.bind(this),this._socket.onclose=this.onClosed.bind(this),this._isSocketInit=!0)},t.updateNetTips=function(e,t){if(this._networkTips)switch(e){case r.Connecting:this._networkTips.connectTips(t);break;case r.ReConnecting:this._networkTips.reconnectTips(t);break;case r.Requesting:this._networkTips.requestTips(t)}},t.onConnected=function(e){var t,i;(s("SocketNode:onConnected！"),this._isAutoReconnect)?null==(t=this._connectCallback)||t.onReconnected():null==(i=this._connectCallback)||null==i.onConnected||i.onConnected();if(this._isSocketOpen=!0,this._isAutoReconnect=!1,this._state=o.Working,this.resetHeartBeatTimer(),this.resetReceiveMsgTimer(),this.updateNetTips(r.Connecting,!1),this.updateNetTips(r.ReConnecting,!1),this._requests.length>0){for(var n=this._requests.length-1;n>=0;n--){var c=this._requests[n];if(c){var a=this._protocolHandler.pack(c.respCmd,c.respCmdName+"Req",c.buffer,++this._reqId);a&&this._socket.sendBuffer(a),(null==c.respObject||c.respCmd<=0)&&this._requests.splice(n,1)}}this.updateNetTips(r.Requesting,this._requests.length>0)}s("SocketNode:onConnected! state = "+this._state)},t.onMessage=function(e){try{if(!(e=this._protocolHandler.unpackBase(e)))return void i("SocketNode:onMessage unpackBase error!");var t=e.cmd,n=this._cmdMap.get(t);if(!n)return void i("SocketNode:onMessage cmdName error! cmd = "+t,e);var o=this._protocolHandler.unpack(n,e.data);if(!o)return void i("SocketNode:onMessage unpack error! cmd = "+t+" cmdName = "+n);if(this.resetReceiveMsgTimer(),this.resetHeartBeatTimer(),t==this._protocolHandler.getHeartBeatCmd())return void s("SocketNode:HeartBeat resp");s("SocketNode:onMessage respCmd=",t),this.handleRequestResponse(t,o),this.handleListeners(t,o)}catch(e){i("SocketNode:onMessage error!",e)}},t.handleRequestResponse=function(e,t){if(0!==this._requests.length){for(var n=this._requests.length-1;n>=0;n--){var o=this._requests[n];if(o.respCmd==e&&o.respObject){s("SocketNode execute request respCmd "+e);try{o.respObject.callback.call(o.respObject.target,o.respCmd,t)}catch(t){i("SocketNode execute fail cmd:"+e+":",t)}this._requests.splice(n,1);break}}s("SocketNode still has "+this._requests.length+" request waiting"),this.updateNetTips(r.Requesting,this._requests.length>0)}},t.handleListeners=function(e,t){var s=this._requestListeners.get(e);s&&0!==s.length&&s.forEach((function(s){try{s.callback.call(s.target,e,t)}catch(t){i("SocketNode execute listener fail cmd:"+e+":",t)}}))},t.onError=function(e){var t;s("SocketNode onError",e),null==(t=this._connectCallback)||null==t.onError||t.onError(),this._isAutoReconnect=!1},t.onClosed=function(e){var t,i=this;s("SocketNode onClosed",e),null==(t=this._connectCallback)||null==t.onClose||t.onClose(null==e?void 0:e.code),this._isAutoReconnect=!1,this.clearTimer(),0!=this._autoReconnect?(this.updateNetTips(r.ReConnecting,!0),this._reconnectTimer=setTimeout((function(){var e;i._socket&&i._socket.close(),i._state=o.Closed,null==(e=i._connectCallback)||null==e.onReconnecting||e.onReconnecting(),i.connect(i._url,i._connectOptions),i._isAutoReconnect=!0,i._autoReconnect>0&&(i._autoReconnect--,0==i._autoReconnect&&n("auto reconnect end!"))}),this._reconnectTimeout)):this._state=o.Closed},t.close=function(e,t){this.clearTimer(),this._requestListeners.clear(),this._networkTips&&(this._networkTips.connectTips(!1),this._networkTips.reconnectTips(!1),this._networkTips.requestTips(!1)),this._socket?this._socket.close(e,t):this._state=o.Closed},t.closeSocket=function(e,t){this._socket&&this._socket.close(e,t)},t.send=function(e,t,n,r){if(void 0===r&&(r=!1),!this._socket)return i("SocketNode socket is not initialized!"),-1;if(this._state==o.Working||r){s("SocketNode socket send ...");var c=this._protocolHandler.pack(e,t+"Req",n,++this._reqId);return c?(this._cmdMap.set(e,t+"Resp"),this._socket.sendBuffer(c)):(i("SocketNode pack error! cmd = "+e+" cmdName = "+t+" data = "+n),-1)}return this._state==o.Connecting?(this._requests.push({buffer:n,respCmd:e,respCmdName:t,respObject:null}),this._cmdMap.set(e,t+"Resp"),s("SocketNode socket is busy, push to send buffer, current state is "+this._state),0):(i("SocketNode request error! current state is "+this._state),-1)},t.request=function(e,t,i,n,c,a){if(void 0===c&&(c=!0),void 0===a&&(a=!1),this._state==o.Working||a){var u=this._protocolHandler.pack(e,t+"Req",i,++this._reqId);this._socket.sendBuffer(u)}s("SocketNode request cmd "+e+" showTips "+c+" force "+a),this._requests.push({buffer:i,respCmd:e,respCmdName:t,respObject:n}),this._cmdMap.set(e,t+"Resp"),c&&this.updateNetTips(r.Requesting,!0)},t.requestUnique=function(e,t,i,n,o,r){void 0===o&&(o=!0),void 0===r&&(r=!1);for(var c=0;c<this._requests.length;c++){if(this._requests[c].respCmd==e)return s("SocketNode requestUnique cmd "+e+" already exists"),!1}return this.request(e,t,i,n,o,r),!0},t.setResponseHandler=function(e,t,s,n){if(null!=s){this._cmdMap.set(e,t);var o=this._requestListeners.get(e);if(null==o&&this._requestListeners.set(e,new Array),o&&o.length>0){var r=o.find((function(e){return e.target==n}));if(r)return r.target=n,void(r.callback=s)}this._requestListeners.get(e).push({target:n,callback:s})}else i("SocketNode:setResponseHandler callback is null")},t.removeResponseHandler=function(e,t){if(this._requestListeners.has(e)){var s=this._requestListeners.get(e);s=s.filter((function(e){return e.target!=t})),this._requestListeners.set(e,s)}},t.removeRequestListeners=function(e){void 0===e&&(e=-1),-1==e?(this._requestListeners.forEach((function(e){e.length=0})),this._requestListeners.clear()):this._requestListeners.has(e)&&(this._requestListeners.get(e).length=0)},t.clearTimer=function(){null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),null!==this._reconnectTimer&&clearTimeout(this._reconnectTimer)},t.resetReceiveMsgTimer=function(){var e=this;null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),this._receiveMsgTimer=setTimeout((function(){n("SocketNode:receiveMsgTimer close socket!"),e._socket.close()}),this._receiveTime)},t.resetHeartBeatTimer=function(){var e=this;null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),this._keepAliveTimer=setTimeout((function(){s("SocketNode keepAliveTimer send HeartBeat!"),e.send(e._protocolHandler.getHeartBeatCmd(),e._protocolHandler.getHeartBeatCmdName(),e._protocolHandler.getHeartBeatData(),!0)}),this._heartTime)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Stack.ts",["cc","./LinkedList.ts"],(function(t){var i,e;return{setters:[function(t){i=t.cclegacy},function(t){e=t.DoublyLinkedList}],execute:function(){i._RF.push({},"76ffa/dxYNOmqOryt8r6VM8","Stack",void 0);t("Stack",function(){function t(t){this._items=void 0,this._items=new e(t)}var i=t.prototype;return i.push=function(t){this._items.push(t)},i.pop=function(){if(!this.isEmpty())return this._items.removeAt(this.size()-1)},i.peek=function(){if(!this.isEmpty())return this._items.getTail().element},i.size=function(){return this._items.size()},i.isEmpty=function(){return this._items.isEmpty()},i.clear=function(){this._items.clear()},i.toString=function(){return this._items.toString()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Start.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CocosEntry.ts","./header4.ts","./Platform.ts","./GlobalEvent.ts","./Log.ts","./env","./ConfigLoader.ts","./AdManager.ts","./ResLoader.ts","./UIMgr.ts","./PixelSpriteProgress.ts","./GlobalTimer.ts","./UserData.ts","./ReqUserInfo.ts","./UIAlert.ts","./PixelSpriteWord.ts","./UserPreferences.ts","./AudioMgr.ts","./MD5.ts","./Device.ts","./HttpManager.ts","./Utils.ts","./SafeJSON.ts"],(function(e){var n,t,r,o,i,s,a,c,u,l,f,g,d,p,h,m,v,I,b,y,U,w,G,L,S,E,C,M,D,P,_,A,R,k,T,x,N,V,B;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,u=e.Node,l=e.JsonAsset,f=e.sys,g=e.director,d=e.SceneAsset},function(e){p=e.CocosEntry},function(e){h=e.GX_DEBUG},function(e){m=e.Platform,v=e.PlatformType},function(e){I=e.GlobalEvent},function(e){b=e.debug,y=e.error},function(e){U=e.DEBUG},function(e){w=e.ConfigLoader},function(e){G=e.AdManager,L=e.AD_CONFIG},function(e){S=e.default},function(e){E=e.UIMgr},function(e){C=e.PixelSpriteProgress},function(e){M=e.GlobalTimer},function(e){D=e.UserData},function(e){P=e.ReqUserInfo},function(e){_=e.UIAlert},function(e){A=e.PixelSpriteWord},function(e){R=e.UserPreferences},function(e){k=e.AudioMgr},function(e){T=e.md5},function(e){x=e.Device},function(e){N=e.HttpManager},function(e){V=e.Utils},function(e){B=e.SafeJSON}],execute:function(){var z,H,O,F,J,Q,j,q,W,X,K;a._RF.push({},"17cb4Dgs6pPQ5U26wbGg5+R","Start",void 0);var Y=c.ccclass,Z=c.property;e("GameEntry",(z=Y("GameEntry"),H=Z(u),O=Z(u),F=Z(A),J=Z(C),z((q=n((j=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,r(n,"GM",q,o(n)),r(n,"loading",W,o(n)),r(n,"labeLoading",X,o(n)),r(n,"progressBar",K,o(n)),n._loginRetryCount=3,n}t(n,e);var a=n.prototype;return a.getConfig=function(){return{debug:U,hideStats:!0,showGM:U}},a.onInit=function(){var e=i(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b("GameEntry onInit"),G.Ins().loadRewardedAd(L.adUnitIds.rewardedVideo),I.setDebugMode(h),R.load(),k.Ins().musicVolume=R.musicVolume,k.Ins().soundVolume=R.soundVolume,E.getInstance().setUp(this.node),(n=f.localStorage.getItem("GAME::UNIQUE_DEVICE_ID"))||(n=x.GetUUID()),n&&""!=n||(t=v[m.platform]+"_"+Date.now()+"_"+Math.random().toString(36).slice(2,10),n=T(t),f.localStorage.setItem("GAME::UNIQUE_DEVICE_ID",n)),m.deviceId=n,D.load(),""==D.uid&&(D.uid=m.deviceId,D.save(!1)),this.checkUpgrade();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.startLoading=function(){var e=i(s().mark((function e(){var n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading.active=!0,this.labeLoading.string="Loading...",e.next=4,new Promise((function(e){var t=0,r=M.startTimer((function(){t+=.1;var o=Math.min(1,t/.5);n.progressBar.progress=.5*o,t>=.5&&(M.stopTimer(r),e())}),.1,5)}));case 4:return this.labeLoading.string="Loading config file...",e.next=7,this.loadConfig((function(e){n.progressBar.progress=.5+e/2}));case 7:this.progressBar.progress=1,this.labeLoading.string="Login in...",this.loginIn();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.loadConfig=function(e){return b("GameEntry loadConfig"),new Promise((function(n,t){var r=["award","level","item","shape"];r.forEach((function(t,o){S.loadRes("config/"+t,l).then((function(i){w.loadConfig(t,i),e(o+1/r.length),o==r.length-1&&n()})).catch((function(e){y("load config error",e)}))}))}))},a.loginIn=function(){var e=this;(new P).start(D.uid).then((function(){e.onLoginSuccess()})).catch((function(n){e._loginRetryCount--,e._loginRetryCount<=0?_.show("Login failed:"+n,!1).onClick((function(n){setTimeout(e.loginIn.bind(e),500)})).setTitle("Tips"):e.loginIn()}))},a.onLoginSuccess=function(){var e=i(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b("GameEntry loginSuccess"),this.loading.active=!1,this.GM.active=this.getConfig().showGM,e.next=5,S.loadRes("scene/HomeScene",d);case 5:n=e.sent,g.runSceneImmediate(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.checkUpgrade=function(){var e=this;if(m.isNative&&m.isIOS){var n="6752853333",t="https://itunes.apple.com/lookup?id="+n;b("checkUpgrade:url",t),N.get(t,B.stringify({}),"json",{onCompete:function(t){b("checkUpgrade:onCompete",t);var r=t.data;if(r.results&&0!=r.results.length){var o=r.results[0].version,i=r.results[0].releaseNotes;V.compareVersion(o,x.GetAppVersion())>0&&_.show(i||"New version available",!0).onClick((function(t){t&&f.openURL("https://apps.apple.com/app/id"+n),e.startLoading()})).setTitle("Tips"),b(r)}else e.startLoading()},onError:function(n){b("checkUpgrade:error",n),e.startLoading()}})}else this.startLoading()},n}(p)).prototype,"GM",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(j.prototype,"loading",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(j.prototype,"labeLoading",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(j.prototype,"progressBar",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=j))||Q));a._RF.pop()}}}));

System.register("chunks:///_virtual/Time.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Log.ts"],(function(t){var e,i,n,o;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,n=t.game},function(t){o=t.log}],execute:function(){i._RF.push({},"da347MLOzhPbJkTTADtikjo","Time",void 0);var r=t("Time",function(){function t(){}return t.init=function(){var t=this;this._osBootTime=Math.floor(Date.now()),o("Time init, osBootTime: "+this._osBootTime),this._nowTimestamp=function(){return t._osBootTime+t.runTime}},t.now=function(){return this._nowTimestamp()+this.netTimeDiff},t.msTos=function(t){return Math.floor((t||0)/1e3)},t.sToMs=function(t){return 1e3*(t||0)},e(t,null,[{key:"netTimeDiff",get:function(){return this._netTimeDiff}},{key:"runTime",get:function(){return Math.floor(n.totalTime)}}]),t}());r._nowTimestamp=void 0,r._osBootTime=0,r._netTime=0,r._netTimeDiff=0,i._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BinaryHeap.ts","./Log.ts"],(function(e){var i,r,t,n,s,a;return{setters:[function(e){i=e.inheritsLoose},function(e){r=e.cclegacy},function(e){t=e.BinaryHeap,n=e.HeapNode},function(e){s=e.debug,a=e.error}],execute:function(){r._RF.push({},"3b9d7nguAVDe7XgjdcV2Z7q","Timer",void 0);var o=e("Timer",function(){var e=i.prototype;function i(e){void 0===e&&(e=1024),this._heap=void 0,this._runningTimer=void 0,this._pausedTimer=void 0,this._elapsedTime=0,this._timerNodeOrder=0,this._heap=new t(e),this._pausedTimer=new Map,this._runningTimer=new Map}return e.getTimerCount=function(){return this._heap.count},e.start=function(e,r,t){if(void 0===t&&(t=0),!e||r<=0)return s("Timer start error: callback is null or interval <= 0"),-1;this._timerNodeOrder>=i.MAX_ORDER_INDEX&&(this._timerNodeOrder=0);var n=new p(++i._timerId);return n.callback=e,n.interval=r,n.loop=t,n.expireTime=this._elapsedTime+r,n.orderIndex=++this._timerNodeOrder,n.pause=!1,n.currentLoop=0,this._runningTimer.set(n.id,n),this._heap.push(n),n.id},e.stop=function(e){var i=this._runningTimer.get(e);return i?(this._runningTimer.delete(e),this._heap.remove(i),!0):!!(i=this._pausedTimer.get(e))&&(this._pausedTimer.delete(e),!0)},e.pause=function(e){var i=this._runningTimer.get(e);return!!i&&(i.pause=!0,i.pauseRemainTime=i.expireTime-this._elapsedTime,this._heap.remove(i),this._runningTimer.delete(e),this._pausedTimer.set(e,i),!0)},e.resume=function(e){var i=this._pausedTimer.get(e);return!!i&&(i.pause=!1,i.expireTime=this._elapsedTime+i.pauseRemainTime,this._heap.push(i),this._pausedTimer.delete(e),this._runningTimer.set(e,i),!0)},e.update=function(e){for(this._elapsedTime+=e;!this._heap.empty;){var i=this._heap.top();if(i.expireTime>this._elapsedTime)break;try{i.callback(e)}catch(e){a("Timer callback error: "+e)}0===i.loop||i.currentLoop==i.loop?(this._heap.pop(),this._runningTimer.delete(i.id)):-1===i.loop?(i.expireTime=this._elapsedTime+i.interval,this._heap.update(i)):i.loop>0&&(i.currentLoop++,i.currentLoop<i.loop&&(i.expireTime=this._elapsedTime+i.interval,this._heap.update(i)))}},e.clear=function(){this._heap.clear(),this._runningTimer.clear(),this._pausedTimer.clear(),this._timerNodeOrder=0},i}());o.MAX_ORDER_INDEX=1e6,o._timerId=0;var p=e("TimerNode",function(e){function r(i){var r;return(r=e.call(this)||this).id=void 0,r.orderIndex=void 0,r.interval=void 0,r.expireTime=void 0,r.loop=0,r.currentLoop=void 0,r.callback=void 0,r.pauseRemainTime=void 0,r.pause=void 0,r.id=i,r}return i(r,e),r.prototype.lessThan=function(e){var i=e;return Math.abs(this.expireTime-i.expireTime)<=1e-5?this.orderIndex<i.orderIndex:this.expireTime<i.expireTime},r}(n));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayers.ts","./UIMgr.ts","./UIModule.ts","./UIController.ts","./Screen.ts","./AdManager.ts","./Log.ts","./ConfigLoader.ts","./ReqAddDiamond.ts","./UIAlert.ts","./UITips.ts","./UIFlyDiamonds.ts"],(function(t){var n,e,o,i,r,a,s,c,d,u,l,f,I,p,h,y,w,A,U,g,b,v,R;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,c=t.Button,d=t.tween},function(t){u=t.UILayers},function(t){l=t.UIMgr},function(t){f=t.UIModule},function(t){I=t.UIControllerProperty,p=t.UIController},function(t){h=t.Screen},function(t){y=t.AdManager,w=t.AD_CONFIG},function(t){A=t.debug},function(t){U=t.ConfigLoader},function(t){g=t.ReqAddDiamond},function(t){b=t.UIAlert},function(t){v=t.UITips},function(t){R=t.UIFlyDiamonds}],execute:function(){var _,C,L,m,D,F,M,k,B,S;r._RF.push({},"3f16c8OYn1Bv6aCN1yKofOq","UIAd",void 0);var z=a.ccclass,O=a.property,V=t("Layout_UIAd",(_=z("Layout_UIAd"),C=O(s),L=O(s),m=O(c),_((M=n((F=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,o(n,"root",M,i(n)),o(n,"tips",k,i(n)),o(n,"btnBack",B,i(n)),n}return e(n,t),n}(f)).prototype,"root",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(F.prototype,"tips",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(F.prototype,"btnBack",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=F))||D));t("UIAd",I(u.OVERLAY,"prefab/UIAd",V)(S=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this)._bRewarded=!1,n}e(n,t),n.show=function(){l.getInstance().showUI(n)};var o=n.prototype;return o.onCreated=function(){var t=this;this._layout.btnBack.node.on("click",(function(){t.onClickEvent(),t.close()})),d(this._layout.root).to(.2,{x:0},{easing:"sineOut"}).call((function(){t.initAd()})).start()},o.initAd=function(){var t=this;y.Ins().isRewardedAdReady(w.adUnitIds.rewardedVideo,(function(n){n?(y.Ins().setListener(t),y.Ins().showRewardedAd(w.adUnitIds.rewardedVideo)):(y.Ins().loadRewardedAd(w.adUnitIds.rewardedVideo),t.onAdShowFail())}))},o.onAdRewarded=function(){this._bRewarded=!0},o.onAdShowFail=function(){this._layout.tips.active=!0},o.onAdClose=function(){if(A("onAdClose"),this._bRewarded){this.close();var t=U.getConfig("award").ad;(new g).start(t).then((function(){v.show("Received "+t+" Diamonds"),R.show()})).catch((function(t){b.show(t)}))}},o.close=function(){d(this._layout.root).to(.15,{x:h.ScreenWidth},{easing:"sineIn"}).call(t.prototype.close.bind(this)).start()},n}(p))||S);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIAdUnavaliable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIModule.ts","./UIController.ts","./UILayers.ts","./Screen.ts","./UIMgr.ts"],(function(t){var n,e,o,r,i,a,l,c,u,s,p,f,b,U,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,l=t.Node,c=t.Button,u=t.tween},function(t){s=t.UIModule},function(t){p=t.UIControllerProperty,f=t.UIController},function(t){b=t.UILayers},function(t){U=t.Screen},function(t){y=t.UIMgr}],execute:function(){var d,I,h,v,g,_,k,w,A,C;i._RF.push({},"138b2O7uj1DUZbJpRZagCmz","UIAdUnavaliable",void 0);var z=a.ccclass,L=a.property,O=t("Layout_UIAdUnavailable",(d=z("Layout_UIAdUnavailable"),I=L(l),h=L(c),v=L(c),d((k=n((_=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,o(n,"root",k,r(n)),o(n,"btnBack",w,r(n)),o(n,"btnOK",A,r(n)),n}return e(n,t),n}(s)).prototype,"root",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(_.prototype,"btnBack",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(_.prototype,"btnOK",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=_))||g));t("UIAdUnavailable",p(b.POPUP,"prefab/UIAdUnavailable",O)(C=function(t){function n(){return t.apply(this,arguments)||this}e(n,t),n.show=function(){y.getInstance().showUI(n)};var o=n.prototype;return o.onCreated=function(){var t=this,n=this._layout;n.btnBack.node.on("click",(function(){t.onClickEvent(),t.close()})),n.btnOK.node.on("click",(function(){t.onClickEvent(),t.close()})),u(this._layout.root).to(.2,{x:0},{easing:"sineOut"}).start()},o.close=function(){u(this._layout.root).to(.15,{x:U.ScreenWidth},{easing:"sineIn"}).call(t.prototype.close.bind(this)).start()},n}(f))||C);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIAlert.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIController.ts","./UILayers.ts","./UIMgr.ts","./UIPopAni.ts","./UIModule.ts","./PixelSpriteWord.ts"],(function(t){var n,l,i,e,c,o,r,a,u,s,p,b,h,_;return{setters:[function(t){n=t.applyDecoratedDescriptor,l=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){c=t.cclegacy,o=t._decorator,r=t.Label,a=t.Button},function(t){u=t.UIControllerProperty},function(t){s=t.UILayers},function(t){p=t.UIMgr},function(t){b=t.UIPopAni},function(t){h=t.UIModule},function(t){_=t.PixelSpriteWord}],execute:function(){var f,k,C,v,I,y,d,g,A,U,w,L;c._RF.push({},"57a32pCrIVI2Y5IILNmZOv7","UIAlert",void 0);var T=o.ccclass,P=o.property,m=t("Layout_UIAlert",(f=T("Layout_UIAlert"),k=P(_),C=P(r),v=P(a),I=P(a),f((g=n((d=function(t){function n(){for(var n,l=arguments.length,c=new Array(l),o=0;o<l;o++)c[o]=arguments[o];return n=t.call.apply(t,[this].concat(c))||this,i(n,"title",g,e(n)),i(n,"content",A,e(n)),i(n,"btnOK",U,e(n)),i(n,"btnCancel",w,e(n)),n}return l(n,t),n}(h)).prototype,"title",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(d.prototype,"content",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(d.prototype,"btnOK",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(d.prototype,"btnCancel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y)),z=t("UIAlertOptions",function(){function t(){this._title="",this._content="",this._showCancel=!1,this._clickCallback=void 0,this._clickCallbackThisArgs=void 0}var n=t.prototype;return n.setTitle=function(t){return this._title=t,this},n.onClick=function(t,n){return this._clickCallback=t,this._clickCallbackThisArgs=n,this},t}());t("UIAlert",u(s.ALERT,"prefab/UIAlert",m)(L=function(t){function n(){for(var n,l=arguments.length,i=new Array(l),e=0;e<l;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this)._options=void 0,n}l(n,t),n.show=function(t,l){void 0===l&&(l=!1);var i=new z;return i._content=t,i._showCancel=l,p.getInstance().showUI(n,(function(t){t.init(i),t.playAni()})),i};var i=n.prototype;return i.init=function(t){this._options=t;var n=this._options,l=this._layout;l.title.string=n._title||"Alert",l.content.string=n._content,l.btnCancel.node.active=n._showCancel,n._showCancel||(l.btnOK.node.x=0)},i.onCreated=function(){var t=this,n=this._layout;n.btnOK.node.on("click",(function(){t.onClickEvent(!1),t.close();var n,l=t._options;null!=l&&l._clickCallbackThisArgs?null==l||null==(n=l._clickCallback)||n.call(null==l?void 0:l._clickCallbackThisArgs,!0):null==l||null==l._clickCallback||l._clickCallback(!0)})),n.btnCancel.node.on("click",(function(){t.onClickEvent(!1),t.close();var n,l=t._options;null!=l&&l._clickCallbackThisArgs?null==l||null==(n=l._clickCallback)||n.call(null==l?void 0:l._clickCallbackThisArgs,!1):null==l||null==l._clickCallback||l._clickCallback(!1)}))},n}(b))||L);c._RF.pop()}}}));

System.register("chunks:///_virtual/UIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserPreferences.ts","./Device.ts","./AudioMgr.ts"],(function(t){var e,n,o,r,i;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){o=t.UserPreferences},function(t){r=t.Device},function(t){i=t.AudioMgr}],execute:function(){t("UIControllerProperty",(function(t,e,n){return function(o){o._uiControllerConfig={layer:t,prefab:e,layout:n}}})),n._RF.push({},"beae6C5jNpMmJoLvZaBq5hM","UIController",void 0),t("UIController",function(){function t(){this._destroyed=!1,this._instId=0,this._node=void 0,this._layout=void 0,this._instId=t._idBase++;var e=this.constructor._uiControllerConfig;e&&(this.getLayer=function(){return e.layer},this.getPrefab=function(){return e.prefab},this.getLayout=function(){return e.layout})}var n=t.prototype;return n.onClickEvent=function(t){void 0===t&&(t=!0),o.vibrate&&r.VibrateShort(),t&&i.Ins().playOneShot("audio/btn",.5)},n.setup=function(t){this._node=t,this._layout=this.node.getComponent(this.getLayout());for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.onCreated.apply(this,n),this._destroyed&&this.close()},n.close=function(){this._destroyed=!0,this._node&&(this.node.removeFromParent(),this.onDispose(),this._node=null)},n.getLayer=function(){return null},n.getPrefab=function(){return null},n.getLayout=function(){return null},n.onCreated=function(){},n.onDispose=function(){},n.onUpdate=function(t){},e(t,[{key:"node",get:function(){return this._node}},{key:"instId",get:function(){return this._instId}}]),t}())._idBase=1e3,n._RF.pop()}}}));

System.register("chunks:///_virtual/UIFlyDiamonds.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIModule.ts","./UIController.ts","./UILayers.ts","./UIMgr.ts","./AudioMgr.ts"],(function(n){var t,o,i,e,r,a,l,s,u,c,p,f,y,d,I,U;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,i=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,l=n.Node,s=n.instantiate,u=n.v3,c=n.tween},function(n){p=n.UIModule},function(n){f=n.UIControllerProperty,y=n.UIController},function(n){d=n.UILayers},function(n){I=n.UIMgr},function(n){U=n.AudioMgr}],execute:function(){var h,g,m,v,b,D,F,L;r._RF.push({},"adf1cqRVLlEuobI6TfVtHC0","UIFlyDiamonds",void 0);var _=a.ccclass,M=a.property,w=n("Layout_UIFlyDiamonds",(h=_("Layout_UIFlyDiamonds"),g=M(l),m=M(l),h((D=t((b=function(n){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,i(t,"pos",D,e(t)),i(t,"icon",F,e(t)),t}return o(t,n),t}(p)).prototype,"pos",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(b.prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));n("UIFlyDiamonds",f(d.OVERLAY,"prefab/UIFlyDiamonds",w)(L=function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.show=function(){I.getInstance().showUI(t)},t.prototype.onCreated=function(){for(var n=this,t=this._layout,o=function(o){var i=s(t.icon);i.active=!0,i.parent=n.node,i.position=u(0,0,0),c(i).delay(.1*o).call((function(){U.Ins().playOneShot("audio/fly_diamonds")})).to(.4,{position:t.pos.position}).call((function(){9==o&&n.close()})).start()},i=0;i<10;i++)o(i)},t}(y))||L);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIGameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayers.ts","./UIMgr.ts","./UIModule.ts","./UIController.ts","./PixelSpriteNum.ts","./Screen.ts","./GameScene.ts"],(function(e){var t,n,r,o,i,c,u,a,l,s,f,p,h,b,m,y,I,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,u=e.Node,a=e.Button,l=e.director,s=e.tween},function(e){f=e.UILayers},function(e){p=e.UIMgr},function(e){h=e.UIModule},function(e){b=e.UIControllerProperty,m=e.UIController},function(e){y=e.PixelSpriteNum},function(e){I=e.Screen},function(e){g=e.GameScene}],execute:function(){var U,v,S,d,w,L,P,_,G,O,x,z;i._RF.push({},"2efb3b81xxJVqRLP5ZVEvV4","UIGameOver",void 0);var C=c.ccclass,H=c.property,M=e("Layout_UIGameOver",(U=C("Layout_UIGameOver"),v=H(u),S=H(a),d=H(y),w=H(y),U((_=t((P=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,r(t,"root",_,o(t)),r(t,"btnHome",G,o(t)),r(t,"score",O,o(t)),r(t,"highestScore",x,o(t)),t}return n(t,e),t}(h)).prototype,"root",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(P.prototype,"btnHome",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(P.prototype,"score",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(P.prototype,"highestScore",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=P))||L));e("UIGameOver",b(f.POPUP,"prefab/UIGameOver",M)(z=function(e){function t(){return e.apply(this,arguments)||this}n(t,e),t.show=function(){p.getInstance().showUI(t)};var r=t.prototype;return r.onCreated=function(){var t=this,n=this._layout;n.btnHome.node.on("click",(function(){t.onClickEvent(!1),e.prototype.close.call(t),l.loadScene("HomeScene")})),n.score.showNumber(g.Ins.currentScoreLabel.number),n.highestScore.showNumber(g.Ins.highestScoreLabel.number),s(this._layout.root).to(.2,{x:0},{easing:"sineOut"}).start()},r.close=function(){s(this._layout.root).to(.15,{x:I.ScreenWidth},{easing:"sineIn"}).call((function(){})).start()},t}(m))||z);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayers.ts","./UIMgr.ts","./UIModule.ts","./UIController.ts","./Screen.ts"],(function(t){var n,o,e,r,i,c,l,u,a,s,f,p,I,y,b;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,c=t._decorator,l=t.Node,u=t.Button,a=t.tween},function(t){s=t.UILayers},function(t){f=t.UIMgr},function(t){p=t.UIModule},function(t){I=t.UIControllerProperty,y=t.UIController},function(t){b=t.Screen}],execute:function(){var h,U,d,g,v,_,k,C,w,L;i._RF.push({},"07d92GGo99D/LYZCGt/HXCX","UIInfo",void 0);var P=c.ccclass,z=c.property,B=t("Layout_UIInfo",(h=P("Layout_UIInfo"),U=z(l),d=z(u),g=z(u),h((k=n((_=function(t){function n(){for(var n,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return n=t.call.apply(t,[this].concat(i))||this,e(n,"root",k,r(n)),e(n,"btnBack",C,r(n)),e(n,"btnOK",w,r(n)),n}return o(n,t),n}(p)).prototype,"root",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(_.prototype,"btnBack",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(_.prototype,"btnOK",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=_))||v));t("UIInfo",I(s.POPUP,"prefab/UIInfo",B)(L=function(t){function n(){return t.apply(this,arguments)||this}o(n,t),n.show=function(){f.getInstance().showUI(n)};var e=n.prototype;return e.onCreated=function(){var t=this,n=this._layout;n.btnBack.node.on("click",(function(){t.onClickEvent(),t.close()})),n.btnOK.node.on("click",(function(){t.onClickEvent(),t.close()})),a(this._layout.root).to(.2,{x:0},{easing:"sineOut"}).start()},e.close=function(){a(this._layout.root).to(.15,{x:b.ScreenWidth},{easing:"sineIn"}).call(t.prototype.close.bind(this)).start()},n}(y))||L);i._RF.pop()}}}));

System.register("chunks:///_virtual/UILayers.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"91c61rOlh9COL9yTtRhTmRI","UILayers",void 0);var A=e("UILayers",function(e){return e[e.GAME=0]="GAME",e[e.HUD=1]="HUD",e[e.POPUP=2]="POPUP",e[e.ALERT=3]="ALERT",e[e.LOADING=4]="LOADING",e[e.WAITING=5]="WAITING",e[e.OVERLAY=6]="OVERLAY",e[e.NUM=7]="NUM",e}(A||{}));e("UILayersName",["GAME","HUD","POPUP","ALERT","LOADING","WAITING","OVERLAY"]);r._RF.pop()}}}));

System.register("chunks:///_virtual/UILevelUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayers.ts","./UIMgr.ts","./PixelSpriteNum.ts","./AdManager.ts","./UIModule.ts","./UIController.ts","./Screen.ts","./ConfigLoader.ts","./UserData.ts","./ReqAddDiamond.ts","./UIAdUnavaliable.ts","./UIAlert.ts","./PixelSpriteWord.ts","./PixelSprite.ts","./UITips.ts","./UIFlyDiamonds.ts","./UIWaiting.ts"],(function(e){var n,t,o,i,r,l,a,c,u,s,f,d,p,b,h,U,g,v,w,I,y,A,_,C,m,L,S,P,k,x;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Node,c=e.Button,u=e.find,s=e.Color,f=e.tween},function(e){d=e.UILayers},function(e){p=e.UIMgr},function(e){b=e.PixelSpriteNum},function(e){h=e.AdManager,U=e.AD_CONFIG},function(e){g=e.UIModule},function(e){v=e.UIControllerProperty,w=e.UIController},function(e){I=e.Screen},function(e){y=e.ConfigLoader},function(e){A=e.UserData},function(e){_=e.ReqAddDiamond},function(e){C=e.UIAdUnavailable},function(e){m=e.UIAlert},function(e){L=e.PixelSpriteWord},function(e){S=e.PixelSprite},function(e){P=e.UITips},function(e){k=e.UIFlyDiamonds},function(e){x=e.UIWaiting}],execute:function(){var D,z,M,R,F,N,W,B,q,E,G,H,O,T,V,j,X,J;r._RF.push({},"f0df3+FCGBBorqC3DaAbH5x","UILevelUp",void 0);var K=l.ccclass,Q=l.property,Y=e("Layout_UILevelUp",(D=K("Layout_UILevelUp"),z=Q(a),M=Q(c),R=Q(c),F=Q(c),N=Q(b),W=Q(b),B=Q(S),D((G=n((E=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return n=e.call.apply(e,[this].concat(r))||this,o(n,"root",G,i(n)),o(n,"btnClose",H,i(n)),o(n,"btnNo",O,i(n)),o(n,"btnAd",T,i(n)),o(n,"labelAward",V,i(n)),o(n,"levelScore",j,i(n)),o(n,"unlockColor",X,i(n)),n}return t(n,e),n}(g)).prototype,"root",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(E.prototype,"btnClose",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(E.prototype,"btnNo",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(E.prototype,"btnAd",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(E.prototype,"labelAward",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(E.prototype,"levelScore",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(E.prototype,"unlockColor",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=E))||q));e("UILevelUp",v(d.POPUP,"prefab/UILevelUp",Y)(J=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(n=e.call.apply(e,[this].concat(o))||this)._config=null,n}t(n,e),n.show=function(){p.getInstance().showUI(n)};var o=n.prototype;return o.onCreated=function(){var e=this,n=this._layout;if(n.btnClose.node.on("click",(function(){e.onClickEvent(),e.close()})),n.btnNo.node.on("click",(function(){e.onClickEvent(),e.close()})),n.btnAd.node.on("click",(function(){h.Ins().isRewardedAdReady(U.adUnitIds.rewardedVideo,(function(n){n?(h.Ins().setListener(e),h.Ins().showRewardedAd(U.adUnitIds.rewardedVideo)):e.onAdShowFail()}))})),this._config=y.getConfig("level").find((function(e){return e.level===A.level})),n.labelAward.number=this._config.award,u("Label",n.btnAd.node).getComponent(L).word="CLAIM x "+this._config.ad_multiple,this._config.unlock_color){n.unlockColor.node.active=!0;for(var t=(new s).fromHEX(this._config.unlock_color),o=[],i=0;i<30;i++)if(o[i]=[],i<16)for(var r=(30-(2+4*Math.floor(i/2)))/2,l=0;l<30;l++)o[i][l]=l>=r&&l<30-r?1:0;else for(var a=0;a<30;a++)o[i][a]=0;for(var c=[],d=0;d<o.length;d++){c[d]=[];for(var p=0;p<o[d].length;p++)1===o[d][p]?c[d][p]=t:c[d][p]=new s(0,0,0,0)}n.unlockColor.drawPixelGrid(10,new s(0,0,0,0),c,!0)}else n.levelScore.node.active=!0,n.levelScore.number=this._config.score_start;f(this._layout.root).to(.2,{x:0},{easing:"sineOut"}).start()},o.close=function(){f(this._layout.root).to(.15,{x:I.ScreenWidth},{easing:"sineIn"}).call(e.prototype.close.bind(this)).start()},o.onAdRewarded=function(){var n=this;x.show("Loading...");var t=(this._config.ad_multiple-1)*this._config.award;(new _).start(t).then((function(){e.prototype.close.call(n),P.show("Received "+t+" Diamonds"),k.show(),x.hide()})).catch((function(e){m.show(e),x.hide()}))},o.onAdShowFail=function(){e.prototype.close.call(this),C.show()},n}(w))||J);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./ResLoader.ts","./UILayers.ts","./Screen.ts"],(function(t){var e,n,o,i,r,a,s,u,c,l,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Node,i=t.UITransform,r=t.Prefab,a=t.instantiate},function(t){s=t.SingletonClass},function(t){u=t.default},function(t){c=t.UILayers,l=t.UILayersName},function(t){h=t.Screen}],execute:function(){n._RF.push({},"21661ghaahKjYYzVFLskguR","UIMgr",void 0);t("UIMgr",function(t){function n(){var e;return(e=t.call(this)||this)._uiRoot=null,e}e(n,t);var s=n.prototype;return s.setUp=function(t){this._uiRoot=new o;var e=this._uiRoot.addComponent(i);e.setContentSize(0,0),e.setAnchorPoint(.5,.5),this._uiRoot.name="UI_ROOT",this._uiRoot.active=!0,t.addChild(this._uiRoot);for(var n=0;n<c.NUM;n++){var r=new o;r.name=l[n];var a=r.addComponent(i);a.setContentSize(h.ScreenWidth,h.ScreenHeight),a.setAnchorPoint(.5,.5),this._uiRoot.addChild(r)}},s.showUI=function(t,e){for(var n=this,o=arguments.length,i=new Array(o>2?o-2:0),s=2;s<o;s++)i[s-2]=arguments[s];var c=new t,l=function(t){var o=a(t);n.getLayerNode(c.getLayer()).addChild(o),c.setup.apply(c,[o].concat(i)),null==e||e(c)};return"string"==typeof c.getPrefab()?u.loadRes(c.getPrefab(),r).then((function(t){l(t)})):l(c.getPrefab()),c},s.closeAllUI=function(){this._uiRoot.destroyAllChildren()},s.getLayerNode=function(t){return this._uiRoot.getChildByName(l[t])},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIModule.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,r,u;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.find,u=t.Component}],execute:function(){var c;o._RF.push({},"9a164aDtRZKl727XvUqf/fH","UIModule",void 0);var i=n.ccclass;n.property,t("UIModule",i("UIModule")(c=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.child=function(t,e){return void 0===e&&(e=this.node),r(t,e)},o}(u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/UINetLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,r=n.Component}],execute:function(){var c;e._RF.push({},"29d02Fq1ZlMeaQas9pmFycE","UINetLoading",void 0);var i=o.ccclass;o.property,n("UILoading",i("UILoading")(c=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIPause.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIModule.ts","./UIController.ts","./UILayers.ts","./Screen.ts","./UIMgr.ts","./AudioMgr.ts","./UserPreferences.ts","./UIAlert.ts","./Log.ts","./GlobalEvent.ts"],(function(n){var e,t,o,i,r,u,l,c,a,s,b,f,p,d,m,y,v,I,g,U,h,k;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){r=n.cclegacy,u=n._decorator,l=n.Node,c=n.Button,a=n.director,s=n.find,b=n.tween},function(n){f=n.UIModule},function(n){p=n.UIControllerProperty,d=n.UIController},function(n){m=n.UILayers},function(n){y=n.Screen},function(n){v=n.UIMgr},function(n){I=n.AudioMgr},function(n){g=n.UserPreferences},function(n){U=n.UIAlert},function(n){h=n.debug},function(n){k=n.GlobalEvent}],execute:function(){var w,V,C,P,M,z,S,E,L,R,_,A,H,x,D,G,B,F,N,O;r._RF.push({},"5928fLLih9Nlqaw+1xbgzSk","UIPause",void 0);var T=u.ccclass,j=u.property,q=n("Layout_UIPause",(w=T("Layout_UIPause"),V=j(l),C=j(c),P=j(c),M=j(c),z=j(c),S=j(c),E=j(c),L=j(c),w((A=e((_=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),u=0;u<t;u++)r[u]=arguments[u];return e=n.call.apply(n,[this].concat(r))||this,o(e,"root",A,i(e)),o(e,"btnClose",H,i(e)),o(e,"btnHome",x,i(e)),o(e,"btnRestart",D,i(e)),o(e,"btnMusic",G,i(e)),o(e,"btnSound",B,i(e)),o(e,"btnVibrate",F,i(e)),o(e,"btnRule",N,i(e)),e}return t(e,n),e}(f)).prototype,"root",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(_.prototype,"btnClose",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(_.prototype,"btnHome",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(_.prototype,"btnRestart",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(_.prototype,"btnMusic",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(_.prototype,"btnSound",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(_.prototype,"btnVibrate",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(_.prototype,"btnRule",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=_))||R));n("UIPause",p(m.POPUP,"prefab/UIPause",q)(O=function(n){function e(){return n.apply(this,arguments)||this}t(e,n),e.show=function(){v.getInstance().showUI(e)};var o=e.prototype;return o.onCreated=function(){var e=this,t=this._layout;t.btnClose.node.on("click",(function(){e.onClickEvent(),e.close()})),t.btnHome.node.on("click",(function(){e.onClickEvent(!1),n.prototype.close.call(e),a.loadScene("HomeScene")})),t.btnRestart.node.on("click",(function(){e.onClickEvent(!1);U.show("Are you sure you want to reset your game?\nThis will set your current score to zero.",!0).onClick((function(t){t&&(n.prototype.close.call(e),k.emit("UIPause:ResetGame"))}))})),s("icon/off",t.btnMusic.node).active=0==g.musicVolume,t.btnMusic.node.on("click",(function(){h("layout.btnMusic.node.onclick"),e.onClickEvent(!1);var n=1==I.Ins().musicVolume;s("icon/off",t.btnMusic.node).active=n,I.Ins().musicVolume=n?0:1,g.musicVolume=I.Ins().musicVolume,0==I.Ins().musicVolume?I.Ins().pause():I.Ins().resume()})),s("icon/off",t.btnSound.node).active=0==g.soundVolume,t.btnSound.node.on("click",(function(){e.onClickEvent(!1);var n=1==I.Ins().soundVolume;s("icon/off",t.btnSound.node).active=n,I.Ins().soundVolume=n?0:1,g.soundVolume=I.Ins().soundVolume})),s("icon/off",t.btnVibrate.node).active=!g.vibrate,t.btnVibrate.node.on("click",(function(){e.onClickEvent(!1),g.vibrate=!g.vibrate,s("icon/off",t.btnVibrate.node).active=!g.vibrate})),t.btnRule.node.on("click",(function(){e.onClickEvent()})),b(this._layout.root).to(.2,{x:0},{easing:"sineOut"}).start()},o.close=function(){var e=this;b(this._layout.root).to(.15,{x:y.ScreenWidth},{easing:"sineIn"}).call((function(){n.prototype.close.call(e)})).start()},o.onDispose=function(){g.save()},e}(d))||O);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIPopAni.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIController.ts"],(function(t){var e,n,o,i,s,l,a,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Tween,i=t.find,s=t.Vec3,l=t.UIOpacity,a=t.tween,c=t.Widget},function(t){r=t.UIController}],execute:function(){n._RF.push({},"39380pCT2BLq7rS9CAw2D8H","UIPopAni",void 0);t("UIPopAni",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.playAni=function(){var t=this;o.stopAllByTarget(this.node),i("Mask",this.node).active=!1,this.node.scale=new s(1.2,1.2,1.2),this.node.getComponent(l).opacity=0,a(this.node).delay(.1).parallel(a(this.node).to(.05,{scale:new s(.95,.95,.95)}),a(this.node.getComponent(l)).to(.1,{opacity:255})).to(.05,{scale:new s(1,1,1)}).call((function(){var e;i("Mask",t.node).active=!0,null==(e=t.node.getComponent(c))||e.updateAlignment()})).start()},r.close=function(){i("Mask",this.node).active=!1,a(this.node).to(5/60,{scale:new s(.95,.95,.95)}).parallel(a(this.node).to(10/60,{scale:new s(1.2,1.2,1.2)}),a(this.node.getComponent(l)).to(10/60,{opacity:0})).call(t.prototype.close.bind(this)).start()},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIRank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayers.ts","./UIMgr.ts","./UIModule.ts","./Screen.ts","./UIController.ts","./Log.ts","./ReqRank.ts","./UIAlert.ts","./PixelSpriteNum.ts","./ResLoader.ts","./ReqRanList.ts","./UserData.ts"],(function(t){var n,e,i,o,r,a,l,s,u,c,f,d,p,h,g,m,b,y,k,I,R,w,U,v,L,_,S,B;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,s=t.Button,u=t.ScrollView,c=t.tween,f=t.Tween,d=t.instantiate,p=t.find,h=t.SpriteFrame,g=t.Sprite},function(t){m=t.UILayers},function(t){b=t.UIMgr},function(t){y=t.UIModule},function(t){k=t.Screen},function(t){I=t.UIControllerProperty,R=t.UIController},function(t){w=t.debug},function(t){U=t.ReqRankList},function(t){v=t.UIAlert},function(t){L=t.PixelSpriteNum},function(t){_=t.default},function(t){S=t.ReqRank},function(t){B=t.UserData}],execute:function(){var C,N,P,z,F,q,x,A,D,M,V,H,T,O,W,j;r._RF.push({},"08ab5RUyANFB7oHbYgHiXiW","UIRank",void 0);var E=a.ccclass,X=a.property,Y=t("Layout_UIRank",(C=E("Layout_UIRank"),N=X(l),P=X(s),z=X(l),F=X(u),q=X(l),x=X(l),C((M=n((D=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(n,"root",M,o(n)),i(n,"btnBack",V,o(n)),i(n,"loadingNode",H,o(n)),i(n,"scrollView",T,o(n)),i(n,"item",O,o(n)),i(n,"mine",W,o(n)),n}return e(n,t),n}(y)).prototype,"root",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(D.prototype,"btnBack",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(D.prototype,"loadingNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(D.prototype,"scrollView",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(D.prototype,"item",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(D.prototype,"mine",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=D))||A));t("UIRank",I(m.POPUP,"prefab/UIRank",Y)(j=function(t){function n(){return t.apply(this,arguments)||this}e(n,t),n.show=function(){b.getInstance().showUI(n)};var i=n.prototype;return i.onCreated=function(){var t=this;this._layout.btnBack.node.on("click",(function(){t.onClickEvent(),t.close()})),c(this._layout.root).to(.2,{x:0},{easing:"sineOut"}).call(this.reqRankList.bind(this)).start()},i.reqRankList=function(){var t=this;this.showLoading(!0),(new U).start().then((function(n){n&&n.success&&(t.showLoading(!1),t.onLoadRankList(n.data.leaderboard))}),(function(n){t.showLoading(!1),v.show(n)})),(new S).start().then((function(n){n&&n.success&&(t._layout.mine.active=!0,t.initItem(t._layout.mine,n.data.rank,n.data.highestScore,B.diamonds))}),(function(t){v.show(t)}))},i.showLoading=function(t){var n=this._layout;n.loadingNode.active=t,t?c(n.loadingNode).by(1,{angle:-360}).repeatForever().tag(1).start():f.stopAllByTarget(n.loadingNode)},i.onLoadRankList=function(t){for(var n=this._layout,e=0;e<t.length;e++){var i=d(n.item);i.active=!0,i.setParent(n.scrollView.content),this.initItem(i,t[e].rank,t[e].highestScore,t[e].diamonds)}},i.initItem=function(t,n,e,i){p("rank",t).getComponent(L).number=n,p("highest_score",t).getComponent(L).number=e,p("diamonds",t).getComponent(L).number=i,n>3?(p("rank",t).active=!0,p("top3",t).active=!1):(p("rank",t).active=!1,p("top3",t).active=!0,_.loadBundleRes("texture/common/rank"+n+"/spriteFrame",h).then((function(n){w("loadBundleRes",n),p("top3",t).getComponent(g).spriteFrame=n})))},i.close=function(){c(this._layout.root).to(.15,{x:k.ScreenWidth},{easing:"sineIn"}).call(t.prototype.close.bind(this)).start()},n}(R))||j);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIResurrection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayers.ts","./UIMgr.ts","./GlobalTimer.ts","./PixelSpriteNum.ts","./UIController.ts","./AdManager.ts","./ReqAddDiamond.ts","./UIAlert.ts","./UIGameOver.ts","./UserData.ts","./UIModule.ts","./ConfigLoader.ts","./GlobalEvent.ts","./Log.ts","./UIAdUnavaliable.ts","./UITips.ts","./AudioMgr.ts"],(function(n){var e,t,o,i,r,c,u,a,s,l,d,f,h,m,p,w,b,I,R,v,U,g,y,A,C,T,D,k,_;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized,r=n.asyncToGenerator,c=n.regeneratorRuntime},function(n){u=n.cclegacy,a=n._decorator,s=n.Button,l=n.Node},function(n){d=n.UILayers},function(n){f=n.UIMgr},function(n){h=n.GlobalTimer},function(n){m=n.PixelSpriteNum},function(n){p=n.UIControllerProperty,w=n.UIController},function(n){b=n.AdManager,I=n.AD_CONFIG},function(n){R=n.ReqAddDiamond},function(n){v=n.UIAlert},function(n){U=n.UIGameOver},function(n){g=n.UserData},function(n){y=n.UIModule},function(n){A=n.ConfigLoader},function(n){C=n.GlobalEvent},function(n){T=n.debug},function(n){D=n.UIAdUnavailable},function(n){k=n.UITips},function(n){_=n.AudioMgr}],execute:function(){var F,L,M,S,G,O,P,z,N,x,E,q;u._RF.push({},"b1c1ceOfVRB3qnvaUqXhRlz","UIResurrection",void 0);var B=a.ccclass,V=a.property,j=n("Layout_UIResurrection",(F=B("Layout_UIResurrection"),L=V(s),M=V(s),S=V(s),G=V(l),F((z=e((P=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return e=n.call.apply(n,[this].concat(r))||this,o(e,"btnClose",z,i(e)),o(e,"btnRelive",N,i(e)),o(e,"btnDiamond",x,i(e)),o(e,"or",E,i(e)),e}return t(e,n),e}(y)).prototype,"btnClose",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(P.prototype,"btnRelive",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(P.prototype,"btnDiamond",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(P.prototype,"or",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=P))||O));n("UIResurrection",p(d.POPUP,"prefab/UIResurrection",j)(q=function(n){function e(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))||this).countdownTimer=-1,e._bRewarded=!1,e}t(e,n),e.show=function(){f.getInstance().showUI(e)};var o=e.prototype;return o.onCreated=function(){var n=this,e=this._layout;e.btnClose.node.on("click",(function(){n.onClickEvent(!1),n.close(),n.onResurrectionFail(),U.show()})),e.btnRelive.node.on("click",(function(){n.onClickEvent(!1),n.onClickAdRelive()})),e.btnDiamond.node.on("click",(function(){n.onClickEvent(!1),n.onClickDiamondRelive()})),e.btnRelive.node.active=!1,e.or.active=!1,b.Ins().isRewardedAdReady(I.adUnitIds.rewardedVideo,(function(t){e.btnRelive.node.active=t,e.or.active=t,t||(b.Ins().loadRewardedAd(I.adUnitIds.rewardedVideo),n.onAdShowFail())}));var t=10,o=this.node.getChildByName("countdown").getComponent(m);o.showNumber(t--);var i=h.startTimer((function(){0==t&&(h.stopTimer(n.countdownTimer),n.countdownTimer=-1,n.onTimeOut()),_.Ins().playOneShot("audio/tick"),o.showNumber(t--)}),1,-1);this.countdownTimer=i},o.onTimeOut=function(){this.close(),this.onResurrectionFail(),U.show()},o.onResurrectionFail=function(){C.emit("UIResurrection:Failed")},o.onClickAdRelive=function(){this.countdownTimer>0&&h.pauseTimer(this.countdownTimer),b.Ins().setListener(this),b.Ins().showRewardedAd(I.adUnitIds.rewardedVideo)},o.onClickDiamondRelive=function(){var n=A.getConfig("item").find((function(n){return 2===n.id}));g.diamonds<n.consume?k.show("Diamonds not enough"):((new R).start(-n.consume).then((function(){C.emit("UIResurrection:Success")})).catch((function(n){v.show(n)})),this.close())},o.onAdRewarded=function(){T("onAdRewarded"),this._bRewarded=!0},o.onAdClose=function(){var n=r(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(T("onAdClose"),this._bRewarded){n.next=3;break}return n.abrupt("return");case 3:k.show("Resurrection successful"),C.emit("UIResurrection:Success"),this.close();case 6:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),o.onAdShowFail=function(){T("onAdShowFail"),D.show()},o.onDispose=function(){this.countdownTimer>0&&h.stopTimer(this.countdownTimer)},e}(w))||q);u._RF.pop()}}}));

System.register("chunks:///_virtual/UISetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayers.ts","./UIMgr.ts","./UIModule.ts","./Screen.ts","./UIController.ts","./AudioMgr.ts","./UserPreferences.ts","./PixelSpriteWord.ts","./UserData.ts","./Platform.ts","./Device.ts","./UIInfo.ts","./UITips.ts"],(function(n){var e,t,i,o,r,u,c,l,a,s,b,f,p,d,m,y,v,I,U,g,k,h,w,C,P,z;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,u=n._decorator,c=n.Node,l=n.Button,a=n.find,s=n.sys,b=n.tween},function(n){f=n.UILayers},function(n){p=n.UIMgr},function(n){d=n.UIModule},function(n){m=n.Screen},function(n){y=n.UIControllerProperty,v=n.UIController},function(n){I=n.AudioMgr},function(n){U=n.UserPreferences},function(n){g=n.PixelSpriteWord},function(n){k=n.UserData},function(n){h=n.PlatformType,w=n.Platform},function(n){C=n.Device},function(n){P=n.UIInfo},function(n){z=n.UITips}],execute:function(){var S,V,x,M,R,_,D,E,L,T,A,F,B,G,W,j,O,H,K,N,Y,q,J,Q,X,Z,$,nn,en,tn;r._RF.push({},"de96cgIU+RA6Kx1wPmY4o9G","UISetting",void 0);var on=u.ccclass,rn=u.property,un=n("Layout_UISetting",(S=on("Layout_UISetting"),V=rn(c),x=rn(l),M=rn(l),R=rn(l),_=rn(l),D=rn(l),E=rn(l),L=rn(l),T=rn(l),A=rn(g),F=rn(g),B=rn(l),G=rn(l),S((O=e((j=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),u=0;u<t;u++)r[u]=arguments[u];return e=n.call.apply(n,[this].concat(r))||this,i(e,"root",O,o(e)),i(e,"btnBack",H,o(e)),i(e,"btnMusic",K,o(e)),i(e,"btnSound",N,o(e)),i(e,"btnVibrate",Y,o(e)),i(e,"btnRateUs",q,o(e)),i(e,"btnFeedback",J,o(e)),i(e,"btnPrivacy",Q,o(e)),i(e,"btnTerms",X,o(e)),i(e,"version",Z,o(e)),i(e,"uid",$,o(e)),i(e,"btnCopyUid",nn,o(e)),i(e,"btnInfo",en,o(e)),e}return t(e,n),e}(d)).prototype,"root",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(j.prototype,"btnBack",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(j.prototype,"btnMusic",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(j.prototype,"btnSound",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(j.prototype,"btnVibrate",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(j.prototype,"btnRateUs",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(j.prototype,"btnFeedback",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(j.prototype,"btnPrivacy",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(j.prototype,"btnTerms",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(j.prototype,"version",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(j.prototype,"uid",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nn=e(j.prototype,"btnCopyUid",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),en=e(j.prototype,"btnInfo",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=j))||W));n("UISetting",y(f.POPUP,"prefab/UISetting",un)(tn=function(n){function e(){return n.apply(this,arguments)||this}t(e,n),e.show=function(){p.getInstance().showUI(e)};var i=e.prototype;return i.onCreated=function(){var n=this,e=this._layout;e.btnBack.node.on("click",(function(){n.onClickEvent(!1),n.close()})),a("off",e.btnMusic.node).active=0==U.musicVolume,e.btnMusic.node.on("click",(function(){n.onClickEvent(!1);var t=1==I.Ins().musicVolume;a("off",e.btnMusic.node).active=t,I.Ins().musicVolume=t?0:1,U.musicVolume=I.Ins().musicVolume,0==I.Ins().musicVolume?I.Ins().pause():I.Ins().resume()})),a("off",e.btnSound.node).active=0==U.soundVolume,e.btnSound.node.on("click",(function(){n.onClickEvent(!1);var t=1==I.Ins().soundVolume;a("off",e.btnSound.node).active=t,I.Ins().soundVolume=t?0:1,U.soundVolume=I.Ins().soundVolume})),a("off",e.btnVibrate.node).active=!U.vibrate,e.btnVibrate.node.on("click",(function(){n.onClickEvent(!1),U.vibrate=!U.vibrate,a("off",e.btnVibrate.node).active=!U.vibrate})),e.btnRateUs.node.on("click",(function(){n.onClickEvent(!1),s.openURL("itms-apps://itunes.apple.com/app/6752853333?action=write-review")})),e.btnFeedback.node.on("click",(function(){n.onClickEvent(!1);var e=encodeURIComponent("SandPuzzle Feedback"),t=encodeURIComponent("[Please write your feedback here]\n\nVersion: "+C.GetAppVersion()+"\nDevice: "+(h[w.platform]||"Unknown")+"\nUser ID: "+(k.uid||"Unknown"));s.openURL("mailto:gx_studio_services@163.com?subject="+e+"&body="+t)})),e.btnPrivacy.node.on("click",(function(){n.onClickEvent(!1),s.openURL("https://garyxuan.github.io/gx-privacy-policy/SandPuzzle-Privacy.html")})),e.btnTerms.node.on("click",(function(){n.onClickEvent(!1),s.openURL("https://garyxuan.github.io/gx-privacy-policy/SandPuzzle-Terms.html")})),e.btnCopyUid.node.on("click",(function(){n.onClickEvent(!1),C.CopyTextToClipboard(e.uid.word),z.show("Copied to clipboard")})),e.btnInfo.node.on("click",(function(){n.onClickEvent(),P.show()})),e.version.string="Version "+C.GetAppVersion(),e.uid.string=k.uid,b(this._layout.root).to(.2,{x:0},{easing:"sineOut"}).start()},i.close=function(){b(this._layout.root).to(.15,{x:m.ScreenWidth},{easing:"sineIn"}).call(n.prototype.close.bind(this)).start()},i.onDispose=function(){U.save()},e}(v))||tn);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIShop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayers.ts","./UIMgr.ts","./UIModule.ts","./UIController.ts"],(function(t){var r,e,n,o,i,c,u,a,s,l,p,f;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,c=t._decorator,u=t.Node},function(t){a=t.UILayers},function(t){s=t.UIMgr},function(t){l=t.UIModule},function(t){p=t.UIControllerProperty,f=t.UIController}],execute:function(){var I,U,h,y,d,g;i._RF.push({},"d5fefU7wx9I6Kcpn10GJreA","UIShop",void 0);var S=c.ccclass,v=c.property,L=t("Layout_UIShop",(I=S("Layout_UIShop"),U=v(u),I((d=r((y=function(t){function r(){for(var r,e=arguments.length,i=new Array(e),c=0;c<e;c++)i[c]=arguments[c];return r=t.call.apply(t,[this].concat(i))||this,n(r,"mask",d,o(r)),r}return e(r,t),r}(l)).prototype,"mask",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));t("UIShop",p(a.POPUP,"prefab/UIShop",L)(g=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.show=function(){s.getInstance().showUI(r)},r.prototype.onCreated=function(){},r}(f))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/UITips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayers.ts","./UIMgr.ts","./UIController.ts","./Log.ts","./UIModule.ts","./GlobalTimer.ts","./PixelSpriteWord.ts"],(function(t){var n,r,e,o,i,s,c,u,a,l,p,h,f,T,I,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,i=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){c=t.cclegacy,u=t._decorator},function(t){a=t.UILayers},function(t){l=t.UIMgr},function(t){p=t.UIControllerProperty,h=t.UIController},function(t){f=t.debug},function(t){T=t.UIModule},function(t){I=t.GlobalTimer},function(t){y=t.PixelSpriteWord}],execute:function(){var _,m,U,w,d,g;c._RF.push({},"3b05b/ZAKBFZ4aPR6CcePDG","UITips",void 0);var v=u.ccclass,b=u.property,L=t("Layout_UITips",(_=v("Layout_UITips"),m=b(y),_((d=n((w=function(t){function n(){for(var n,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=t.call.apply(t,[this].concat(i))||this,e(n,"content",d,o(n)),n}return r(n,t),n}(T)).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=w))||U)),P=null;t("UITips",p(a.WAITING,"prefab/UITips",L)(g=function(t){function n(){for(var n,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this)._contentStr="",n._showTime=0,n._showTimer=0,n}r(n,t),n.show=function(){var t=i(s().mark((function t(r,e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=2),P||(P=l.getInstance().showUI(n)),P._contentStr=r,P._showTime=e,t.abrupt("return",P);case 5:case"end":return t.stop()}}),t)})));return function(n,r){return t.apply(this,arguments)}}();var e=n.prototype;return e.onCreated=function(){var t=this;f("UITips onCreated"),this._layout.content.string=this._contentStr,this._showTimer=I.startTimer((function(){t.close(),t._showTimer=0}),this._showTime,1)},n.hide=function(){P&&(P.close(),P=null)},e.onDispose=function(){P=null,this._showTimer>0&&(I.stopTimer(this._showTimer),this._showTimer=0)},n}(h))||g);c._RF.pop()}}}));

System.register("chunks:///_virtual/UIWaiting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILayers.ts","./UIMgr.ts","./UIController.ts","./Log.ts","./UIModule.ts"],(function(t){var n,r,e,o,i,a,c,u,s,l,p,f,g,I,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,i=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){c=t.cclegacy,u=t._decorator,s=t.Label},function(t){l=t.UILayers},function(t){p=t.UIMgr},function(t){f=t.UIControllerProperty,g=t.UIController},function(t){I=t.debug},function(t){y=t.UIModule}],execute:function(){var h,U,d,v,W,_;c._RF.push({},"3037dYb1Y1EnqsAWM9xP1gi","UIWaiting",void 0);var b=u.ccclass,w=u.property,L=t("Layout_UIWaiting",(h=b("Layout_UIWaiting"),U=w(s),h((W=n((v=function(t){function n(){for(var n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,e(n,"content",W,o(n)),n}return r(n,t),n}(y)).prototype,"content",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=v))||d)),M=null;t("UIWaiting",f(l.WAITING,"prefab/UIWaiting",L)(_=function(t){function n(){for(var n,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this)._contentStr="loading...",n}r(n,t),n.show=function(){var t=i(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return M||(M=p.getInstance().showUI(n),I("UIWaiting show")),M._contentStr=r||"loading...",t.abrupt("return",M);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();var e=n.prototype;return e.onCreated=function(){I("UIWaiting onCreated"),this._layout.content.string=this._contentStr},n.hide=function(){M&&(M.close(),M=null)},e.onDispose=function(){M=null},n}(g))||_);c._RF.pop()}}}));

System.register("chunks:///_virtual/UnityAds.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"99be2MvO2xBwL2ZaSMMbwvP","UnityAds",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/UserData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./GlobalEvent.ts","./SafeJSON.ts"],(function(t){var e,n,i,s,o,a;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy},function(t){s=t.SingletonClass},function(t){o=t.GlobalEvent},function(t){a=t.SafeJSON}],execute:function(){i._RF.push({},"1999ej1AC1AM76fSGnQo5LA","UserData",void 0);t("UserData",function(t){function i(){var e;return(e=t.call(this)||this)._uid="",e._level=1,e._highestScore=0,e._diamonds=0,e}e(i,t);var s=i.prototype;return s.save=function(t){void 0===t&&(t=!0),localStorage.setItem("userData",JSON.stringify(this)),t&&o.emit("UserData:Changed")},s.load=function(){var t=localStorage.getItem("userData");if(t){var e=a.parse(t);Object.assign(this,e)}},n(i,[{key:"uid",get:function(){return this._uid},set:function(t){this._uid=t}},{key:"level",get:function(){return this._level},set:function(t){this._level=t}},{key:"highestScore",get:function(){return this._highestScore},set:function(t){this._highestScore=t}},{key:"diamonds",get:function(){return this._diamonds},set:function(t){this._diamonds=t}}]),i}(s).getInstance());i._RF.pop()}}}));

System.register("chunks:///_virtual/UserPreferences.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalEvent.ts","./SafeJSON.ts","./Singleton.ts"],(function(e){var n,r,t,s,c;return{setters:[function(e){n=e.inheritsLoose},function(e){r=e.cclegacy},function(e){t=e.GlobalEvent},function(e){s=e.SafeJSON},function(e){c=e.SingletonClass}],execute:function(){r._RF.push({},"56ed0Qi1axArq10l0Uecwe+","UserPreferences",void 0);var o=e("userPreferences",function(e){function r(){var n;return(n=e.call(this)||this).musicVolume=1,n.soundVolume=1,n.vibrate=!0,n}n(r,e);var c=r.prototype;return c.load=function(){var e=localStorage.getItem("userPreferences");if(e){var n=s.parse(e);Object.assign(this,n)}},c.save=function(){localStorage.setItem("userPreferences",s.stringify(this)),t.emit("UserPreferences:Changed")},r}(c));e("UserPreferences",o.getInstance());r._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"8c7f3lgtcdM3r0lVibq88dm","Utils",void 0);t("Utils",function(){function t(){}t.compareVersion=function(t,r){for(var n=t.split("."),e=r.split("."),i=0;i<n.length&&i<e.length;i++){var c=parseInt(n[i])-parseInt(e[i]);if(0!==c)return c}return n.length-e.length};var r=t.prototype;return r.isJsonString=function(t){try{return JSON.parse(t),!0}catch(t){return!1}},r.getUrlParam=function(t){var r=t.split("?")[1];return r?r.split("&").reduce((function(t,r){var n=r.split("="),e=n[0],i=n[1];return t[e]=i,t}),{}):{}},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/WebSock.ts",["cc","./Log.ts"],(function(n){var e,s,t;return{setters:[function(n){e=n.cclegacy},function(n){s=n.warn,t=n.error}],execute:function(){e._RF.push({},"be5ebNhDE5JPoQIAkxpMn2z","WebSock",void 0);n("WebSock",function(){function n(){this._ws=null,this.onopen=null,this.onmessage=null,this.onerror=null,this.onclose=null}var e=n.prototype;return e.connect=function(n,e,o,i){var r=this;if(this._ws){if(this._ws.readyState===WebSocket.CONNECTING)return s("WebSocket connecting, wait for a while..."),!1;this.close()}try{this._ws=new WebSocket(n,i),e&&(this._ws.binaryType=e);var l=null;return o&&(l=setTimeout((function(){r._ws&&r._ws.close(),r._ws=null}),o)),this._ws.onopen=function(){l&&clearTimeout(l),l=null,null==r.onopen||r.onopen()},this._ws.onmessage=function(n){null==r.onmessage||r.onmessage(n.data)},this._ws.onerror=function(n){l&&clearTimeout(l),l=null,null==r.onerror||r.onerror(n)},this._ws.onclose=function(n){l&&clearTimeout(l),l=null,null==r.onclose||r.onclose(n)},!0}catch(e){return t("WebSocket connect error! url = "+n,e),!1}},e.send=function(n){return this._ws&&this._ws.readyState===WebSocket.OPEN?(this._ws.send(n),1):-1},e.sendBuffer=function(n){return this._ws&&this._ws.readyState===WebSocket.OPEN?(this._ws.send(n),1):-1},e.close=function(n,e){this._ws&&(this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.onopen=null,this._ws.close(n,e),this._ws=null)},n}());e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});